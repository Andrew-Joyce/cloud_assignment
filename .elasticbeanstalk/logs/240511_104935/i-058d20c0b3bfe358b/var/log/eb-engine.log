2024/05/09 09:19:15.351524 [INFO] Starting...
2024/05/09 09:19:15.351583 [INFO] Starting EBPlatform-PlatformEngine
2024/05/09 09:19:15.351681 [INFO] reading event message file
2024/05/09 09:19:15.352364 [INFO] Engine received EB command userdata-exec

2024/05/09 09:19:15.389573 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/09 09:19:16.358839 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/09 09:19:17.350776 [INFO] Unable to ping launch url, this is a scale-up instance.
2024/05/09 09:19:17.350888 [INFO] Engine command: (self-startup)

2024/05/09 09:19:17.350899 [INFO] Downloading EB Application...
2024/05/09 09:19:17.350902 [INFO] Region: ap-southeast-2
2024/05/09 09:19:17.350906 [INFO] envID: e-3caxgjpcfu
2024/05/09 09:19:17.350909 [INFO] envBucket: elasticbeanstalk-ap-southeast-2-905418134427
2024/05/09 09:19:17.350913 [INFO] Using manifest file name from command request
2024/05/09 09:19:17.350930 [INFO] Unable to get version manifest file.
2024/05/09 09:19:17.350934 [INFO] Downloading latest manifest available.
2024/05/09 09:19:17.350938 [INFO] Download latest app version manifest
2024/05/09 09:19:17.351176 [INFO] resources/environments/e-3caxgjpcfu/_runtime/versions/manifest
2024/05/09 09:19:17.408184 [INFO] latestManifest key *: resources/environments/e-3caxgjpcfu/_runtime/versions/manifest_1715246314259

2024/05/09 09:19:17.408417 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/versions/manifest_1715246314259
2024/05/09 09:19:17.422510 [INFO] Download successful147bytes downloaded
2024/05/09 09:19:17.422628 [INFO] Trying to read and parse version manifest...
2024/05/09 09:19:17.422914 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/_versions/new_assignment/app-240507_225601684034
2024/05/09 09:19:17.683580 [INFO] Download successful34503059bytes downloaded
2024/05/09 09:19:17.684099 [INFO] Executing instruction: SyncClock
2024/05/09 09:19:17.684105 [INFO] Starting SyncClock
2024/05/09 09:19:17.684119 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/05/09 09:19:17.702795 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Thu May 09 09:19:16 2024
System time     : 0.627705276 seconds slow of NTP time
Last offset     : +0.000022861 seconds
RMS offset      : 0.000022861 seconds
Frequency       : 3.303 ppm slow
Residual freq   : +7.505 ppm
Skew            : 2.738 ppm
Root delay      : 0.000848165 seconds
Root dispersion : 0.000481421 seconds
Update interval : 1.4 seconds
Leap status     : Normal

2024/05/09 09:19:17.702836 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/05/09 09:19:18.335534 [INFO] 200 OK

2024/05/09 09:19:18.335729 [INFO] Skipping Configure OS
2024/05/09 09:19:18.335738 [INFO] Skipping LockRepo
2024/05/09 09:19:18.335744 [INFO] Skipping GenerateEBBanner
2024/05/09 09:19:18.335749 [INFO] Skipping Install Process Manager
2024/05/09 09:19:18.335755 [INFO] Skipping install syslog
2024/05/09 09:19:18.335760 [INFO] Skipping install cron
2024/05/09 09:19:18.335765 [INFO] Skipping install proxy
2024/05/09 09:19:18.335770 [INFO] Skipping installhealthd
2024/05/09 09:19:18.335775 [INFO] Skipping Install Log Streaming Manager
2024/05/09 09:19:18.335780 [INFO] Skipping install X-Ray
2024/05/09 09:19:18.335785 [INFO] Skipping install Third Party License
2024/05/09 09:19:18.335791 [INFO] Skipping install httpd
2024/05/09 09:19:18.335798 [INFO] Instance has NOT been bootstrapped
2024/05/09 09:19:18.335801 [INFO] Executing instruction: installSqsd
2024/05/09 09:19:18.335805 [INFO] This is a web server environment instance, skip install sqsd daemon ...
2024/05/09 09:19:18.335819 [INFO] Instance has NOT been bootstrapped
2024/05/09 09:19:18.335822 [INFO] Executing instruction: bootstraphealthd
2024/05/09 09:19:18.335826 [INFO] this is an enhanced health env ...
2024/05/09 09:19:18.335838 [INFO] bootstrap healthd....
2024/05/09 09:19:18.335856 [INFO] Running command /bin/sh -c /usr/bin/id -u healthd || /usr/sbin/useradd --user-group healthd -s /sbin/nologin --create-home
2024/05/09 09:19:18.531224 [INFO] /usr/bin/id: ‘healthd’: no such user

2024/05/09 09:19:18.531969 [INFO] bootstrap healthd....
2024/05/09 09:19:18.531990 [INFO] Running command /bin/sh -c /usr/bin/id -u healthd || /usr/sbin/useradd --user-group healthd -s /sbin/nologin --create-home
2024/05/09 09:19:18.537285 [INFO] 1001

2024/05/09 09:19:18.537861 [INFO] configure bundle log for healthd...
2024/05/09 09:19:18.537926 [INFO] Executing instruction: GetSetupProxyLog
2024/05/09 09:19:18.538008 [INFO] Skipping Install yum packages
2024/05/09 09:19:18.538014 [INFO] Skipping Configure Python site-packages
2024/05/09 09:19:18.538020 [INFO] Skipping Install Python Modules
2024/05/09 09:19:18.538025 [INFO] Skipping MarkBaked
2024/05/09 09:19:18.538033 [INFO] Instance has NOT been bootstrapped
2024/05/09 09:19:18.538036 [INFO] Executing instruction: TuneSystemSettings
2024/05/09 09:19:18.538041 [INFO] Starting TuneSystemSettings
2024/05/09 09:19:18.538047 [INFO] Instance has NOT been bootstrapped
2024/05/09 09:19:18.539832 [INFO] Executing instruction: GetSetupLogRotate
2024/05/09 09:19:18.539843 [INFO] Initialize LogRotate files and directories
2024/05/09 09:19:18.562988 [INFO] Instance has NOT been bootstrapped
2024/05/09 09:19:18.563003 [INFO] Executing instruction: BootstrapCFNHup
2024/05/09 09:19:18.563007 [INFO] Bootstrap cfn-hup
2024/05/09 09:19:18.564822 [INFO] Copying file /opt/elasticbeanstalk/config/private/aws-eb-command-handler.conf to /etc/cfn/hooks.d/aws-eb-command-handler.conf
2024/05/09 09:19:18.566292 [INFO] Executing instruction: StartCFNHup
2024/05/09 09:19:18.566302 [INFO] Start cfn-hup
2024/05/09 09:19:18.566322 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/05/09 09:19:18.602357 [INFO] cfn-hup is not registered with EB yet, registering it now
2024/05/09 09:19:18.602409 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/05/09 09:19:18.644601 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 09:19:19.263400 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 09:19:19.279814 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/05/09 09:19:19.293095 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/05/09 09:19:19.883038 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/05/09 09:19:19.897191 [INFO] Running command /bin/sh -c systemctl enable cfn-hup.service
2024/05/09 09:19:20.518703 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/cfn-hup.service → /etc/systemd/system/cfn-hup.service.

2024/05/09 09:19:20.518746 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/05/09 09:19:20.534244 [INFO] cfn-hup process is not running, starting it now
2024/05/09 09:19:20.534281 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/05/09 09:19:20.559047 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/05/09 09:19:20.572061 [INFO] Running command /bin/sh -c systemctl start cfn-hup.service
2024/05/09 09:19:20.700960 [INFO] Instance has NOT been bootstrapped
2024/05/09 09:19:20.700976 [INFO] Executing instruction: SetupPublishLogCronjob
2024/05/09 09:19:20.700980 [INFO] Setup publish logs cron job...
2024/05/09 09:19:20.700990 [INFO] Copying file /opt/elasticbeanstalk/config/private/logtasks/cron/publishlogs to /etc/cron.d/publishlogs
2024/05/09 09:19:20.702918 [INFO] Instance has NOT been bootstrapped
2024/05/09 09:19:20.702937 [INFO] Executing instruction: MarkBootstrapped
2024/05/09 09:19:20.702942 [INFO] Starting MarkBootstrapped
2024/05/09 09:19:20.702956 [INFO] Instance has NOT been bootstrapped
2024/05/09 09:19:20.703039 [INFO] Marked instance as Bootstrapped
2024/05/09 09:19:20.703043 [INFO] Executing instruction: Save CFN Stack Info
2024/05/09 09:19:20.703097 [INFO] Executing instruction: stopSqsd
2024/05/09 09:19:20.703101 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/05/09 09:19:20.703104 [INFO] Executing instruction: PreBuildEbExtension
2024/05/09 09:19:20.703108 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/05/09 09:19:20.703127 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2 --configsets Infra-EmbeddedPreBuild
2024/05/09 09:19:21.607242 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/05/09 09:19:21.607269 [INFO] Executing instruction: StageApplication
2024/05/09 09:19:21.607423 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/05/09 09:19:21.607439 [INFO] Running command /bin/sh -c /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/05/09 09:19:24.729952 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/05/09 09:19:25.087685 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/05/09 09:19:25.087803 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/05/09 09:19:25.087826 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/05/09 09:19:25.087830 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/05/09 09:19:25.087842 [INFO] Executing instruction: InstallDependency
2024/05/09 09:19:25.087848 [INFO] checking dependencies file
2024/05/09 09:19:25.087866 [INFO] Installing dependencies with requirements.txt by using Pip
2024/05/09 09:19:25.087884 [INFO] Running command /bin/sh -c /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/05/09 09:19:46.414320 [INFO] Collecting blinker==1.8.1
  Downloading blinker-1.8.1-py3-none-any.whl (9.5 kB)
Collecting click==8.1.7
  Downloading click-8.1.7-py3-none-any.whl (97 kB)
Collecting colorama==0.4.6
  Downloading colorama-0.4.6-py2.py3-none-any.whl (25 kB)
Collecting email_validator==1.1.3
  Downloading email_validator-1.1.3-py2.py3-none-any.whl (18 kB)
Collecting Flask==3.0.3
  Downloading flask-3.0.3-py3-none-any.whl (101 kB)
Collecting Flask-WTF==1.2.1
  Downloading flask_wtf-1.2.1-py3-none-any.whl (12 kB)
Collecting importlib_metadata==7.1.0
  Downloading importlib_metadata-7.1.0-py3-none-any.whl (24 kB)
Collecting itsdangerous==2.2.0
  Downloading itsdangerous-2.2.0-py3-none-any.whl (16 kB)
Collecting Jinja2==3.1.3
  Downloading Jinja2-3.1.3-py3-none-any.whl (133 kB)
Collecting MarkupSafe==2.1.5
  Downloading MarkupSafe-2.1.5-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (25 kB)
Collecting Werkzeug==3.0.2
  Downloading werkzeug-3.0.2-py3-none-any.whl (226 kB)
Collecting WTForms==3.1.2
  Downloading wtforms-3.1.2-py3-none-any.whl (145 kB)
Collecting zipp==3.18.1
  Downloading zipp-3.18.1-py3-none-any.whl (8.2 kB)
Collecting SQLAlchemy==2.0.29
  Downloading SQLAlchemy-2.0.29-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (3.1 MB)
Collecting psycopg2-binary==2.9.9
  Downloading psycopg2_binary-2.9.9-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (3.0 MB)
Collecting boto3==1.34.98
  Downloading boto3-1.34.98-py3-none-any.whl (139 kB)
Collecting dnspython>=1.15.0
  Downloading dnspython-2.6.1-py3-none-any.whl (307 kB)
Collecting idna>=2.0.0
  Downloading idna-3.7-py3-none-any.whl (66 kB)
Collecting greenlet!=0.4.17
  Downloading greenlet-3.0.3-cp39-cp39-manylinux_2_24_x86_64.manylinux_2_28_x86_64.whl (614 kB)
Collecting typing-extensions>=4.6.0
  Downloading typing_extensions-4.11.0-py3-none-any.whl (34 kB)
Collecting jmespath<2.0.0,>=0.7.1
  Downloading jmespath-1.0.1-py3-none-any.whl (20 kB)
Collecting botocore<1.35.0,>=1.34.98
  Downloading botocore-1.34.101-py3-none-any.whl (12.2 MB)
Collecting s3transfer<0.11.0,>=0.10.0
  Downloading s3transfer-0.10.1-py3-none-any.whl (82 kB)
Collecting python-dateutil<3.0.0,>=2.1
  Downloading python_dateutil-2.9.0.post0-py2.py3-none-any.whl (229 kB)
Collecting urllib3<1.27,>=1.25.4
  Downloading urllib3-1.26.18-py2.py3-none-any.whl (143 kB)
Collecting six>=1.5
  Downloading six-1.16.0-py2.py3-none-any.whl (11 kB)
Installing collected packages: six, zipp, urllib3, python-dateutil, MarkupSafe, jmespath, Werkzeug, Jinja2, itsdangerous, importlib-metadata, click, botocore, blinker, WTForms, typing-extensions, s3transfer, idna, greenlet, Flask, dnspython, SQLAlchemy, psycopg2-binary, Flask-WTF, email-validator, colorama, boto3
Successfully installed Flask-3.0.3 Flask-WTF-1.2.1 Jinja2-3.1.3 MarkupSafe-2.1.5 SQLAlchemy-2.0.29 WTForms-3.1.2 Werkzeug-3.0.2 blinker-1.8.1 boto3-1.34.98 botocore-1.34.101 click-8.1.7 colorama-0.4.6 dnspython-2.6.1 email-validator-1.1.3 greenlet-3.0.3 idna-3.7 importlib-metadata-7.1.0 itsdangerous-2.2.0 jmespath-1.0.1 psycopg2-binary-2.9.9 python-dateutil-2.9.0.post0 s3transfer-0.10.1 six-1.16.0 typing-extensions-4.11.0 urllib3-1.26.18 zipp-3.18.1

2024/05/09 09:19:46.414356 [INFO] WARNING: You are using pip version 21.3.1; however, version 24.0 is available.
You should consider upgrading via the '/var/app/venv/staging-LQM1lest/bin/python3.9 -m pip install --upgrade pip' command.

2024/05/09 09:19:46.414364 [INFO] Executing instruction: check Procfile
2024/05/09 09:19:46.414418 [INFO] creating default Procfile...
2024/05/09 09:19:46.414527 [INFO] Executing instruction: configure X-Ray
2024/05/09 09:19:46.414533 [INFO] X-Ray is not enabled.
2024/05/09 09:19:46.414538 [INFO] Executing instruction: configure proxy server
2024/05/09 09:19:46.421522 [INFO] Executing instruction: configure healthd specific proxy conf
2024/05/09 09:19:46.423086 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 09:19:46.438064 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 09:19:46.816691 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 09:19:46.826643 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/05/09 09:19:46.835381 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/05/09 09:19:47.139238 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/05/09 09:19:47.149977 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/05/09 09:19:47.452455 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/05/09 09:19:47.452488 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 09:19:47.464306 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/05/09 09:19:47.473725 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/05/09 09:19:47.563087 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/05/09 09:19:47.564326 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/05/09 09:19:47.565420 [INFO] Executing instruction: configure log streaming
2024/05/09 09:19:47.565430 [INFO] log streaming is not enabled
2024/05/09 09:19:47.565435 [INFO] disable log stream
2024/05/09 09:19:47.565451 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/05/09 09:19:47.603526 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/05/09 09:19:47.651010 [INFO] Executing instruction: GetToggleForceRotate
2024/05/09 09:19:47.651033 [INFO] Checking if logs need forced rotation
2024/05/09 09:19:47.651055 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/09 09:19:48.164438 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/09 09:19:48.683147 [INFO] Generating rsyslog config from Procfile
2024/05/09 09:19:48.684585 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/05/09 09:19:49.173988 [INFO] Executing instruction: PostBuildEbExtension
2024/05/09 09:19:49.174016 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/05/09 09:19:49.174032 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2 --configsets Infra-EmbeddedPostBuild
2024/05/09 09:19:49.627272 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/05/09 09:19:49.627297 [INFO] Executing instruction: CleanEbExtensions
2024/05/09 09:19:49.627320 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/05/09 09:19:49.627323 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/05/09 09:19:49.627343 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/05/09 09:19:49.627417 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/05/09 09:19:49.627422 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/05/09 09:19:49.627430 [INFO] Executing instruction: stop X-Ray
2024/05/09 09:19:49.627433 [INFO] stop X-Ray ...
2024/05/09 09:19:49.627444 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/05/09 09:19:49.651500 [WARN] stopProcess Warning: process xray is not registered 
2024/05/09 09:19:49.651531 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/05/09 09:19:49.682761 [INFO] Executing instruction: stop proxy
2024/05/09 09:19:49.682795 [INFO] Running command /bin/sh -c systemctl show -p PartOf httpd.service
2024/05/09 09:19:49.700684 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/05/09 09:19:49.700716 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 09:19:49.717423 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/05/09 09:19:49.717444 [INFO] Executing instruction: FlipApplication
2024/05/09 09:19:49.717448 [INFO] Fetching environment variables...
2024/05/09 09:19:49.717659 [INFO] Purge old process...
2024/05/09 09:19:49.717674 [INFO] Removing /var/app/current/ if it exists
2024/05/09 09:19:49.717684 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/05/09 09:19:49.717700 [INFO] Register application processes...
2024/05/09 09:19:49.717703 [INFO] Registering the proc: web

2024/05/09 09:19:49.717714 [INFO] Running command /bin/sh -c systemctl show -p PartOf web.service
2024/05/09 09:19:49.732934 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 09:19:50.176235 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 09:19:50.187556 [INFO] Running command /bin/sh -c systemctl is-enabled eb-app.target
2024/05/09 09:19:50.198072 [INFO] Copying file /opt/elasticbeanstalk/config/private/aws-eb.target to /etc/systemd/system/eb-app.target
2024/05/09 09:19:50.199067 [INFO] Running command /bin/sh -c systemctl enable eb-app.target
2024/05/09 09:19:50.605679 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/eb-app.target → /etc/systemd/system/eb-app.target.

2024/05/09 09:19:50.605715 [INFO] Running command /bin/sh -c systemctl start eb-app.target
2024/05/09 09:19:50.622518 [INFO] Running command /bin/sh -c systemctl enable web.service
2024/05/09 09:19:50.923940 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/05/09 09:19:50.923978 [INFO] Running command /bin/sh -c systemctl show -p PartOf web.service
2024/05/09 09:19:50.935769 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 09:19:50.943622 [INFO] Running command /bin/sh -c systemctl start web.service
2024/05/09 09:19:51.008929 [INFO] Executing instruction: start X-Ray
2024/05/09 09:19:51.008952 [INFO] X-Ray is not enabled.
2024/05/09 09:19:51.008958 [INFO] Executing instruction: start proxy with new configuration
2024/05/09 09:19:51.008979 [INFO] Running command /bin/sh -c /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/05/09 09:19:51.053322 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2024/05/09 09:19:51.053407 [INFO] Running command /bin/sh -c cp -rp /var/proxy/staging/nginx/* /etc/nginx
2024/05/09 09:19:51.061152 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 09:19:51.082808 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 09:19:51.520603 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 09:19:51.534545 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 09:19:51.560286 [INFO] Running command /bin/sh -c systemctl is-active nginx.service
2024/05/09 09:19:51.576521 [INFO] Running command /bin/sh -c systemctl start nginx.service
2024/05/09 09:19:51.754924 [INFO] Executing instruction: configureSqsd
2024/05/09 09:19:51.754941 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2024/05/09 09:19:51.754948 [INFO] Executing instruction: startSqsd
2024/05/09 09:19:51.754951 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2024/05/09 09:19:51.754955 [INFO] Executing instruction: Track pids in healthd
2024/05/09 09:19:51.754958 [INFO] This is an enhanced health env...
2024/05/09 09:19:51.754971 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2024/05/09 09:19:51.776585 [INFO] healthd.service nginx.service cfn-hup.service

2024/05/09 09:19:51.776634 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/05/09 09:19:51.792162 [INFO] web.service

2024/05/09 09:19:51.792577 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2024/05/09 09:19:51.792635 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2024/05/09 09:19:51.792652 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2024/05/09 09:19:51.792660 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2024/05/09 09:19:51.792667 [INFO] Executing cleanup logic
2024/05/09 09:19:51.792834 [INFO] Platform Engine finished execution on command: self-startup

2024/05/09 09:20:38.321478 [INFO] Starting...
2024/05/09 09:20:38.321531 [INFO] Starting EBPlatform-PlatformEngine
2024/05/09 09:20:38.321551 [INFO] reading event message file
2024/05/09 09:20:38.321962 [INFO] Engine received EB command cfn-hup-exec

2024/05/09 09:20:38.429205 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/09 09:20:38.903132 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/09 09:20:39.290171 [INFO] checking whether command tail-log is applicable to this instance...
2024/05/09 09:20:39.290183 [INFO] this command is applicable to the instance, thus instance should execute command
2024/05/09 09:20:39.290186 [INFO] Engine command: (tail-log)

2024/05/09 09:20:39.290247 [INFO] Executing instruction: GetTailLogs
2024/05/09 09:20:39.290254 [INFO] Tail Logs...
2024/05/09 09:20:39.290813 [INFO] Running command /bin/sh -c tail -n 100 /var/log/nginx/access.log
2024/05/09 09:20:39.293021 [INFO] Running command /bin/sh -c tail -n 100 /var/log/nginx/error.log
2024/05/09 09:20:39.295097 [INFO] Running command /bin/sh -c tail -n 100 /var/log/web.stdout.log
2024/05/09 09:20:39.296851 [INFO] Running command /bin/sh -c tail -n 100 /var/log/eb-engine.log
2024/05/09 09:20:39.298684 [INFO] Running command /bin/sh -c tail -n 100 /var/log/eb-hooks.log
2024/05/09 09:20:39.370414 [INFO] Executing cleanup logic
2024/05/09 09:20:39.370507 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1715246439370,"severity":"INFO"}]}]}

2024/05/09 09:20:39.370525 [INFO] Platform Engine finished execution on command: tail-log

2024/05/09 09:23:45.072553 [INFO] Starting...
2024/05/09 09:23:45.072607 [INFO] Starting EBPlatform-PlatformEngine
2024/05/09 09:23:45.072629 [INFO] reading event message file
2024/05/09 09:23:45.072787 [INFO] Engine received EB command cfn-hup-exec

2024/05/09 09:23:45.151981 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/09 09:23:45.583739 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/09 09:23:46.031255 [INFO] checking whether command app-deploy is applicable to this instance...
2024/05/09 09:23:46.031267 [INFO] this command is applicable to the instance, thus instance should execute command
2024/05/09 09:23:46.031269 [INFO] Engine command: (app-deploy)

2024/05/09 09:23:46.031273 [INFO] Downloading EB Application...
2024/05/09 09:23:46.031276 [INFO] Region: ap-southeast-2
2024/05/09 09:23:46.031278 [INFO] envID: e-3caxgjpcfu
2024/05/09 09:23:46.031280 [INFO] envBucket: elasticbeanstalk-ap-southeast-2-905418134427
2024/05/09 09:23:46.031283 [INFO] Using manifest file name from command request
2024/05/09 09:23:46.031290 [INFO] Manifest name is : manifest_1715246622913
2024/05/09 09:23:46.031293 [INFO] Download app version manifest
2024/05/09 09:23:46.031453 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/versions/manifest_1715246622913
2024/05/09 09:23:46.069506 [INFO] Download successful106bytes downloaded
2024/05/09 09:23:46.069799 [INFO] Trying to read and parse version manifest...
2024/05/09 09:23:46.072248 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/_versions/new_assignment/app-240509_192110393277
2024/05/09 09:23:46.255244 [INFO] Download successful34503059bytes downloaded
2024/05/09 09:23:46.258973 [INFO] Executing instruction: ElectLeader
2024/05/09 09:23:46.259287 [INFO] Running leader election for instance i-058d20c0b3bfe358b...
2024/05/09 09:23:46.259291 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/05/09 09:23:46.259310 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 54c3b797-0be0-4fdf-b841-8c4f4316136b --listener-id i-058d20c0b3bfe358b --region ap-southeast-2
2024/05/09 09:23:46.795024 [INFO] Instance is Leader.
2024/05/09 09:23:46.795084 [INFO] Executing instruction: stopSqsd
2024/05/09 09:23:46.795089 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/05/09 09:23:46.795093 [INFO] Executing instruction: PreBuildEbExtension
2024/05/09 09:23:46.795106 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/05/09 09:23:46.795229 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2 --configsets Infra-EmbeddedPreBuild
2024/05/09 09:23:47.248485 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/05/09 09:23:47.248509 [INFO] Executing instruction: StageApplication
2024/05/09 09:23:47.306753 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/05/09 09:23:47.306789 [INFO] Running command /bin/sh -c /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/05/09 09:23:49.195069 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/05/09 09:23:49.357764 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/05/09 09:23:49.357792 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/05/09 09:23:49.357811 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/05/09 09:23:49.357813 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/05/09 09:23:49.357818 [INFO] Executing instruction: InstallDependency
2024/05/09 09:23:49.357822 [INFO] checking dependencies file
2024/05/09 09:23:49.357835 [INFO] Installing dependencies with requirements.txt by using Pip
2024/05/09 09:23:49.357847 [INFO] Running command /bin/sh -c /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/05/09 09:23:50.323910 [INFO] Requirement already satisfied: blinker==1.8.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 1)) (1.8.1)
Requirement already satisfied: click==8.1.7 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 2)) (8.1.7)
Requirement already satisfied: colorama==0.4.6 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 3)) (0.4.6)
Requirement already satisfied: email_validator==1.1.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 4)) (1.1.3)
Requirement already satisfied: Flask==3.0.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 5)) (3.0.3)
Requirement already satisfied: Flask-WTF==1.2.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 6)) (1.2.1)
Requirement already satisfied: importlib_metadata==7.1.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 7)) (7.1.0)
Requirement already satisfied: itsdangerous==2.2.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 8)) (2.2.0)
Requirement already satisfied: Jinja2==3.1.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 9)) (3.1.3)
Requirement already satisfied: MarkupSafe==2.1.5 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 10)) (2.1.5)
Requirement already satisfied: Werkzeug==3.0.2 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 11)) (3.0.2)
Requirement already satisfied: WTForms==3.1.2 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 12)) (3.1.2)
Requirement already satisfied: zipp==3.18.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 13)) (3.18.1)
Requirement already satisfied: SQLAlchemy==2.0.29 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 14)) (2.0.29)
Requirement already satisfied: psycopg2-binary==2.9.9 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 15)) (2.9.9)
Requirement already satisfied: boto3==1.34.98 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 16)) (1.34.98)
Requirement already satisfied: idna>=2.0.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from email_validator==1.1.3->-r requirements.txt (line 4)) (3.7)
Requirement already satisfied: dnspython>=1.15.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from email_validator==1.1.3->-r requirements.txt (line 4)) (2.6.1)
Requirement already satisfied: typing-extensions>=4.6.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from SQLAlchemy==2.0.29->-r requirements.txt (line 14)) (4.11.0)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from SQLAlchemy==2.0.29->-r requirements.txt (line 14)) (3.0.3)
Requirement already satisfied: botocore<1.35.0,>=1.34.98 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 16)) (1.34.101)
Requirement already satisfied: s3transfer<0.11.0,>=0.10.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 16)) (0.10.1)
Requirement already satisfied: jmespath<2.0.0,>=0.7.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 16)) (1.0.1)
Requirement already satisfied: urllib3<1.27,>=1.25.4 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 16)) (1.26.18)
Requirement already satisfied: python-dateutil<3.0.0,>=2.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 16)) (2.9.0.post0)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from python-dateutil<3.0.0,>=2.1->botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 16)) (1.16.0)

2024/05/09 09:23:50.323946 [INFO] WARNING: You are using pip version 21.3.1; however, version 24.0 is available.
You should consider upgrading via the '/var/app/venv/staging-LQM1lest/bin/python3.9 -m pip install --upgrade pip' command.

2024/05/09 09:23:50.323954 [INFO] Executing instruction: check Procfile
2024/05/09 09:23:50.324007 [INFO] creating default Procfile...
2024/05/09 09:23:50.324114 [INFO] Executing instruction: configure X-Ray
2024/05/09 09:23:50.324119 [INFO] X-Ray is not enabled.
2024/05/09 09:23:50.324124 [INFO] Executing instruction: configure proxy server
2024/05/09 09:23:50.398658 [INFO] Executing instruction: configure healthd specific proxy conf
2024/05/09 09:23:50.400591 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 09:23:50.426717 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/05/09 09:23:50.426748 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 09:23:50.438351 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/05/09 09:23:50.447055 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 09:23:50.456119 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/05/09 09:23:50.514534 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/05/09 09:23:51.000772 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/05/09 09:23:51.001067 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 09:23:51.428732 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 09:23:51.445700 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 09:23:51.843278 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 09:23:51.852549 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/05/09 09:23:51.860234 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/05/09 09:23:52.262177 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/05/09 09:23:52.272642 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/05/09 09:23:52.732887 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/05/09 09:23:52.732921 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 09:23:52.745631 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/05/09 09:23:52.754363 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/05/09 09:23:52.815599 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/05/09 09:23:52.817815 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/05/09 09:23:52.818575 [INFO] Executing instruction: configure log streaming
2024/05/09 09:23:52.818588 [INFO] log streaming is not enabled
2024/05/09 09:23:52.818592 [INFO] disable log stream
2024/05/09 09:23:52.818607 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/05/09 09:23:52.835482 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/05/09 09:23:52.851265 [INFO] Executing instruction: GetToggleForceRotate
2024/05/09 09:23:52.851288 [INFO] Checking if logs need forced rotation
2024/05/09 09:23:52.851313 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/09 09:23:53.406199 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/09 09:23:53.949842 [INFO] Generating rsyslog config from Procfile
2024/05/09 09:23:53.951847 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/05/09 09:23:54.041724 [INFO] Executing instruction: PostBuildEbExtension
2024/05/09 09:23:54.041747 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/05/09 09:23:54.041769 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2 --configsets Infra-EmbeddedPostBuild
2024/05/09 09:23:54.588624 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/05/09 09:23:54.588687 [INFO] Executing instruction: CleanEbExtensions
2024/05/09 09:23:54.588716 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/05/09 09:23:54.588720 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/05/09 09:23:54.588745 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/05/09 09:23:54.588761 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/05/09 09:23:54.588764 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/05/09 09:23:54.588770 [INFO] Executing instruction: stop X-Ray
2024/05/09 09:23:54.588773 [INFO] stop X-Ray ...
2024/05/09 09:23:54.588787 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/05/09 09:23:54.602746 [WARN] stopProcess Warning: process xray is not registered 
2024/05/09 09:23:54.602776 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/05/09 09:23:54.618546 [INFO] Executing instruction: stop proxy
2024/05/09 09:23:54.618580 [INFO] Running command /bin/sh -c systemctl show -p PartOf httpd.service
2024/05/09 09:23:54.634876 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/05/09 09:23:54.634906 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 09:23:54.649033 [INFO] Running command /bin/sh -c systemctl is-active nginx.service
2024/05/09 09:23:54.660767 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 09:23:54.674119 [INFO] Running command /bin/sh -c systemctl stop nginx.service
2024/05/09 09:23:54.830461 [INFO] Running command /bin/sh -c systemctl disable nginx.service
2024/05/09 09:23:55.275500 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 09:23:55.666114 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 09:23:55.675077 [INFO] Executing instruction: FlipApplication
2024/05/09 09:23:55.675098 [INFO] Fetching environment variables...
2024/05/09 09:23:55.675354 [INFO] Purge old process...
2024/05/09 09:23:55.675376 [INFO] Running command /bin/sh -c systemctl stop eb-app.target
2024/05/09 09:23:55.685028 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/05/09 09:23:55.695783 [INFO] web.service

2024/05/09 09:23:55.695803 [INFO] deregistering process: web
2024/05/09 09:23:55.695814 [INFO] Running command /bin/sh -c systemctl show -p PartOf web.service
2024/05/09 09:23:55.706948 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 09:23:55.714891 [INFO] Running command /bin/sh -c systemctl disable web.service
2024/05/09 09:23:56.005117 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2024/05/09 09:23:56.005206 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 09:23:56.333845 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 09:23:56.342084 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 09:23:56.349744 [INFO] Process web has not been fully terminated
2024/05/09 09:23:56.349766 [INFO] Some processes have not been fully terminated, sleeping 1 seconds now
2024/05/09 09:23:57.349892 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 09:23:57.357552 [INFO] Process web has been fully terminated
2024/05/09 09:23:57.357578 [INFO] All processes have been fully terminated
2024/05/09 09:23:57.357583 [INFO] Removing /var/app/current/ if it exists
2024/05/09 09:23:57.634481 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/05/09 09:23:57.634512 [INFO] Register application processes...
2024/05/09 09:23:57.634516 [INFO] Registering the proc: web

2024/05/09 09:23:57.634527 [INFO] Running command /bin/sh -c systemctl show -p PartOf web.service
2024/05/09 09:23:57.699982 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 09:23:58.038823 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 09:23:58.047339 [INFO] Running command /bin/sh -c systemctl is-enabled eb-app.target
2024/05/09 09:23:58.058444 [INFO] Running command /bin/sh -c systemctl enable eb-app.target
2024/05/09 09:23:58.381294 [INFO] Running command /bin/sh -c systemctl start eb-app.target
2024/05/09 09:23:58.390822 [INFO] Running command /bin/sh -c systemctl enable web.service
2024/05/09 09:23:58.754247 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/05/09 09:23:58.754285 [INFO] Running command /bin/sh -c systemctl show -p PartOf web.service
2024/05/09 09:23:58.783472 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 09:23:58.794241 [INFO] Running command /bin/sh -c systemctl start web.service
2024/05/09 09:23:58.876146 [INFO] Executing instruction: start X-Ray
2024/05/09 09:23:58.876167 [INFO] X-Ray is not enabled.
2024/05/09 09:23:58.876172 [INFO] Executing instruction: start proxy with new configuration
2024/05/09 09:23:58.876196 [INFO] Running command /bin/sh -c /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/05/09 09:23:58.900859 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2024/05/09 09:23:58.901224 [INFO] Running command /bin/sh -c cp -rp /var/proxy/staging/nginx/* /etc/nginx
2024/05/09 09:23:58.905143 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 09:23:58.932797 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 09:23:59.514040 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 09:23:59.529073 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 09:23:59.548414 [INFO] Running command /bin/sh -c systemctl is-active nginx.service
2024/05/09 09:23:59.565811 [INFO] Running command /bin/sh -c systemctl start nginx.service
2024/05/09 09:23:59.744797 [INFO] Executing instruction: configureSqsd
2024/05/09 09:23:59.744818 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2024/05/09 09:23:59.744822 [INFO] Executing instruction: startSqsd
2024/05/09 09:23:59.744826 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2024/05/09 09:23:59.744830 [INFO] Executing instruction: Track pids in healthd
2024/05/09 09:23:59.744834 [INFO] This is an enhanced health env...
2024/05/09 09:23:59.744852 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2024/05/09 09:23:59.763267 [INFO] nginx.service cfn-hup.service healthd.service

2024/05/09 09:23:59.763302 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/05/09 09:23:59.779209 [INFO] web.service

2024/05/09 09:23:59.779776 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2024/05/09 09:23:59.780044 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2024/05/09 09:23:59.780104 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2024/05/09 09:23:59.780109 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2024/05/09 09:23:59.780117 [INFO] Executing cleanup logic
2024/05/09 09:23:59.780383 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment successfully generated a 'Procfile'.","timestamp":1715246630324,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1715246639780,"severity":"INFO"}]}]}

2024/05/09 09:23:59.780734 [INFO] Platform Engine finished execution on command: app-deploy

2024/05/09 09:25:04.698675 [INFO] Starting...
2024/05/09 09:25:04.698721 [INFO] Starting EBPlatform-PlatformEngine
2024/05/09 09:25:04.698743 [INFO] reading event message file
2024/05/09 09:25:04.698908 [INFO] Engine received EB command cfn-hup-exec

2024/05/09 09:25:04.813394 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/09 09:25:05.258000 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/09 09:25:05.636690 [INFO] checking whether command app-deploy is applicable to this instance...
2024/05/09 09:25:05.636705 [INFO] this command is applicable to the instance, thus instance should execute command
2024/05/09 09:25:05.636707 [INFO] Engine command: (app-deploy)

2024/05/09 09:25:05.636711 [INFO] Downloading EB Application...
2024/05/09 09:25:05.636713 [INFO] Region: ap-southeast-2
2024/05/09 09:25:05.636715 [INFO] envID: e-3caxgjpcfu
2024/05/09 09:25:05.636718 [INFO] envBucket: elasticbeanstalk-ap-southeast-2-905418134427
2024/05/09 09:25:05.636720 [INFO] Using manifest file name from command request
2024/05/09 09:25:05.636726 [INFO] Manifest name is : manifest_1715246701964
2024/05/09 09:25:05.636728 [INFO] Download app version manifest
2024/05/09 09:25:05.637331 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/versions/manifest_1715246701964
2024/05/09 09:25:05.690451 [INFO] Download successful106bytes downloaded
2024/05/09 09:25:05.690597 [INFO] Trying to read and parse version manifest...
2024/05/09 09:25:05.693184 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/_versions/new_assignment/app-240509_192419694921
2024/05/09 09:25:05.887557 [INFO] Download successful34503072bytes downloaded
2024/05/09 09:25:05.887778 [INFO] Executing instruction: ElectLeader
2024/05/09 09:25:05.887792 [INFO] Running leader election for instance i-058d20c0b3bfe358b...
2024/05/09 09:25:05.887796 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/05/09 09:25:05.887813 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id b4005b52-7bc9-45b0-b1e1-b796dcddf833 --listener-id i-058d20c0b3bfe358b --region ap-southeast-2
2024/05/09 09:25:06.295295 [INFO] Instance is Leader.
2024/05/09 09:25:06.295352 [INFO] Executing instruction: stopSqsd
2024/05/09 09:25:06.295357 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/05/09 09:25:06.295361 [INFO] Executing instruction: PreBuildEbExtension
2024/05/09 09:25:06.295364 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/05/09 09:25:06.295382 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2 --configsets Infra-EmbeddedPreBuild
2024/05/09 09:25:06.858649 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/05/09 09:25:06.858703 [INFO] Executing instruction: StageApplication
2024/05/09 09:25:06.930705 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/05/09 09:25:06.930753 [INFO] Running command /bin/sh -c /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/05/09 09:25:08.671654 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/05/09 09:25:08.796133 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/05/09 09:25:08.796166 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/05/09 09:25:08.796186 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/05/09 09:25:08.796188 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/05/09 09:25:08.796193 [INFO] Executing instruction: InstallDependency
2024/05/09 09:25:08.796198 [INFO] checking dependencies file
2024/05/09 09:25:08.796210 [INFO] Installing dependencies with requirements.txt by using Pip
2024/05/09 09:25:08.796222 [INFO] Running command /bin/sh -c /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/05/09 09:25:09.597194 [INFO] Requirement already satisfied: blinker==1.8.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 1)) (1.8.1)
Requirement already satisfied: click==8.1.7 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 2)) (8.1.7)
Requirement already satisfied: colorama==0.4.6 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 3)) (0.4.6)
Requirement already satisfied: email_validator==1.1.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 4)) (1.1.3)
Requirement already satisfied: Flask==3.0.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 5)) (3.0.3)
Requirement already satisfied: Flask-WTF==1.2.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 6)) (1.2.1)
Requirement already satisfied: importlib_metadata==7.1.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 7)) (7.1.0)
Requirement already satisfied: itsdangerous==2.2.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 8)) (2.2.0)
Requirement already satisfied: Jinja2==3.1.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 9)) (3.1.3)
Requirement already satisfied: MarkupSafe==2.1.5 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 10)) (2.1.5)
Requirement already satisfied: Werkzeug==3.0.2 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 11)) (3.0.2)
Requirement already satisfied: WTForms==3.1.2 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 12)) (3.1.2)
Requirement already satisfied: zipp==3.18.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 13)) (3.18.1)
Requirement already satisfied: SQLAlchemy==2.0.29 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 14)) (2.0.29)
Requirement already satisfied: psycopg2-binary==2.9.9 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 15)) (2.9.9)
Requirement already satisfied: boto3==1.34.98 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 16)) (1.34.98)
Requirement already satisfied: idna>=2.0.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from email_validator==1.1.3->-r requirements.txt (line 4)) (3.7)
Requirement already satisfied: dnspython>=1.15.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from email_validator==1.1.3->-r requirements.txt (line 4)) (2.6.1)
Requirement already satisfied: typing-extensions>=4.6.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from SQLAlchemy==2.0.29->-r requirements.txt (line 14)) (4.11.0)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from SQLAlchemy==2.0.29->-r requirements.txt (line 14)) (3.0.3)
Requirement already satisfied: s3transfer<0.11.0,>=0.10.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 16)) (0.10.1)
Requirement already satisfied: botocore<1.35.0,>=1.34.98 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 16)) (1.34.101)
Requirement already satisfied: jmespath<2.0.0,>=0.7.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 16)) (1.0.1)
Requirement already satisfied: urllib3<1.27,>=1.25.4 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 16)) (1.26.18)
Requirement already satisfied: python-dateutil<3.0.0,>=2.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 16)) (2.9.0.post0)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from python-dateutil<3.0.0,>=2.1->botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 16)) (1.16.0)

2024/05/09 09:25:09.597236 [INFO] WARNING: You are using pip version 21.3.1; however, version 24.0 is available.
You should consider upgrading via the '/var/app/venv/staging-LQM1lest/bin/python3.9 -m pip install --upgrade pip' command.

2024/05/09 09:25:09.597244 [INFO] Executing instruction: check Procfile
2024/05/09 09:25:09.597298 [INFO] creating default Procfile...
2024/05/09 09:25:09.597463 [INFO] Executing instruction: configure X-Ray
2024/05/09 09:25:09.597468 [INFO] X-Ray is not enabled.
2024/05/09 09:25:09.597475 [INFO] Executing instruction: configure proxy server
2024/05/09 09:25:09.673705 [INFO] Executing instruction: configure healthd specific proxy conf
2024/05/09 09:25:09.675629 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 09:25:09.689438 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/05/09 09:25:09.689475 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 09:25:09.700178 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/05/09 09:25:09.709348 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 09:25:09.719278 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/05/09 09:25:09.784012 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/05/09 09:25:10.089484 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/05/09 09:25:10.089706 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 09:25:10.444959 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 09:25:10.457146 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 09:25:10.826994 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 09:25:10.836771 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/05/09 09:25:10.846751 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/05/09 09:25:11.207001 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/05/09 09:25:11.216944 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/05/09 09:25:11.516196 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/05/09 09:25:11.516230 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 09:25:11.528880 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/05/09 09:25:11.536936 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/05/09 09:25:11.597884 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/05/09 09:25:11.598770 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/05/09 09:25:11.599755 [INFO] Executing instruction: configure log streaming
2024/05/09 09:25:11.599765 [INFO] log streaming is not enabled
2024/05/09 09:25:11.599768 [INFO] disable log stream
2024/05/09 09:25:11.599786 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/05/09 09:25:11.620372 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/05/09 09:25:11.648628 [INFO] Executing instruction: GetToggleForceRotate
2024/05/09 09:25:11.648652 [INFO] Checking if logs need forced rotation
2024/05/09 09:25:11.648678 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/09 09:25:12.231614 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/09 09:25:12.679362 [INFO] Generating rsyslog config from Procfile
2024/05/09 09:25:12.681781 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/05/09 09:25:12.796541 [INFO] Executing instruction: PostBuildEbExtension
2024/05/09 09:25:12.796577 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/05/09 09:25:12.796592 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2 --configsets Infra-EmbeddedPostBuild
2024/05/09 09:25:13.168268 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/05/09 09:25:13.168321 [INFO] Executing instruction: CleanEbExtensions
2024/05/09 09:25:13.168347 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/05/09 09:25:13.168356 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/05/09 09:25:13.168379 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/05/09 09:25:13.168394 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/05/09 09:25:13.168398 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/05/09 09:25:13.168403 [INFO] Executing instruction: stop X-Ray
2024/05/09 09:25:13.168406 [INFO] stop X-Ray ...
2024/05/09 09:25:13.168420 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/05/09 09:25:13.183793 [WARN] stopProcess Warning: process xray is not registered 
2024/05/09 09:25:13.183826 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/05/09 09:25:13.199700 [INFO] Executing instruction: stop proxy
2024/05/09 09:25:13.199732 [INFO] Running command /bin/sh -c systemctl show -p PartOf httpd.service
2024/05/09 09:25:13.215168 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/05/09 09:25:13.215201 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 09:25:13.228495 [INFO] Running command /bin/sh -c systemctl is-active nginx.service
2024/05/09 09:25:13.236192 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 09:25:13.246729 [INFO] Running command /bin/sh -c systemctl stop nginx.service
2024/05/09 09:25:13.392713 [INFO] Running command /bin/sh -c systemctl disable nginx.service
2024/05/09 09:25:13.728538 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 09:25:14.050490 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 09:25:14.060390 [INFO] Executing instruction: FlipApplication
2024/05/09 09:25:14.060413 [INFO] Fetching environment variables...
2024/05/09 09:25:14.060573 [INFO] Purge old process...
2024/05/09 09:25:14.060594 [INFO] Running command /bin/sh -c systemctl stop eb-app.target
2024/05/09 09:25:14.072147 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/05/09 09:25:14.084861 [INFO] web.service

2024/05/09 09:25:14.084884 [INFO] deregistering process: web
2024/05/09 09:25:14.084899 [INFO] Running command /bin/sh -c systemctl show -p PartOf web.service
2024/05/09 09:25:14.095556 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 09:25:14.103917 [INFO] Running command /bin/sh -c systemctl disable web.service
2024/05/09 09:25:14.619428 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2024/05/09 09:25:14.619516 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 09:25:14.993725 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 09:25:15.007546 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 09:25:15.017555 [INFO] Process web has been fully terminated
2024/05/09 09:25:15.017579 [INFO] All processes have been fully terminated
2024/05/09 09:25:15.017583 [INFO] Removing /var/app/current/ if it exists
2024/05/09 09:25:15.359267 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/05/09 09:25:15.359297 [INFO] Register application processes...
2024/05/09 09:25:15.359301 [INFO] Registering the proc: web

2024/05/09 09:25:15.359314 [INFO] Running command /bin/sh -c systemctl show -p PartOf web.service
2024/05/09 09:25:15.471345 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 09:25:15.830894 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 09:25:15.840638 [INFO] Running command /bin/sh -c systemctl is-enabled eb-app.target
2024/05/09 09:25:15.849179 [INFO] Running command /bin/sh -c systemctl enable eb-app.target
2024/05/09 09:25:16.158178 [INFO] Running command /bin/sh -c systemctl start eb-app.target
2024/05/09 09:25:16.197781 [INFO] Running command /bin/sh -c systemctl enable web.service
2024/05/09 09:25:16.548992 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/05/09 09:25:16.549040 [INFO] Running command /bin/sh -c systemctl show -p PartOf web.service
2024/05/09 09:25:16.561966 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 09:25:16.570702 [INFO] Running command /bin/sh -c systemctl start web.service
2024/05/09 09:25:16.640281 [INFO] Executing instruction: start X-Ray
2024/05/09 09:25:16.640302 [INFO] X-Ray is not enabled.
2024/05/09 09:25:16.640307 [INFO] Executing instruction: start proxy with new configuration
2024/05/09 09:25:16.640329 [INFO] Running command /bin/sh -c /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/05/09 09:25:16.664835 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2024/05/09 09:25:16.665152 [INFO] Running command /bin/sh -c cp -rp /var/proxy/staging/nginx/* /etc/nginx
2024/05/09 09:25:16.669456 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 09:25:16.692951 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 09:25:17.196541 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 09:25:17.211215 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 09:25:17.234684 [INFO] Running command /bin/sh -c systemctl is-active nginx.service
2024/05/09 09:25:17.249568 [INFO] Running command /bin/sh -c systemctl start nginx.service
2024/05/09 09:25:17.464082 [INFO] Executing instruction: configureSqsd
2024/05/09 09:25:17.464169 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2024/05/09 09:25:17.464176 [INFO] Executing instruction: startSqsd
2024/05/09 09:25:17.464179 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2024/05/09 09:25:17.464183 [INFO] Executing instruction: Track pids in healthd
2024/05/09 09:25:17.464186 [INFO] This is an enhanced health env...
2024/05/09 09:25:17.464200 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2024/05/09 09:25:17.483908 [INFO] cfn-hup.service healthd.service nginx.service

2024/05/09 09:25:17.483945 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/05/09 09:25:17.508673 [INFO] web.service

2024/05/09 09:25:17.509243 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2024/05/09 09:25:17.509380 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2024/05/09 09:25:17.509403 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2024/05/09 09:25:17.509408 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2024/05/09 09:25:17.509415 [INFO] Executing cleanup logic
2024/05/09 09:25:17.509672 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment successfully generated a 'Procfile'.","timestamp":1715246709597,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1715246717509,"severity":"INFO"}]}]}

2024/05/09 09:25:17.509941 [INFO] Platform Engine finished execution on command: app-deploy

2024/05/09 09:26:47.086652 [INFO] Starting...
2024/05/09 09:26:47.086704 [INFO] Starting EBPlatform-PlatformEngine
2024/05/09 09:26:47.086727 [INFO] reading event message file
2024/05/09 09:26:47.086888 [INFO] Engine received EB command cfn-hup-exec

2024/05/09 09:26:47.163072 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/09 09:26:47.490265 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/09 09:26:47.894607 [INFO] checking whether command tail-log is applicable to this instance...
2024/05/09 09:26:47.894618 [INFO] this command is applicable to the instance, thus instance should execute command
2024/05/09 09:26:47.894622 [INFO] Engine command: (tail-log)

2024/05/09 09:26:47.894672 [INFO] Executing instruction: GetTailLogs
2024/05/09 09:26:47.894676 [INFO] Tail Logs...
2024/05/09 09:26:47.897442 [INFO] Running command /bin/sh -c tail -n 100 /var/log/web.stdout.log
2024/05/09 09:26:47.901711 [INFO] Running command /bin/sh -c tail -n 100 /var/log/eb-engine.log
2024/05/09 09:26:47.904129 [INFO] Running command /bin/sh -c tail -n 100 /var/log/eb-hooks.log
2024/05/09 09:26:47.906791 [INFO] Running command /bin/sh -c tail -n 100 /var/log/nginx/access.log
2024/05/09 09:26:47.910155 [INFO] Running command /bin/sh -c tail -n 100 /var/log/nginx/error.log
2024/05/09 09:26:47.968407 [INFO] Executing cleanup logic
2024/05/09 09:26:47.968529 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1715246807968,"severity":"INFO"}]}]}

2024/05/09 09:26:47.968559 [INFO] Platform Engine finished execution on command: tail-log

2024/05/09 09:32:32.431312 [INFO] Starting...
2024/05/09 09:32:32.431366 [INFO] Starting EBPlatform-PlatformEngine
2024/05/09 09:32:32.431387 [INFO] reading event message file
2024/05/09 09:32:32.431547 [INFO] Engine received EB command cfn-hup-exec

2024/05/09 09:32:32.506650 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/09 09:32:32.932645 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/09 09:32:33.288127 [INFO] checking whether command app-deploy is applicable to this instance...
2024/05/09 09:32:33.288143 [INFO] this command is applicable to the instance, thus instance should execute command
2024/05/09 09:32:33.288147 [INFO] Engine command: (app-deploy)

2024/05/09 09:32:33.288153 [INFO] Downloading EB Application...
2024/05/09 09:32:33.288155 [INFO] Region: ap-southeast-2
2024/05/09 09:32:33.288157 [INFO] envID: e-3caxgjpcfu
2024/05/09 09:32:33.288159 [INFO] envBucket: elasticbeanstalk-ap-southeast-2-905418134427
2024/05/09 09:32:33.288162 [INFO] Using manifest file name from command request
2024/05/09 09:32:33.288167 [INFO] Manifest name is : manifest_1715247130416
2024/05/09 09:32:33.288169 [INFO] Download app version manifest
2024/05/09 09:32:33.288355 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/versions/manifest_1715247130416
2024/05/09 09:32:33.328433 [INFO] Download successful106bytes downloaded
2024/05/09 09:32:33.328583 [INFO] Trying to read and parse version manifest...
2024/05/09 09:32:33.332041 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/_versions/new_assignment/app-240509_193125651696
2024/05/09 09:32:33.476892 [INFO] Download successful34503485bytes downloaded
2024/05/09 09:32:33.477198 [INFO] Executing instruction: ElectLeader
2024/05/09 09:32:33.477206 [INFO] Running leader election for instance i-058d20c0b3bfe358b...
2024/05/09 09:32:33.477210 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/05/09 09:32:33.477226 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 95217150-a844-4b41-a0ae-c63a31edb749 --listener-id i-058d20c0b3bfe358b --region ap-southeast-2
2024/05/09 09:32:34.003567 [INFO] Instance is Leader.
2024/05/09 09:32:34.003746 [INFO] Executing instruction: stopSqsd
2024/05/09 09:32:34.003963 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/05/09 09:32:34.003970 [INFO] Executing instruction: PreBuildEbExtension
2024/05/09 09:32:34.004453 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/05/09 09:32:34.004504 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2 --configsets Infra-EmbeddedPreBuild
2024/05/09 09:32:34.507396 [INFO] Error occurred during build: Command start_gunicorn failed

2024/05/09 09:32:34.507419 [ERROR] An error occurred during execution of command [app-deploy] - [PreBuildEbExtension]. Stop running the command. Error: EbExtension build failed. Please refer to /var/log/cfn-init.log for more details. 

2024/05/09 09:32:34.507422 [INFO] Executing cleanup logic
2024/05/09 09:32:34.507557 [INFO] CommandService Response: {"status":"FAILURE","api_version":"1.0","results":[{"status":"FAILURE","msg":"Engine execution has encountered an error.","returncode":1,"events":[{"msg":"Instance deployment failed. For details, see 'eb-engine.log'.","timestamp":1715247154507,"severity":"ERROR"}]}]}

2024/05/09 09:32:34.507772 [INFO] Platform Engine finished execution on command: app-deploy

2024/05/09 09:34:11.215546 [INFO] Starting...
2024/05/09 09:34:11.215661 [INFO] Starting EBPlatform-PlatformEngine
2024/05/09 09:34:11.215685 [INFO] reading event message file
2024/05/09 09:34:11.215936 [INFO] Engine received EB command cfn-hup-exec

2024/05/09 09:34:11.313039 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/09 09:34:11.821222 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/09 09:34:12.346121 [INFO] checking whether command app-deploy is applicable to this instance...
2024/05/09 09:34:12.346133 [INFO] this command is applicable to the instance, thus instance should execute command
2024/05/09 09:34:12.346136 [INFO] Engine command: (app-deploy)

2024/05/09 09:34:12.346140 [INFO] Downloading EB Application...
2024/05/09 09:34:12.346142 [INFO] Region: ap-southeast-2
2024/05/09 09:34:12.346144 [INFO] envID: e-3caxgjpcfu
2024/05/09 09:34:12.346147 [INFO] envBucket: elasticbeanstalk-ap-southeast-2-905418134427
2024/05/09 09:34:12.346149 [INFO] Using manifest file name from command request
2024/05/09 09:34:12.346156 [INFO] Manifest name is : manifest_1715247229336
2024/05/09 09:34:12.346159 [INFO] Download app version manifest
2024/05/09 09:34:12.346320 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/versions/manifest_1715247229336
2024/05/09 09:34:12.390084 [INFO] Download successful106bytes downloaded
2024/05/09 09:34:12.390297 [INFO] Trying to read and parse version manifest...
2024/05/09 09:34:12.393524 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/_versions/new_assignment/app-240509_193305637101
2024/05/09 09:34:12.585063 [INFO] Download successful34503485bytes downloaded
2024/05/09 09:34:12.585299 [INFO] Executing instruction: ElectLeader
2024/05/09 09:34:12.585305 [INFO] Running leader election for instance i-058d20c0b3bfe358b...
2024/05/09 09:34:12.585311 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/05/09 09:34:12.585330 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 5d98944b-aa94-4d28-9e30-fd7baecaee36 --listener-id i-058d20c0b3bfe358b --region ap-southeast-2
2024/05/09 09:34:13.027250 [INFO] Instance is Leader.
2024/05/09 09:34:13.027308 [INFO] Executing instruction: stopSqsd
2024/05/09 09:34:13.027316 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/05/09 09:34:13.027319 [INFO] Executing instruction: PreBuildEbExtension
2024/05/09 09:34:13.027322 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/05/09 09:34:13.027334 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2 --configsets Infra-EmbeddedPreBuild
2024/05/09 09:34:13.664363 [INFO] Error occurred during build: Command start_gunicorn failed

2024/05/09 09:34:13.664392 [ERROR] An error occurred during execution of command [app-deploy] - [PreBuildEbExtension]. Stop running the command. Error: EbExtension build failed. Please refer to /var/log/cfn-init.log for more details. 

2024/05/09 09:34:13.664397 [INFO] Executing cleanup logic
2024/05/09 09:34:13.664512 [INFO] CommandService Response: {"status":"FAILURE","api_version":"1.0","results":[{"status":"FAILURE","msg":"Engine execution has encountered an error.","returncode":1,"events":[{"msg":"Instance deployment failed. For details, see 'eb-engine.log'.","timestamp":1715247253664,"severity":"ERROR"}]}]}

2024/05/09 09:34:13.665627 [INFO] Platform Engine finished execution on command: app-deploy

2024/05/09 09:35:12.663220 [INFO] Starting...
2024/05/09 09:35:12.663272 [INFO] Starting EBPlatform-PlatformEngine
2024/05/09 09:35:12.663295 [INFO] reading event message file
2024/05/09 09:35:12.663453 [INFO] Engine received EB command cfn-hup-exec

2024/05/09 09:35:12.754643 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/09 09:35:13.204650 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/09 09:35:13.645887 [INFO] checking whether command bundle-log is applicable to this instance...
2024/05/09 09:35:13.645898 [INFO] this command is applicable to the instance, thus instance should execute command
2024/05/09 09:35:13.645901 [INFO] Engine command: (bundle-log)

2024/05/09 09:35:13.645953 [INFO] Executing instruction: GetBundleLogs
2024/05/09 09:35:13.645957 [INFO] Bundle Logs...
2024/05/09 09:35:13.785502 [INFO] Executing cleanup logic
2024/05/09 09:35:13.785630 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1715247313785,"severity":"INFO"}]}]}

2024/05/09 09:35:13.785740 [INFO] Platform Engine finished execution on command: bundle-log

2024/05/09 09:35:48.241538 [INFO] Starting...
2024/05/09 09:35:48.241591 [INFO] Starting EBPlatform-PlatformEngine
2024/05/09 09:35:48.241613 [INFO] reading event message file
2024/05/09 09:35:48.241865 [INFO] Engine received EB command cfn-hup-exec

2024/05/09 09:35:48.316526 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/09 09:35:48.657460 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/09 09:35:48.978587 [INFO] checking whether command app-deploy is applicable to this instance...
2024/05/09 09:35:48.978605 [INFO] this command is applicable to the instance, thus instance should execute command
2024/05/09 09:35:48.978608 [INFO] Engine command: (app-deploy)

2024/05/09 09:35:48.978613 [INFO] Downloading EB Application...
2024/05/09 09:35:48.978616 [INFO] Region: ap-southeast-2
2024/05/09 09:35:48.978619 [INFO] envID: e-3caxgjpcfu
2024/05/09 09:35:48.978622 [INFO] envBucket: elasticbeanstalk-ap-southeast-2-905418134427
2024/05/09 09:35:48.978625 [INFO] Using manifest file name from command request
2024/05/09 09:35:48.978631 [INFO] Manifest name is : manifest_1715247345481
2024/05/09 09:35:48.978633 [INFO] Download app version manifest
2024/05/09 09:35:48.978802 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/versions/manifest_1715247345481
2024/05/09 09:35:49.015567 [INFO] Download successful107bytes downloaded
2024/05/09 09:35:49.015727 [INFO] Trying to read and parse version manifest...
2024/05/09 09:35:49.018869 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/_versions/new_assignment/app-240509_193500941142
2024/05/09 09:35:49.811445 [INFO] Download successful34503072bytes downloaded
2024/05/09 09:35:49.811996 [INFO] Executing instruction: ElectLeader
2024/05/09 09:35:49.812005 [INFO] Running leader election for instance i-058d20c0b3bfe358b...
2024/05/09 09:35:49.812009 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/05/09 09:35:49.812028 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id d1cdf9de-09a5-46d7-848c-b06ecd3080ef --listener-id i-058d20c0b3bfe358b --region ap-southeast-2
2024/05/09 09:35:50.178923 [INFO] Instance is Leader.
2024/05/09 09:35:50.178981 [INFO] Executing instruction: stopSqsd
2024/05/09 09:35:50.178987 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/05/09 09:35:50.178991 [INFO] Executing instruction: PreBuildEbExtension
2024/05/09 09:35:50.178994 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/05/09 09:35:50.179007 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2 --configsets Infra-EmbeddedPreBuild
2024/05/09 09:35:50.589179 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/05/09 09:35:50.589200 [INFO] Executing instruction: StageApplication
2024/05/09 09:35:50.683020 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/05/09 09:35:50.683056 [INFO] Running command /bin/sh -c /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/05/09 09:35:52.468870 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/05/09 09:35:52.606403 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/05/09 09:35:52.606435 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/05/09 09:35:52.606453 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/05/09 09:35:52.606456 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/05/09 09:35:52.606461 [INFO] Executing instruction: InstallDependency
2024/05/09 09:35:52.606466 [INFO] checking dependencies file
2024/05/09 09:35:52.606485 [INFO] Installing dependencies with requirements.txt by using Pip
2024/05/09 09:35:52.606498 [INFO] Running command /bin/sh -c /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/05/09 09:35:53.472845 [INFO] Requirement already satisfied: blinker==1.8.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 1)) (1.8.1)
Requirement already satisfied: click==8.1.7 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 2)) (8.1.7)
Requirement already satisfied: colorama==0.4.6 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 3)) (0.4.6)
Requirement already satisfied: email_validator==1.1.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 4)) (1.1.3)
Requirement already satisfied: Flask==3.0.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 5)) (3.0.3)
Requirement already satisfied: Flask-WTF==1.2.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 6)) (1.2.1)
Requirement already satisfied: importlib_metadata==7.1.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 7)) (7.1.0)
Requirement already satisfied: itsdangerous==2.2.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 8)) (2.2.0)
Requirement already satisfied: Jinja2==3.1.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 9)) (3.1.3)
Requirement already satisfied: MarkupSafe==2.1.5 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 10)) (2.1.5)
Requirement already satisfied: Werkzeug==3.0.2 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 11)) (3.0.2)
Requirement already satisfied: WTForms==3.1.2 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 12)) (3.1.2)
Requirement already satisfied: zipp==3.18.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 13)) (3.18.1)
Requirement already satisfied: SQLAlchemy==2.0.29 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 14)) (2.0.29)
Requirement already satisfied: psycopg2-binary==2.9.9 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 15)) (2.9.9)
Requirement already satisfied: boto3==1.34.98 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 16)) (1.34.98)
Requirement already satisfied: idna>=2.0.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from email_validator==1.1.3->-r requirements.txt (line 4)) (3.7)
Requirement already satisfied: dnspython>=1.15.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from email_validator==1.1.3->-r requirements.txt (line 4)) (2.6.1)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from SQLAlchemy==2.0.29->-r requirements.txt (line 14)) (3.0.3)
Requirement already satisfied: typing-extensions>=4.6.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from SQLAlchemy==2.0.29->-r requirements.txt (line 14)) (4.11.0)
Requirement already satisfied: jmespath<2.0.0,>=0.7.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 16)) (1.0.1)
Requirement already satisfied: botocore<1.35.0,>=1.34.98 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 16)) (1.34.101)
Requirement already satisfied: s3transfer<0.11.0,>=0.10.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 16)) (0.10.1)
Requirement already satisfied: urllib3<1.27,>=1.25.4 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 16)) (1.26.18)
Requirement already satisfied: python-dateutil<3.0.0,>=2.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 16)) (2.9.0.post0)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from python-dateutil<3.0.0,>=2.1->botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 16)) (1.16.0)

2024/05/09 09:35:53.472943 [INFO] WARNING: You are using pip version 21.3.1; however, version 24.0 is available.
You should consider upgrading via the '/var/app/venv/staging-LQM1lest/bin/python3.9 -m pip install --upgrade pip' command.

2024/05/09 09:35:53.472952 [INFO] Executing instruction: check Procfile
2024/05/09 09:35:53.473133 [INFO] creating default Procfile...
2024/05/09 09:35:53.473606 [INFO] Executing instruction: configure X-Ray
2024/05/09 09:35:53.473614 [INFO] X-Ray is not enabled.
2024/05/09 09:35:53.473620 [INFO] Executing instruction: configure proxy server
2024/05/09 09:35:53.549482 [INFO] Executing instruction: configure healthd specific proxy conf
2024/05/09 09:35:53.550988 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 09:35:53.618274 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/05/09 09:35:53.618329 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 09:35:53.634687 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/05/09 09:35:53.649372 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 09:35:53.663038 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/05/09 09:35:53.715242 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/05/09 09:35:54.164778 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/05/09 09:35:54.167013 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 09:35:54.548390 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 09:35:54.561805 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 09:35:54.938866 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 09:35:54.947848 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/05/09 09:35:54.955669 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/05/09 09:35:55.295657 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/05/09 09:35:55.304667 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/05/09 09:35:55.655445 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/05/09 09:35:55.655484 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 09:35:55.678596 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/05/09 09:35:55.687034 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/05/09 09:35:55.796199 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/05/09 09:35:55.797092 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/05/09 09:35:55.797934 [INFO] Executing instruction: configure log streaming
2024/05/09 09:35:55.797942 [INFO] log streaming is not enabled
2024/05/09 09:35:55.797945 [INFO] disable log stream
2024/05/09 09:35:55.797956 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/05/09 09:35:55.815851 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/05/09 09:35:55.834445 [INFO] Executing instruction: GetToggleForceRotate
2024/05/09 09:35:55.834469 [INFO] Checking if logs need forced rotation
2024/05/09 09:35:55.834588 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/09 09:35:56.363466 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/09 09:35:56.813629 [INFO] Generating rsyslog config from Procfile
2024/05/09 09:35:56.814999 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/05/09 09:35:56.878098 [INFO] Executing instruction: PostBuildEbExtension
2024/05/09 09:35:56.878124 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/05/09 09:35:56.878144 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2 --configsets Infra-EmbeddedPostBuild
2024/05/09 09:35:57.259692 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/05/09 09:35:57.259727 [INFO] Executing instruction: CleanEbExtensions
2024/05/09 09:35:57.259758 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/05/09 09:35:57.259762 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/05/09 09:35:57.259787 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/05/09 09:35:57.259803 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/05/09 09:35:57.259806 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/05/09 09:35:57.259812 [INFO] Executing instruction: stop X-Ray
2024/05/09 09:35:57.259815 [INFO] stop X-Ray ...
2024/05/09 09:35:57.259828 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/05/09 09:35:57.277111 [WARN] stopProcess Warning: process xray is not registered 
2024/05/09 09:35:57.277142 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/05/09 09:35:57.300132 [INFO] Executing instruction: stop proxy
2024/05/09 09:35:57.300249 [INFO] Running command /bin/sh -c systemctl show -p PartOf httpd.service
2024/05/09 09:35:57.318714 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/05/09 09:35:57.318747 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 09:35:57.333233 [INFO] Running command /bin/sh -c systemctl is-active nginx.service
2024/05/09 09:35:57.343403 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 09:35:57.354009 [INFO] Running command /bin/sh -c systemctl stop nginx.service
2024/05/09 09:35:57.525649 [INFO] Running command /bin/sh -c systemctl disable nginx.service
2024/05/09 09:35:57.941072 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 09:35:58.270123 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 09:35:58.291528 [INFO] Executing instruction: FlipApplication
2024/05/09 09:35:58.291553 [INFO] Fetching environment variables...
2024/05/09 09:35:58.293097 [INFO] Purge old process...
2024/05/09 09:35:58.293136 [INFO] Running command /bin/sh -c systemctl stop eb-app.target
2024/05/09 09:35:58.307219 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/05/09 09:35:58.319805 [INFO] web.service

2024/05/09 09:35:58.319829 [INFO] deregistering process: web
2024/05/09 09:35:58.319844 [INFO] Running command /bin/sh -c systemctl show -p PartOf web.service
2024/05/09 09:35:58.332226 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 09:35:58.341763 [INFO] Running command /bin/sh -c systemctl disable web.service
2024/05/09 09:35:58.707986 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2024/05/09 09:35:58.708073 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 09:35:59.024657 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 09:35:59.036431 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 09:35:59.048624 [INFO] Process web has not been fully terminated
2024/05/09 09:35:59.048645 [INFO] Some processes have not been fully terminated, sleeping 1 seconds now
2024/05/09 09:36:00.049509 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 09:36:00.063470 [INFO] Process web has been fully terminated
2024/05/09 09:36:00.063496 [INFO] All processes have been fully terminated
2024/05/09 09:36:00.063500 [INFO] Removing /var/app/current/ if it exists
2024/05/09 09:36:00.444903 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/05/09 09:36:00.444941 [INFO] Register application processes...
2024/05/09 09:36:00.444948 [INFO] Registering the proc: web

2024/05/09 09:36:00.444977 [INFO] Running command /bin/sh -c systemctl show -p PartOf web.service
2024/05/09 09:36:00.514769 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 09:36:00.779351 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 09:36:00.788133 [INFO] Running command /bin/sh -c systemctl is-enabled eb-app.target
2024/05/09 09:36:00.798173 [INFO] Running command /bin/sh -c systemctl enable eb-app.target
2024/05/09 09:36:01.074641 [INFO] Running command /bin/sh -c systemctl start eb-app.target
2024/05/09 09:36:01.087231 [INFO] Running command /bin/sh -c systemctl enable web.service
2024/05/09 09:36:01.771615 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/05/09 09:36:01.773967 [INFO] Running command /bin/sh -c systemctl show -p PartOf web.service
2024/05/09 09:36:01.820926 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 09:36:01.848326 [INFO] Running command /bin/sh -c systemctl start web.service
2024/05/09 09:36:01.946826 [INFO] Executing instruction: start X-Ray
2024/05/09 09:36:01.946852 [INFO] X-Ray is not enabled.
2024/05/09 09:36:01.946858 [INFO] Executing instruction: start proxy with new configuration
2024/05/09 09:36:01.946884 [INFO] Running command /bin/sh -c /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/05/09 09:36:02.062368 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2024/05/09 09:36:02.062702 [INFO] Running command /bin/sh -c cp -rp /var/proxy/staging/nginx/* /etc/nginx
2024/05/09 09:36:02.083259 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 09:36:02.174943 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 09:36:02.850695 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 09:36:02.868532 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 09:36:02.893685 [INFO] Running command /bin/sh -c systemctl is-active nginx.service
2024/05/09 09:36:02.915661 [INFO] Running command /bin/sh -c systemctl start nginx.service
2024/05/09 09:36:03.108399 [INFO] Executing instruction: configureSqsd
2024/05/09 09:36:03.108424 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2024/05/09 09:36:03.108429 [INFO] Executing instruction: startSqsd
2024/05/09 09:36:03.108432 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2024/05/09 09:36:03.108436 [INFO] Executing instruction: Track pids in healthd
2024/05/09 09:36:03.108440 [INFO] This is an enhanced health env...
2024/05/09 09:36:03.108497 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2024/05/09 09:36:03.125672 [INFO] cfn-hup.service nginx.service healthd.service

2024/05/09 09:36:03.125707 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/05/09 09:36:03.142825 [INFO] web.service

2024/05/09 09:36:03.143404 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2024/05/09 09:36:03.143463 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2024/05/09 09:36:03.143482 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2024/05/09 09:36:03.143486 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2024/05/09 09:36:03.143492 [INFO] Executing cleanup logic
2024/05/09 09:36:03.143760 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment successfully generated a 'Procfile'.","timestamp":1715247353473,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1715247363143,"severity":"INFO"}]}]}

2024/05/09 09:36:03.143938 [INFO] Platform Engine finished execution on command: app-deploy

2024/05/09 09:42:52.964632 [INFO] Starting...
2024/05/09 09:42:52.964689 [INFO] Starting EBPlatform-PlatformEngine
2024/05/09 09:42:52.964710 [INFO] reading event message file
2024/05/09 09:42:52.965058 [INFO] Engine received EB command cfn-hup-exec

2024/05/09 09:42:53.057951 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/09 09:42:53.583331 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/09 09:42:54.040378 [INFO] checking whether command app-deploy is applicable to this instance...
2024/05/09 09:42:54.040393 [INFO] this command is applicable to the instance, thus instance should execute command
2024/05/09 09:42:54.040398 [INFO] Engine command: (app-deploy)

2024/05/09 09:42:54.040437 [INFO] Downloading EB Application...
2024/05/09 09:42:54.040443 [INFO] Region: ap-southeast-2
2024/05/09 09:42:54.040446 [INFO] envID: e-3caxgjpcfu
2024/05/09 09:42:54.040456 [INFO] envBucket: elasticbeanstalk-ap-southeast-2-905418134427
2024/05/09 09:42:54.040460 [INFO] Using manifest file name from command request
2024/05/09 09:42:54.040467 [INFO] Manifest name is : manifest_1715247770253
2024/05/09 09:42:54.040470 [INFO] Download app version manifest
2024/05/09 09:42:54.040797 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/versions/manifest_1715247770253
2024/05/09 09:42:54.089462 [INFO] Download successful107bytes downloaded
2024/05/09 09:42:54.089637 [INFO] Trying to read and parse version manifest...
2024/05/09 09:42:54.093882 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/_versions/new_assignment/app-240509_194208291888
2024/05/09 09:42:54.267786 [INFO] Download successful34503086bytes downloaded
2024/05/09 09:42:54.268039 [INFO] Executing instruction: ElectLeader
2024/05/09 09:42:54.268045 [INFO] Running leader election for instance i-058d20c0b3bfe358b...
2024/05/09 09:42:54.268048 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/05/09 09:42:54.268062 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id af622553-3b29-47fc-a0be-1633bdd315d9 --listener-id i-058d20c0b3bfe358b --region ap-southeast-2
2024/05/09 09:42:54.609201 [INFO] Instance is Leader.
2024/05/09 09:42:54.609247 [INFO] Executing instruction: stopSqsd
2024/05/09 09:42:54.609253 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/05/09 09:42:54.609256 [INFO] Executing instruction: PreBuildEbExtension
2024/05/09 09:42:54.609270 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/05/09 09:42:54.609288 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2 --configsets Infra-EmbeddedPreBuild
2024/05/09 09:42:54.979164 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/05/09 09:42:54.979199 [INFO] Executing instruction: StageApplication
2024/05/09 09:42:55.084903 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/05/09 09:42:55.084959 [INFO] Running command /bin/sh -c /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/05/09 09:42:56.806644 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/05/09 09:42:56.962739 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/05/09 09:42:56.962769 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/05/09 09:42:56.962788 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/05/09 09:42:56.962790 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/05/09 09:42:56.962795 [INFO] Executing instruction: InstallDependency
2024/05/09 09:42:56.962800 [INFO] checking dependencies file
2024/05/09 09:42:56.962811 [INFO] Installing dependencies with requirements.txt by using Pip
2024/05/09 09:42:56.962823 [INFO] Running command /bin/sh -c /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/05/09 09:42:57.946174 [INFO] Requirement already satisfied: blinker==1.8.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 1)) (1.8.1)
Requirement already satisfied: click==8.1.7 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 2)) (8.1.7)
Requirement already satisfied: colorama==0.4.6 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 3)) (0.4.6)
Requirement already satisfied: email_validator==1.1.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 4)) (1.1.3)
Requirement already satisfied: Flask==3.0.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 5)) (3.0.3)
Requirement already satisfied: Flask-WTF==1.2.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 6)) (1.2.1)
Requirement already satisfied: gunicorn==22.0.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 7)) (22.0.0)
Requirement already satisfied: importlib_metadata==7.1.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 8)) (7.1.0)
Requirement already satisfied: itsdangerous==2.2.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 9)) (2.2.0)
Requirement already satisfied: Jinja2==3.1.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 10)) (3.1.3)
Requirement already satisfied: MarkupSafe==2.1.5 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 11)) (2.1.5)
Requirement already satisfied: Werkzeug==3.0.2 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 12)) (3.0.2)
Requirement already satisfied: WTForms==3.1.2 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 13)) (3.1.2)
Requirement already satisfied: zipp==3.18.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 14)) (3.18.1)
Requirement already satisfied: SQLAlchemy==2.0.29 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 15)) (2.0.29)
Requirement already satisfied: psycopg2-binary==2.9.9 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 16)) (2.9.9)
Requirement already satisfied: boto3==1.34.98 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 17)) (1.34.98)
Requirement already satisfied: dnspython>=1.15.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from email_validator==1.1.3->-r requirements.txt (line 4)) (2.6.1)
Requirement already satisfied: idna>=2.0.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from email_validator==1.1.3->-r requirements.txt (line 4)) (3.7)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from gunicorn==22.0.0->-r requirements.txt (line 7)) (24.0)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from SQLAlchemy==2.0.29->-r requirements.txt (line 15)) (3.0.3)
Requirement already satisfied: typing-extensions>=4.6.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from SQLAlchemy==2.0.29->-r requirements.txt (line 15)) (4.11.0)
Requirement already satisfied: jmespath<2.0.0,>=0.7.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 17)) (1.0.1)
Requirement already satisfied: botocore<1.35.0,>=1.34.98 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 17)) (1.34.101)
Requirement already satisfied: s3transfer<0.11.0,>=0.10.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 17)) (0.10.1)
Requirement already satisfied: urllib3<1.27,>=1.25.4 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 17)) (1.26.18)
Requirement already satisfied: python-dateutil<3.0.0,>=2.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 17)) (2.9.0.post0)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from python-dateutil<3.0.0,>=2.1->botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 17)) (1.16.0)

2024/05/09 09:42:57.946207 [INFO] WARNING: You are using pip version 21.3.1; however, version 24.0 is available.
You should consider upgrading via the '/var/app/venv/staging-LQM1lest/bin/python3.9 -m pip install --upgrade pip' command.

2024/05/09 09:42:57.946217 [INFO] Executing instruction: check Procfile
2024/05/09 09:42:57.946277 [INFO] creating default Procfile...
2024/05/09 09:42:57.946498 [INFO] Executing instruction: configure X-Ray
2024/05/09 09:42:57.946503 [INFO] X-Ray is not enabled.
2024/05/09 09:42:57.946511 [INFO] Executing instruction: configure proxy server
2024/05/09 09:42:58.047887 [INFO] Executing instruction: configure healthd specific proxy conf
2024/05/09 09:42:58.049462 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 09:42:58.068594 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/05/09 09:42:58.068629 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 09:42:58.082876 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/05/09 09:42:58.093442 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 09:42:58.106087 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/05/09 09:42:58.157471 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/05/09 09:42:58.616136 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/05/09 09:42:58.616304 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 09:42:58.978701 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 09:42:58.992532 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 09:42:59.317214 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 09:42:59.325883 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/05/09 09:42:59.334923 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/05/09 09:42:59.627881 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/05/09 09:42:59.641650 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/05/09 09:42:59.960474 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/05/09 09:42:59.960511 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 09:42:59.978294 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/05/09 09:43:00.023503 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/05/09 09:43:00.147509 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/05/09 09:43:00.148636 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/05/09 09:43:00.149393 [INFO] Executing instruction: configure log streaming
2024/05/09 09:43:00.149404 [INFO] log streaming is not enabled
2024/05/09 09:43:00.149408 [INFO] disable log stream
2024/05/09 09:43:00.149424 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/05/09 09:43:00.192593 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/05/09 09:43:00.216102 [INFO] Executing instruction: GetToggleForceRotate
2024/05/09 09:43:00.216125 [INFO] Checking if logs need forced rotation
2024/05/09 09:43:00.216152 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/09 09:43:00.721037 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/09 09:43:01.272093 [INFO] Generating rsyslog config from Procfile
2024/05/09 09:43:01.274648 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/05/09 09:43:01.370480 [INFO] Executing instruction: PostBuildEbExtension
2024/05/09 09:43:01.370521 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/05/09 09:43:01.370544 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2 --configsets Infra-EmbeddedPostBuild
2024/05/09 09:43:02.096572 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/05/09 09:43:02.096602 [INFO] Executing instruction: CleanEbExtensions
2024/05/09 09:43:02.096632 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/05/09 09:43:02.096637 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/05/09 09:43:02.096660 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/05/09 09:43:02.096679 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/05/09 09:43:02.096682 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/05/09 09:43:02.096689 [INFO] Executing instruction: stop X-Ray
2024/05/09 09:43:02.096692 [INFO] stop X-Ray ...
2024/05/09 09:43:02.096703 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/05/09 09:43:02.130580 [WARN] stopProcess Warning: process xray is not registered 
2024/05/09 09:43:02.130792 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/05/09 09:43:02.167537 [INFO] Executing instruction: stop proxy
2024/05/09 09:43:02.167592 [INFO] Running command /bin/sh -c systemctl show -p PartOf httpd.service
2024/05/09 09:43:02.195425 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/05/09 09:43:02.195460 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 09:43:02.223112 [INFO] Running command /bin/sh -c systemctl is-active nginx.service
2024/05/09 09:43:02.251018 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 09:43:02.273172 [INFO] Running command /bin/sh -c systemctl stop nginx.service
2024/05/09 09:43:02.444534 [INFO] Running command /bin/sh -c systemctl disable nginx.service
2024/05/09 09:43:02.972845 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 09:43:03.343505 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 09:43:03.354419 [INFO] Executing instruction: FlipApplication
2024/05/09 09:43:03.354445 [INFO] Fetching environment variables...
2024/05/09 09:43:03.354878 [INFO] Purge old process...
2024/05/09 09:43:03.354898 [INFO] Running command /bin/sh -c systemctl stop eb-app.target
2024/05/09 09:43:03.367315 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/05/09 09:43:03.381567 [INFO] web.service

2024/05/09 09:43:03.381589 [INFO] deregistering process: web
2024/05/09 09:43:03.381604 [INFO] Running command /bin/sh -c systemctl show -p PartOf web.service
2024/05/09 09:43:03.394805 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 09:43:03.404898 [INFO] Running command /bin/sh -c systemctl disable web.service
2024/05/09 09:43:03.809179 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2024/05/09 09:43:03.809263 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 09:43:04.177138 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 09:43:04.190204 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 09:43:04.216069 [INFO] Process web has not been fully terminated
2024/05/09 09:43:04.216096 [INFO] Some processes have not been fully terminated, sleeping 1 seconds now
2024/05/09 09:43:05.216210 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 09:43:05.228376 [INFO] Process web has been fully terminated
2024/05/09 09:43:05.228432 [INFO] All processes have been fully terminated
2024/05/09 09:43:05.228437 [INFO] Removing /var/app/current/ if it exists
2024/05/09 09:43:05.566135 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/05/09 09:43:05.566162 [INFO] Register application processes...
2024/05/09 09:43:05.566167 [INFO] Registering the proc: web

2024/05/09 09:43:05.566178 [INFO] Running command /bin/sh -c systemctl show -p PartOf web.service
2024/05/09 09:43:05.634123 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 09:43:05.997912 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 09:43:06.009333 [INFO] Running command /bin/sh -c systemctl is-enabled eb-app.target
2024/05/09 09:43:06.017802 [INFO] Running command /bin/sh -c systemctl enable eb-app.target
2024/05/09 09:43:06.344193 [INFO] Running command /bin/sh -c systemctl start eb-app.target
2024/05/09 09:43:06.353639 [INFO] Running command /bin/sh -c systemctl enable web.service
2024/05/09 09:43:06.646671 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/05/09 09:43:06.646707 [INFO] Running command /bin/sh -c systemctl show -p PartOf web.service
2024/05/09 09:43:06.658886 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 09:43:06.666285 [INFO] Running command /bin/sh -c systemctl start web.service
2024/05/09 09:43:06.721126 [INFO] Executing instruction: start X-Ray
2024/05/09 09:43:06.721146 [INFO] X-Ray is not enabled.
2024/05/09 09:43:06.721152 [INFO] Executing instruction: start proxy with new configuration
2024/05/09 09:43:06.721175 [INFO] Running command /bin/sh -c /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/05/09 09:43:06.745988 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2024/05/09 09:43:06.746722 [INFO] Running command /bin/sh -c cp -rp /var/proxy/staging/nginx/* /etc/nginx
2024/05/09 09:43:06.750864 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 09:43:06.768234 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 09:43:07.183993 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 09:43:07.197630 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 09:43:07.218198 [INFO] Running command /bin/sh -c systemctl is-active nginx.service
2024/05/09 09:43:07.236049 [INFO] Running command /bin/sh -c systemctl start nginx.service
2024/05/09 09:43:07.398931 [INFO] Executing instruction: configureSqsd
2024/05/09 09:43:07.398949 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2024/05/09 09:43:07.398953 [INFO] Executing instruction: startSqsd
2024/05/09 09:43:07.398957 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2024/05/09 09:43:07.398961 [INFO] Executing instruction: Track pids in healthd
2024/05/09 09:43:07.398965 [INFO] This is an enhanced health env...
2024/05/09 09:43:07.398979 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2024/05/09 09:43:07.417905 [INFO] healthd.service nginx.service cfn-hup.service

2024/05/09 09:43:07.417942 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/05/09 09:43:07.436829 [INFO] web.service

2024/05/09 09:43:07.437146 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2024/05/09 09:43:07.437166 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2024/05/09 09:43:07.437182 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2024/05/09 09:43:07.437186 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2024/05/09 09:43:07.437191 [INFO] Executing cleanup logic
2024/05/09 09:43:07.437337 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment successfully generated a 'Procfile'.","timestamp":1715247777946,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1715247787437,"severity":"INFO"}]}]}

2024/05/09 09:43:07.437503 [INFO] Platform Engine finished execution on command: app-deploy

2024/05/09 09:45:15.298288 [INFO] Starting...
2024/05/09 09:45:15.298421 [INFO] Starting EBPlatform-PlatformEngine
2024/05/09 09:45:15.298446 [INFO] reading event message file
2024/05/09 09:45:15.298612 [INFO] Engine received EB command cfn-hup-exec

2024/05/09 09:45:15.409534 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/09 09:45:15.869456 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/09 09:45:16.320973 [INFO] checking whether command tail-log is applicable to this instance...
2024/05/09 09:45:16.320987 [INFO] this command is applicable to the instance, thus instance should execute command
2024/05/09 09:45:16.320991 [INFO] Engine command: (tail-log)

2024/05/09 09:45:16.321076 [INFO] Executing instruction: GetTailLogs
2024/05/09 09:45:16.321080 [INFO] Tail Logs...
2024/05/09 09:45:16.323378 [INFO] Running command /bin/sh -c tail -n 100 /var/log/eb-hooks.log
2024/05/09 09:45:16.325890 [INFO] Running command /bin/sh -c tail -n 100 /var/log/nginx/access.log
2024/05/09 09:45:16.328338 [INFO] Running command /bin/sh -c tail -n 100 /var/log/nginx/error.log
2024/05/09 09:45:16.330404 [INFO] Running command /bin/sh -c tail -n 100 /var/log/web.stdout.log
2024/05/09 09:45:16.333225 [INFO] Running command /bin/sh -c tail -n 100 /var/log/eb-engine.log
2024/05/09 09:45:16.390899 [INFO] Executing cleanup logic
2024/05/09 09:45:16.390997 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1715247916390,"severity":"INFO"}]}]}

2024/05/09 09:45:16.391015 [INFO] Platform Engine finished execution on command: tail-log

2024/05/09 09:50:00.893949 [INFO] Starting...
2024/05/09 09:50:00.894019 [INFO] Starting EBPlatform-PlatformEngine
2024/05/09 09:50:00.894044 [INFO] reading event message file
2024/05/09 09:50:00.894426 [INFO] Engine received EB command cfn-hup-exec

2024/05/09 09:50:00.984341 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/09 09:50:01.516710 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/09 09:50:02.424607 [INFO] checking whether command tail-log is applicable to this instance...
2024/05/09 09:50:02.424621 [INFO] this command is applicable to the instance, thus instance should execute command
2024/05/09 09:50:02.424625 [INFO] Engine command: (tail-log)

2024/05/09 09:50:02.424771 [INFO] Executing instruction: GetTailLogs
2024/05/09 09:50:02.424776 [INFO] Tail Logs...
2024/05/09 09:50:02.425090 [INFO] Running command /bin/sh -c tail -n 100 /var/log/nginx/access.log
2024/05/09 09:50:02.433761 [INFO] Running command /bin/sh -c tail -n 100 /var/log/nginx/error.log
2024/05/09 09:50:02.438560 [INFO] Running command /bin/sh -c tail -n 100 /var/log/web.stdout.log
2024/05/09 09:50:02.442694 [INFO] Running command /bin/sh -c tail -n 100 /var/log/eb-engine.log
2024/05/09 09:50:02.449512 [INFO] Running command /bin/sh -c tail -n 100 /var/log/eb-hooks.log
2024/05/09 09:50:02.576548 [INFO] Executing cleanup logic
2024/05/09 09:50:02.576650 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1715248202576,"severity":"INFO"}]}]}

2024/05/09 09:50:02.576670 [INFO] Platform Engine finished execution on command: tail-log

2024/05/09 09:53:15.152704 [INFO] Starting...
2024/05/09 09:53:15.152761 [INFO] Starting EBPlatform-PlatformEngine
2024/05/09 09:53:15.152782 [INFO] reading event message file
2024/05/09 09:53:15.152963 [INFO] Engine received EB command cfn-hup-exec

2024/05/09 09:53:15.250187 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/09 09:53:15.618068 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/09 09:53:16.026660 [INFO] checking whether command bundle-log is applicable to this instance...
2024/05/09 09:53:16.026674 [INFO] this command is applicable to the instance, thus instance should execute command
2024/05/09 09:53:16.026678 [INFO] Engine command: (bundle-log)

2024/05/09 09:53:16.026722 [INFO] Executing instruction: GetBundleLogs
2024/05/09 09:53:16.026724 [INFO] Bundle Logs...
2024/05/09 09:53:16.139227 [INFO] Executing cleanup logic
2024/05/09 09:53:16.139346 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1715248396139,"severity":"INFO"}]}]}

2024/05/09 09:53:16.139420 [INFO] Platform Engine finished execution on command: bundle-log

2024/05/09 10:01:50.492772 [INFO] Starting...
2024/05/09 10:01:50.492822 [INFO] Starting EBPlatform-PlatformEngine
2024/05/09 10:01:50.492845 [INFO] reading event message file
2024/05/09 10:01:50.493004 [INFO] Engine received EB command cfn-hup-exec

2024/05/09 10:01:50.571777 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/09 10:01:50.948814 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/09 10:01:51.355431 [INFO] checking whether command app-deploy is applicable to this instance...
2024/05/09 10:01:51.355442 [INFO] this command is applicable to the instance, thus instance should execute command
2024/05/09 10:01:51.355445 [INFO] Engine command: (app-deploy)

2024/05/09 10:01:51.355449 [INFO] Downloading EB Application...
2024/05/09 10:01:51.355451 [INFO] Region: ap-southeast-2
2024/05/09 10:01:51.355454 [INFO] envID: e-3caxgjpcfu
2024/05/09 10:01:51.355457 [INFO] envBucket: elasticbeanstalk-ap-southeast-2-905418134427
2024/05/09 10:01:51.355461 [INFO] Using manifest file name from command request
2024/05/09 10:01:51.355469 [INFO] Manifest name is : manifest_1715248907798
2024/05/09 10:01:51.355472 [INFO] Download app version manifest
2024/05/09 10:01:51.355604 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/versions/manifest_1715248907798
2024/05/09 10:01:51.398386 [INFO] Download successful108bytes downloaded
2024/05/09 10:01:51.398530 [INFO] Trying to read and parse version manifest...
2024/05/09 10:01:51.408045 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/_versions/new_assignment/app-240509_200059411255
2024/05/09 10:01:51.574360 [INFO] Download successful34502590bytes downloaded
2024/05/09 10:01:51.574615 [INFO] Executing instruction: ElectLeader
2024/05/09 10:01:51.574624 [INFO] Running leader election for instance i-058d20c0b3bfe358b...
2024/05/09 10:01:51.574628 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/05/09 10:01:51.574643 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 14639b11-8bce-4fff-8b30-9519f06c79ba --listener-id i-058d20c0b3bfe358b --region ap-southeast-2
2024/05/09 10:01:51.929030 [INFO] Instance is Leader.
2024/05/09 10:01:51.929081 [INFO] Executing instruction: stopSqsd
2024/05/09 10:01:51.929088 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/05/09 10:01:51.929092 [INFO] Executing instruction: PreBuildEbExtension
2024/05/09 10:01:51.929094 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/05/09 10:01:51.929107 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2 --configsets Infra-EmbeddedPreBuild
2024/05/09 10:01:52.311448 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/05/09 10:01:52.311472 [INFO] Executing instruction: StageApplication
2024/05/09 10:01:52.362122 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/05/09 10:01:52.362185 [INFO] Running command /bin/sh -c /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/05/09 10:01:53.730032 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/05/09 10:01:53.842855 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/05/09 10:01:53.842886 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/05/09 10:01:53.842903 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/05/09 10:01:53.842906 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/05/09 10:01:53.842911 [INFO] Executing instruction: InstallDependency
2024/05/09 10:01:53.842915 [INFO] checking dependencies file
2024/05/09 10:01:53.842926 [INFO] Installing dependencies with requirements.txt by using Pip
2024/05/09 10:01:53.842939 [INFO] Running command /bin/sh -c /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/05/09 10:01:54.494449 [INFO] Requirement already satisfied: blinker==1.8.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 1)) (1.8.1)
Requirement already satisfied: click==8.1.7 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 2)) (8.1.7)
Requirement already satisfied: colorama==0.4.6 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 3)) (0.4.6)
Requirement already satisfied: email_validator==1.1.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 4)) (1.1.3)
Requirement already satisfied: Flask==3.0.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 5)) (3.0.3)
Requirement already satisfied: Flask-WTF==1.2.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 6)) (1.2.1)
Requirement already satisfied: gunicorn==22.0.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 7)) (22.0.0)
Requirement already satisfied: importlib_metadata==7.1.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 8)) (7.1.0)
Requirement already satisfied: itsdangerous==2.2.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 9)) (2.2.0)
Requirement already satisfied: Jinja2==3.1.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 10)) (3.1.3)
Requirement already satisfied: MarkupSafe==2.1.5 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 11)) (2.1.5)
Requirement already satisfied: Werkzeug==3.0.2 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 12)) (3.0.2)
Requirement already satisfied: WTForms==3.1.2 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 13)) (3.1.2)
Requirement already satisfied: zipp==3.18.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 14)) (3.18.1)
Requirement already satisfied: SQLAlchemy==2.0.29 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 15)) (2.0.29)
Requirement already satisfied: psycopg2-binary==2.9.9 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 16)) (2.9.9)
Requirement already satisfied: boto3==1.34.98 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 17)) (1.34.98)
Requirement already satisfied: dnspython>=1.15.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from email_validator==1.1.3->-r requirements.txt (line 4)) (2.6.1)
Requirement already satisfied: idna>=2.0.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from email_validator==1.1.3->-r requirements.txt (line 4)) (3.7)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from gunicorn==22.0.0->-r requirements.txt (line 7)) (24.0)
Requirement already satisfied: typing-extensions>=4.6.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from SQLAlchemy==2.0.29->-r requirements.txt (line 15)) (4.11.0)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from SQLAlchemy==2.0.29->-r requirements.txt (line 15)) (3.0.3)
Requirement already satisfied: botocore<1.35.0,>=1.34.98 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 17)) (1.34.101)
Requirement already satisfied: s3transfer<0.11.0,>=0.10.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 17)) (0.10.1)
Requirement already satisfied: jmespath<2.0.0,>=0.7.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 17)) (1.0.1)
Requirement already satisfied: urllib3<1.27,>=1.25.4 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 17)) (1.26.18)
Requirement already satisfied: python-dateutil<3.0.0,>=2.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 17)) (2.9.0.post0)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from python-dateutil<3.0.0,>=2.1->botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 17)) (1.16.0)

2024/05/09 10:01:54.494483 [INFO] WARNING: You are using pip version 21.3.1; however, version 24.0 is available.
You should consider upgrading via the '/var/app/venv/staging-LQM1lest/bin/python3.9 -m pip install --upgrade pip' command.

2024/05/09 10:01:54.494489 [INFO] Executing instruction: check Procfile
2024/05/09 10:01:54.494532 [INFO] creating default Procfile...
2024/05/09 10:01:54.494627 [INFO] Executing instruction: configure X-Ray
2024/05/09 10:01:54.494631 [INFO] X-Ray is not enabled.
2024/05/09 10:01:54.494634 [INFO] Executing instruction: configure proxy server
2024/05/09 10:01:54.555739 [INFO] Executing instruction: configure healthd specific proxy conf
2024/05/09 10:01:54.556839 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 10:01:54.574231 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/05/09 10:01:54.574274 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 10:01:54.584193 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/05/09 10:01:54.591386 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 10:01:54.601045 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/05/09 10:01:54.692997 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/05/09 10:01:55.032512 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/05/09 10:01:55.032753 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 10:01:55.424269 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 10:01:55.451557 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 10:01:55.795696 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 10:01:55.805391 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/05/09 10:01:55.814131 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/05/09 10:01:56.224123 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/05/09 10:01:56.234707 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/05/09 10:01:56.565412 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/05/09 10:01:56.565462 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 10:01:56.580899 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/05/09 10:01:56.591020 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/05/09 10:01:56.700801 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/05/09 10:01:56.701487 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/05/09 10:01:56.708850 [INFO] Executing instruction: configure log streaming
2024/05/09 10:01:56.708870 [INFO] log streaming is not enabled
2024/05/09 10:01:56.708874 [INFO] disable log stream
2024/05/09 10:01:56.708891 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/05/09 10:01:56.754215 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/05/09 10:01:56.771350 [INFO] Executing instruction: GetToggleForceRotate
2024/05/09 10:01:56.771373 [INFO] Checking if logs need forced rotation
2024/05/09 10:01:56.771394 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/09 10:01:57.360392 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/09 10:01:57.842986 [INFO] Generating rsyslog config from Procfile
2024/05/09 10:01:57.844456 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/05/09 10:01:58.132668 [INFO] Executing instruction: PostBuildEbExtension
2024/05/09 10:01:58.132781 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/05/09 10:01:58.132966 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2 --configsets Infra-EmbeddedPostBuild
2024/05/09 10:01:58.648817 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/05/09 10:01:58.648855 [INFO] Executing instruction: CleanEbExtensions
2024/05/09 10:01:58.648906 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/05/09 10:01:58.648910 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/05/09 10:01:58.648957 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/05/09 10:01:58.648982 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/05/09 10:01:58.648990 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/05/09 10:01:58.649002 [INFO] Executing instruction: stop X-Ray
2024/05/09 10:01:58.649006 [INFO] stop X-Ray ...
2024/05/09 10:01:58.649025 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/05/09 10:01:58.662836 [WARN] stopProcess Warning: process xray is not registered 
2024/05/09 10:01:58.662869 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/05/09 10:01:58.678909 [INFO] Executing instruction: stop proxy
2024/05/09 10:01:58.678943 [INFO] Running command /bin/sh -c systemctl show -p PartOf httpd.service
2024/05/09 10:01:58.697840 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/05/09 10:01:58.697873 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 10:01:58.714935 [INFO] Running command /bin/sh -c systemctl is-active nginx.service
2024/05/09 10:01:58.724503 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 10:01:58.740155 [INFO] Running command /bin/sh -c systemctl stop nginx.service
2024/05/09 10:01:58.921801 [INFO] Running command /bin/sh -c systemctl disable nginx.service
2024/05/09 10:01:59.236271 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 10:01:59.569365 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 10:01:59.579018 [INFO] Executing instruction: FlipApplication
2024/05/09 10:01:59.579042 [INFO] Fetching environment variables...
2024/05/09 10:01:59.579202 [INFO] Purge old process...
2024/05/09 10:01:59.579225 [INFO] Running command /bin/sh -c systemctl stop eb-app.target
2024/05/09 10:01:59.589567 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/05/09 10:01:59.600788 [INFO] web.service

2024/05/09 10:01:59.600814 [INFO] deregistering process: web
2024/05/09 10:01:59.600830 [INFO] Running command /bin/sh -c systemctl show -p PartOf web.service
2024/05/09 10:01:59.611407 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 10:01:59.619409 [INFO] Running command /bin/sh -c systemctl disable web.service
2024/05/09 10:01:59.910960 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2024/05/09 10:01:59.911040 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 10:02:00.387780 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 10:02:00.399917 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 10:02:00.412889 [INFO] Process web has not been fully terminated
2024/05/09 10:02:00.412914 [INFO] Some processes have not been fully terminated, sleeping 1 seconds now
2024/05/09 10:02:01.413069 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 10:02:01.427337 [INFO] Process web has been fully terminated
2024/05/09 10:02:01.427406 [INFO] All processes have been fully terminated
2024/05/09 10:02:01.427411 [INFO] Removing /var/app/current/ if it exists
2024/05/09 10:02:01.915309 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/05/09 10:02:01.915338 [INFO] Register application processes...
2024/05/09 10:02:01.915343 [INFO] Registering the proc: web

2024/05/09 10:02:01.915354 [INFO] Running command /bin/sh -c systemctl show -p PartOf web.service
2024/05/09 10:02:02.012708 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 10:02:02.415370 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 10:02:02.436860 [INFO] Running command /bin/sh -c systemctl is-enabled eb-app.target
2024/05/09 10:02:02.446150 [INFO] Running command /bin/sh -c systemctl enable eb-app.target
2024/05/09 10:02:02.811369 [INFO] Running command /bin/sh -c systemctl start eb-app.target
2024/05/09 10:02:02.820866 [INFO] Running command /bin/sh -c systemctl enable web.service
2024/05/09 10:02:03.183517 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/05/09 10:02:03.183560 [INFO] Running command /bin/sh -c systemctl show -p PartOf web.service
2024/05/09 10:02:03.204825 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 10:02:03.214714 [INFO] Running command /bin/sh -c systemctl start web.service
2024/05/09 10:02:03.301341 [INFO] Executing instruction: start X-Ray
2024/05/09 10:02:03.301359 [INFO] X-Ray is not enabled.
2024/05/09 10:02:03.301365 [INFO] Executing instruction: start proxy with new configuration
2024/05/09 10:02:03.301391 [INFO] Running command /bin/sh -c /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/05/09 10:02:03.331888 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2024/05/09 10:02:03.332204 [INFO] Running command /bin/sh -c cp -rp /var/proxy/staging/nginx/* /etc/nginx
2024/05/09 10:02:03.337341 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 10:02:03.362265 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 10:02:03.820158 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 10:02:03.848674 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 10:02:03.874848 [INFO] Running command /bin/sh -c systemctl is-active nginx.service
2024/05/09 10:02:03.893918 [INFO] Running command /bin/sh -c systemctl start nginx.service
2024/05/09 10:02:04.080911 [INFO] Executing instruction: configureSqsd
2024/05/09 10:02:04.080932 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2024/05/09 10:02:04.080937 [INFO] Executing instruction: startSqsd
2024/05/09 10:02:04.080940 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2024/05/09 10:02:04.080945 [INFO] Executing instruction: Track pids in healthd
2024/05/09 10:02:04.080948 [INFO] This is an enhanced health env...
2024/05/09 10:02:04.080962 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2024/05/09 10:02:04.100063 [INFO] cfn-hup.service healthd.service nginx.service

2024/05/09 10:02:04.100111 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/05/09 10:02:04.119225 [INFO] web.service

2024/05/09 10:02:04.119645 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2024/05/09 10:02:04.119712 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2024/05/09 10:02:04.119735 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2024/05/09 10:02:04.119739 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2024/05/09 10:02:04.119745 [INFO] Executing cleanup logic
2024/05/09 10:02:04.119908 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment successfully generated a 'Procfile'.","timestamp":1715248914494,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1715248924119,"severity":"INFO"}]}]}

2024/05/09 10:02:04.120078 [INFO] Platform Engine finished execution on command: app-deploy

2024/05/09 10:11:42.324890 [INFO] Starting...
2024/05/09 10:11:42.324950 [INFO] Starting EBPlatform-PlatformEngine
2024/05/09 10:11:42.324972 [INFO] reading event message file
2024/05/09 10:11:42.325508 [INFO] Engine received EB command cfn-hup-exec

2024/05/09 10:11:42.409717 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/09 10:11:42.821055 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/09 10:11:43.236506 [INFO] checking whether command app-deploy is applicable to this instance...
2024/05/09 10:11:43.236519 [INFO] this command is applicable to the instance, thus instance should execute command
2024/05/09 10:11:43.236521 [INFO] Engine command: (app-deploy)

2024/05/09 10:11:43.236525 [INFO] Downloading EB Application...
2024/05/09 10:11:43.236528 [INFO] Region: ap-southeast-2
2024/05/09 10:11:43.236532 [INFO] envID: e-3caxgjpcfu
2024/05/09 10:11:43.236535 [INFO] envBucket: elasticbeanstalk-ap-southeast-2-905418134427
2024/05/09 10:11:43.236539 [INFO] Using manifest file name from command request
2024/05/09 10:11:43.236547 [INFO] Manifest name is : manifest_1715249499759
2024/05/09 10:11:43.236550 [INFO] Download app version manifest
2024/05/09 10:11:43.236825 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/versions/manifest_1715249499759
2024/05/09 10:11:43.285939 [INFO] Download successful108bytes downloaded
2024/05/09 10:11:43.286084 [INFO] Trying to read and parse version manifest...
2024/05/09 10:11:43.289642 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/_versions/new_assignment/app-240509_201054158219
2024/05/09 10:11:43.465630 [INFO] Download successful34502970bytes downloaded
2024/05/09 10:11:43.465883 [INFO] Executing instruction: ElectLeader
2024/05/09 10:11:43.465890 [INFO] Running leader election for instance i-058d20c0b3bfe358b...
2024/05/09 10:11:43.465893 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/05/09 10:11:43.465911 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 5011bbb6-44bf-4dd5-bfc0-c38f1cd15888 --listener-id i-058d20c0b3bfe358b --region ap-southeast-2
2024/05/09 10:11:43.910416 [INFO] Instance is Leader.
2024/05/09 10:11:43.910459 [INFO] Executing instruction: stopSqsd
2024/05/09 10:11:43.910465 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/05/09 10:11:43.910470 [INFO] Executing instruction: PreBuildEbExtension
2024/05/09 10:11:43.910472 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/05/09 10:11:43.910486 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2 --configsets Infra-EmbeddedPreBuild
2024/05/09 10:11:44.336680 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/05/09 10:11:44.336713 [INFO] Executing instruction: StageApplication
2024/05/09 10:11:44.393819 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/05/09 10:11:44.393865 [INFO] Running command /bin/sh -c /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/05/09 10:11:45.926606 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/05/09 10:11:46.056590 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/05/09 10:11:46.056704 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/05/09 10:11:46.056725 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/05/09 10:11:46.056728 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/05/09 10:11:46.056734 [INFO] Executing instruction: InstallDependency
2024/05/09 10:11:46.056738 [INFO] checking dependencies file
2024/05/09 10:11:46.056751 [INFO] Installing dependencies with requirements.txt by using Pip
2024/05/09 10:11:46.056764 [INFO] Running command /bin/sh -c /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/05/09 10:11:54.001421 [INFO] Collecting awscli==1.32.99
  Downloading awscli-1.32.99-py3-none-any.whl (4.5 MB)
Collecting awsebcli==3.20.10
  Downloading awsebcli-3.20.10.tar.gz (260 kB)
  Preparing metadata (setup.py): started
  Preparing metadata (setup.py): finished with status 'done'
Requirement already satisfied: blinker==1.8.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 3)) (1.8.1)
Requirement already satisfied: boto3==1.34.98 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 4)) (1.34.98)
Collecting botocore==1.34.99
  Downloading botocore-1.34.99-py3-none-any.whl (12.2 MB)
Collecting cachelib==0.13.0
  Downloading cachelib-0.13.0-py3-none-any.whl (20 kB)
Collecting cement==2.8.2
  Downloading cement-2.8.2.tar.gz (165 kB)
  Preparing metadata (setup.py): started
  Preparing metadata (setup.py): finished with status 'done'
Collecting certifi==2024.2.2
  Downloading certifi-2024.2.2-py3-none-any.whl (163 kB)
Collecting charset-normalizer==3.3.2
  Downloading charset_normalizer-3.3.2-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (142 kB)
Requirement already satisfied: click==8.1.7 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 10)) (8.1.7)
Collecting colorama==0.4.3
  Downloading colorama-0.4.3-py2.py3-none-any.whl (15 kB)
Collecting distlib==0.3.8
  Downloading distlib-0.3.8-py2.py3-none-any.whl (468 kB)
Requirement already satisfied: dnspython==2.6.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 13)) (2.6.1)
Collecting docutils==0.16
  Downloading docutils-0.16-py2.py3-none-any.whl (548 kB)
Requirement already satisfied: email-validator==1.1.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 15)) (1.1.3)
Collecting filelock==3.14.0
  Downloading filelock-3.14.0-py3-none-any.whl (12 kB)
Requirement already satisfied: Flask==3.0.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 17)) (3.0.3)
Collecting Flask-Session==0.8.0
  Downloading flask_session-0.8.0-py3-none-any.whl (24 kB)
Requirement already satisfied: Flask-WTF==1.2.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 19)) (1.2.1)
Requirement already satisfied: greenlet==3.0.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 20)) (3.0.3)
Collecting gunicorn==20.1.0
  Downloading gunicorn-20.1.0-py3-none-any.whl (79 kB)
Requirement already satisfied: idna==3.7 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 22)) (3.7)
Requirement already satisfied: importlib_metadata==7.1.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 23)) (7.1.0)
Requirement already satisfied: itsdangerous==2.2.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 24)) (2.2.0)
Requirement already satisfied: Jinja2==3.1.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 25)) (3.1.3)
Requirement already satisfied: jmespath==1.0.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 26)) (1.0.1)
Requirement already satisfied: MarkupSafe==2.1.5 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 27)) (2.1.5)
Collecting msgspec==0.18.6
  Downloading msgspec-0.18.6-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (210 kB)
Requirement already satisfied: packaging==24.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 29)) (24.0)
Collecting pathspec==0.10.1
  Downloading pathspec-0.10.1-py3-none-any.whl (27 kB)
Collecting platformdirs==4.2.1
  Downloading platformdirs-4.2.1-py3-none-any.whl (17 kB)
Collecting psycopg2==2.9.9
  Downloading psycopg2-2.9.9.tar.gz (384 kB)
  Preparing metadata (setup.py): started
  Preparing metadata (setup.py): finished with status 'error'

2024/05/09 10:11:54.001455 [INFO]   ERROR: Command errored out with exit status 1:
   command: /var/app/venv/staging-LQM1lest/bin/python3.9 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-bq4t14np/psycopg2_57c2b432a3594e80a334d87172b1464e/setup.py'"'"'; __file__='"'"'/tmp/pip-install-bq4t14np/psycopg2_57c2b432a3594e80a334d87172b1464e/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-501p2lwd
       cwd: /tmp/pip-install-bq4t14np/psycopg2_57c2b432a3594e80a334d87172b1464e/
  Complete output (23 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-501p2lwd/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-501p2lwd/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-501p2lwd/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-501p2lwd/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-501p2lwd/psycopg2.egg-info/SOURCES.txt'
  
  Error: pg_config executable not found.
  
  pg_config is required to build psycopg2 from source.  Please add the directory
  containing pg_config to the $PATH or specify the full executable path with the
  option:
  
      python setup.py build_ext --pg-config /path/to/pg_config build ...
  
  or with the pg_config option in 'setup.cfg'.
  
  If you prefer to avoid building psycopg2 from source, please install the PyPI
  'psycopg2-binary' package instead.
  
  For further information please check the 'doc/src/install.rst' file (also at
  <https://www.psycopg.org/docs/install.html>).
  
  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/c9/5e/dc6acaf46d78979d6b03458b7a1618a68e152a6776fce95daac5e0f0301b/psycopg2-2.9.9.tar.gz#sha256=d1454bde93fb1e224166811694d600e746430c006fbb031ea06ecc2ea41bf156 (from https://pypi.org/simple/psycopg2/) (requires-python:>=3.7). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
ERROR: Could not find a version that satisfies the requirement psycopg2==2.9.9 (from versions: 2.0.10, 2.0.11, 2.0.12, 2.0.13, 2.0.14, 2.2.0, 2.2.1, 2.2.2, 2.3.0, 2.3.1, 2.3.2, 2.4, 2.4.1, 2.4.2, 2.4.3, 2.4.4, 2.4.5, 2.4.6, 2.5, 2.5.1, 2.5.2, 2.5.3, 2.5.4, 2.5.5, 2.6, 2.6.1, 2.6.2, 2.7, 2.7.1, 2.7.2, 2.7.3, 2.7.3.1, 2.7.3.2, 2.7.4, 2.7.5, 2.7.6, 2.7.6.1, 2.7.7, 2.8, 2.8.1, 2.8.2, 2.8.3, 2.8.4, 2.8.5, 2.8.6, 2.9, 2.9.1, 2.9.2, 2.9.3, 2.9.4, 2.9.5, 2.9.6, 2.9.7, 2.9.8, 2.9.9)
ERROR: No matching distribution found for psycopg2==2.9.9
WARNING: You are using pip version 21.3.1; however, version 24.0 is available.
You should consider upgrading via the '/var/app/venv/staging-LQM1lest/bin/python3.9 -m pip install --upgrade pip' command.

2024/05/09 10:11:54.001476 [ERROR] An error occurred during execution of command [app-deploy] - [InstallDependency]. Stop running the command. Error: fail to install dependencies with requirements.txt file with error Command /bin/sh -c /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt failed with error exit status 1. Stderr:  ERROR: Command errored out with exit status 1:
   command: /var/app/venv/staging-LQM1lest/bin/python3.9 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-bq4t14np/psycopg2_57c2b432a3594e80a334d87172b1464e/setup.py'"'"'; __file__='"'"'/tmp/pip-install-bq4t14np/psycopg2_57c2b432a3594e80a334d87172b1464e/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-501p2lwd
       cwd: /tmp/pip-install-bq4t14np/psycopg2_57c2b432a3594e80a334d87172b1464e/
  Complete output (23 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-501p2lwd/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-501p2lwd/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-501p2lwd/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-501p2lwd/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-501p2lwd/psycopg2.egg-info/SOURCES.txt'
  
  Error: pg_config executable not found.
  
  pg_config is required to build psycopg2 from source.  Please add the directory
  containing pg_config to the $PATH or specify the full executable path with the
  option:
  
      python setup.py build_ext --pg-config /path/to/pg_config build ...
  
  or with the pg_config option in 'setup.cfg'.
  
  If you prefer to avoid building psycopg2 from source, please install the PyPI
  'psycopg2-binary' package instead.
  
  For further information please check the 'doc/src/install.rst' file (also at
  <https://www.psycopg.org/docs/install.html>).
  
  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/c9/5e/dc6acaf46d78979d6b03458b7a1618a68e152a6776fce95daac5e0f0301b/psycopg2-2.9.9.tar.gz#sha256=d1454bde93fb1e224166811694d600e746430c006fbb031ea06ecc2ea41bf156 (from https://pypi.org/simple/psycopg2/) (requires-python:>=3.7). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
ERROR: Could not find a version that satisfies the requirement psycopg2==2.9.9 (from versions: 2.0.10, 2.0.11, 2.0.12, 2.0.13, 2.0.14, 2.2.0, 2.2.1, 2.2.2, 2.3.0, 2.3.1, 2.3.2, 2.4, 2.4.1, 2.4.2, 2.4.3, 2.4.4, 2.4.5, 2.4.6, 2.5, 2.5.1, 2.5.2, 2.5.3, 2.5.4, 2.5.5, 2.6, 2.6.1, 2.6.2, 2.7, 2.7.1, 2.7.2, 2.7.3, 2.7.3.1, 2.7.3.2, 2.7.4, 2.7.5, 2.7.6, 2.7.6.1, 2.7.7, 2.8, 2.8.1, 2.8.2, 2.8.3, 2.8.4, 2.8.5, 2.8.6, 2.9, 2.9.1, 2.9.2, 2.9.3, 2.9.4, 2.9.5, 2.9.6, 2.9.7, 2.9.8, 2.9.9)
ERROR: No matching distribution found for psycopg2==2.9.9
WARNING: You are using pip version 21.3.1; however, version 24.0 is available.
You should consider upgrading via the '/var/app/venv/staging-LQM1lest/bin/python3.9 -m pip install --upgrade pip' command.
 

2024/05/09 10:11:54.001482 [INFO] Executing cleanup logic
2024/05/09 10:11:54.001703 [INFO] CommandService Response: {"status":"FAILURE","api_version":"1.0","results":[{"status":"FAILURE","msg":"Engine execution has encountered an error.","returncode":1,"events":[{"msg":"Instance deployment failed to install application dependencies. The deployment failed.","timestamp":1715249514001,"severity":"ERROR"},{"msg":"Instance deployment failed. For details, see 'eb-engine.log'.","timestamp":1715249514001,"severity":"ERROR"}]}]}

2024/05/09 10:11:54.001889 [INFO] Platform Engine finished execution on command: app-deploy

2024/05/09 10:12:40.772568 [INFO] Starting...
2024/05/09 10:12:40.772614 [INFO] Starting EBPlatform-PlatformEngine
2024/05/09 10:12:40.772636 [INFO] reading event message file
2024/05/09 10:12:40.772791 [INFO] Engine received EB command cfn-hup-exec

2024/05/09 10:12:40.841095 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/09 10:12:41.197952 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/09 10:12:41.577068 [INFO] checking whether command bundle-log is applicable to this instance...
2024/05/09 10:12:41.577082 [INFO] this command is applicable to the instance, thus instance should execute command
2024/05/09 10:12:41.577085 [INFO] Engine command: (bundle-log)

2024/05/09 10:12:41.577150 [INFO] Executing instruction: GetBundleLogs
2024/05/09 10:12:41.577154 [INFO] Bundle Logs...
2024/05/09 10:12:41.704896 [INFO] Executing cleanup logic
2024/05/09 10:12:41.706074 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1715249561704,"severity":"INFO"}]}]}

2024/05/09 10:12:41.706097 [INFO] Platform Engine finished execution on command: bundle-log

2024/05/09 10:23:00.748043 [INFO] Starting...
2024/05/09 10:23:00.748102 [INFO] Starting EBPlatform-PlatformEngine
2024/05/09 10:23:00.748125 [INFO] reading event message file
2024/05/09 10:23:00.748279 [INFO] Engine received EB command cfn-hup-exec

2024/05/09 10:23:00.875088 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/09 10:23:01.302975 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/09 10:23:01.770475 [INFO] checking whether command app-deploy is applicable to this instance...
2024/05/09 10:23:01.770487 [INFO] this command is applicable to the instance, thus instance should execute command
2024/05/09 10:23:01.770493 [INFO] Engine command: (app-deploy)

2024/05/09 10:23:01.770497 [INFO] Downloading EB Application...
2024/05/09 10:23:01.770500 [INFO] Region: ap-southeast-2
2024/05/09 10:23:01.770502 [INFO] envID: e-3caxgjpcfu
2024/05/09 10:23:01.770505 [INFO] envBucket: elasticbeanstalk-ap-southeast-2-905418134427
2024/05/09 10:23:01.770508 [INFO] Using manifest file name from command request
2024/05/09 10:23:01.770516 [INFO] Manifest name is : manifest_1715250158707
2024/05/09 10:23:01.770519 [INFO] Download app version manifest
2024/05/09 10:23:01.770662 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/versions/manifest_1715250158707
2024/05/09 10:23:01.810487 [INFO] Download successful108bytes downloaded
2024/05/09 10:23:01.810633 [INFO] Trying to read and parse version manifest...
2024/05/09 10:23:01.813217 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/_versions/new_assignment/app-240509_202154545465
2024/05/09 10:23:01.996122 [INFO] Download successful34503359bytes downloaded
2024/05/09 10:23:01.996448 [INFO] Executing instruction: ElectLeader
2024/05/09 10:23:01.996458 [INFO] Running leader election for instance i-058d20c0b3bfe358b...
2024/05/09 10:23:01.996461 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/05/09 10:23:01.996478 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 83348d1a-eda2-4013-b850-877ed89c6cdd --listener-id i-058d20c0b3bfe358b --region ap-southeast-2
2024/05/09 10:23:02.450001 [INFO] Instance is Leader.
2024/05/09 10:23:02.450045 [INFO] Executing instruction: stopSqsd
2024/05/09 10:23:02.450051 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/05/09 10:23:02.450055 [INFO] Executing instruction: PreBuildEbExtension
2024/05/09 10:23:02.450059 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/05/09 10:23:02.450075 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2 --configsets Infra-EmbeddedPreBuild
2024/05/09 10:23:05.013080 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/05/09 10:23:05.013157 [INFO] Executing instruction: StageApplication
2024/05/09 10:23:05.369760 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/05/09 10:23:05.369882 [INFO] Running command /bin/sh -c /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/05/09 10:23:07.304302 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/05/09 10:23:07.458793 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/05/09 10:23:07.458935 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/05/09 10:23:07.458953 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/05/09 10:23:07.458956 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/05/09 10:23:07.458962 [INFO] Executing instruction: InstallDependency
2024/05/09 10:23:07.458968 [INFO] checking dependencies file
2024/05/09 10:23:07.458979 [INFO] Installing dependencies with requirements.txt by using Pip
2024/05/09 10:23:07.458991 [INFO] Running command /bin/sh -c /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/05/09 10:23:15.102731 [INFO] Collecting awscli==1.32.99
  Using cached awscli-1.32.99-py3-none-any.whl (4.5 MB)
Collecting awsebcli==3.20.10
  Using cached awsebcli-3.20.10.tar.gz (260 kB)
  Preparing metadata (setup.py): started
  Preparing metadata (setup.py): finished with status 'done'
Requirement already satisfied: blinker==1.8.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 3)) (1.8.1)
Requirement already satisfied: boto3==1.34.98 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 4)) (1.34.98)
Collecting botocore==1.34.99
  Using cached botocore-1.34.99-py3-none-any.whl (12.2 MB)
Collecting cachelib==0.13.0
  Using cached cachelib-0.13.0-py3-none-any.whl (20 kB)
Collecting cement==2.8.2
  Using cached cement-2.8.2.tar.gz (165 kB)
  Preparing metadata (setup.py): started
  Preparing metadata (setup.py): finished with status 'done'
Collecting certifi==2024.2.2
  Using cached certifi-2024.2.2-py3-none-any.whl (163 kB)
Collecting charset-normalizer==3.3.2
  Using cached charset_normalizer-3.3.2-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (142 kB)
Requirement already satisfied: click==8.1.7 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 10)) (8.1.7)
Collecting colorama==0.4.3
  Using cached colorama-0.4.3-py2.py3-none-any.whl (15 kB)
Collecting distlib==0.3.8
  Using cached distlib-0.3.8-py2.py3-none-any.whl (468 kB)
Requirement already satisfied: dnspython==2.6.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 13)) (2.6.1)
Collecting docutils==0.16
  Using cached docutils-0.16-py2.py3-none-any.whl (548 kB)
Requirement already satisfied: email-validator==1.1.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 15)) (1.1.3)
Collecting filelock==3.14.0
  Using cached filelock-3.14.0-py3-none-any.whl (12 kB)
Requirement already satisfied: Flask==3.0.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 17)) (3.0.3)
Collecting Flask-Session==0.8.0
  Using cached flask_session-0.8.0-py3-none-any.whl (24 kB)
Requirement already satisfied: Flask-WTF==1.2.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 19)) (1.2.1)
Requirement already satisfied: greenlet==3.0.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 20)) (3.0.3)
Collecting gunicorn==20.1.0
  Using cached gunicorn-20.1.0-py3-none-any.whl (79 kB)
Requirement already satisfied: idna==3.7 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 22)) (3.7)
Requirement already satisfied: importlib_metadata==7.1.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 23)) (7.1.0)
Requirement already satisfied: itsdangerous==2.2.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 24)) (2.2.0)
Requirement already satisfied: Jinja2==3.1.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 25)) (3.1.3)
Requirement already satisfied: jmespath==1.0.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 26)) (1.0.1)
Requirement already satisfied: MarkupSafe==2.1.5 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 27)) (2.1.5)
Collecting msgspec==0.18.6
  Using cached msgspec-0.18.6-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (210 kB)
Requirement already satisfied: packaging==24.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 29)) (24.0)
Collecting pathspec==0.10.1
  Using cached pathspec-0.10.1-py3-none-any.whl (27 kB)
Collecting platformdirs==4.2.1
  Using cached platformdirs-4.2.1-py3-none-any.whl (17 kB)
Collecting psycopg2==2.9.9
  Using cached psycopg2-2.9.9.tar.gz (384 kB)
  Preparing metadata (setup.py): started
  Preparing metadata (setup.py): finished with status 'error'

2024/05/09 10:23:15.104018 [INFO]   ERROR: Command errored out with exit status 1:
   command: /var/app/venv/staging-LQM1lest/bin/python3.9 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-xj29efmh/psycopg2_0a61d0cf6dc3405189d915dc3c10de55/setup.py'"'"'; __file__='"'"'/tmp/pip-install-xj29efmh/psycopg2_0a61d0cf6dc3405189d915dc3c10de55/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-encqmei_
       cwd: /tmp/pip-install-xj29efmh/psycopg2_0a61d0cf6dc3405189d915dc3c10de55/
  Complete output (23 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-encqmei_/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-encqmei_/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-encqmei_/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-encqmei_/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-encqmei_/psycopg2.egg-info/SOURCES.txt'
  
  Error: pg_config executable not found.
  
  pg_config is required to build psycopg2 from source.  Please add the directory
  containing pg_config to the $PATH or specify the full executable path with the
  option:
  
      python setup.py build_ext --pg-config /path/to/pg_config build ...
  
  or with the pg_config option in 'setup.cfg'.
  
  If you prefer to avoid building psycopg2 from source, please install the PyPI
  'psycopg2-binary' package instead.
  
  For further information please check the 'doc/src/install.rst' file (also at
  <https://www.psycopg.org/docs/install.html>).
  
  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/c9/5e/dc6acaf46d78979d6b03458b7a1618a68e152a6776fce95daac5e0f0301b/psycopg2-2.9.9.tar.gz#sha256=d1454bde93fb1e224166811694d600e746430c006fbb031ea06ecc2ea41bf156 (from https://pypi.org/simple/psycopg2/) (requires-python:>=3.7). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
ERROR: Could not find a version that satisfies the requirement psycopg2==2.9.9 (from versions: 2.0.10, 2.0.11, 2.0.12, 2.0.13, 2.0.14, 2.2.0, 2.2.1, 2.2.2, 2.3.0, 2.3.1, 2.3.2, 2.4, 2.4.1, 2.4.2, 2.4.3, 2.4.4, 2.4.5, 2.4.6, 2.5, 2.5.1, 2.5.2, 2.5.3, 2.5.4, 2.5.5, 2.6, 2.6.1, 2.6.2, 2.7, 2.7.1, 2.7.2, 2.7.3, 2.7.3.1, 2.7.3.2, 2.7.4, 2.7.5, 2.7.6, 2.7.6.1, 2.7.7, 2.8, 2.8.1, 2.8.2, 2.8.3, 2.8.4, 2.8.5, 2.8.6, 2.9, 2.9.1, 2.9.2, 2.9.3, 2.9.4, 2.9.5, 2.9.6, 2.9.7, 2.9.8, 2.9.9)
ERROR: No matching distribution found for psycopg2==2.9.9
WARNING: You are using pip version 21.3.1; however, version 24.0 is available.
You should consider upgrading via the '/var/app/venv/staging-LQM1lest/bin/python3.9 -m pip install --upgrade pip' command.

2024/05/09 10:23:15.104050 [ERROR] An error occurred during execution of command [app-deploy] - [InstallDependency]. Stop running the command. Error: fail to install dependencies with requirements.txt file with error Command /bin/sh -c /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt failed with error exit status 1. Stderr:  ERROR: Command errored out with exit status 1:
   command: /var/app/venv/staging-LQM1lest/bin/python3.9 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-xj29efmh/psycopg2_0a61d0cf6dc3405189d915dc3c10de55/setup.py'"'"'; __file__='"'"'/tmp/pip-install-xj29efmh/psycopg2_0a61d0cf6dc3405189d915dc3c10de55/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-encqmei_
       cwd: /tmp/pip-install-xj29efmh/psycopg2_0a61d0cf6dc3405189d915dc3c10de55/
  Complete output (23 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-encqmei_/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-encqmei_/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-encqmei_/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-encqmei_/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-encqmei_/psycopg2.egg-info/SOURCES.txt'
  
  Error: pg_config executable not found.
  
  pg_config is required to build psycopg2 from source.  Please add the directory
  containing pg_config to the $PATH or specify the full executable path with the
  option:
  
      python setup.py build_ext --pg-config /path/to/pg_config build ...
  
  or with the pg_config option in 'setup.cfg'.
  
  If you prefer to avoid building psycopg2 from source, please install the PyPI
  'psycopg2-binary' package instead.
  
  For further information please check the 'doc/src/install.rst' file (also at
  <https://www.psycopg.org/docs/install.html>).
  
  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/c9/5e/dc6acaf46d78979d6b03458b7a1618a68e152a6776fce95daac5e0f0301b/psycopg2-2.9.9.tar.gz#sha256=d1454bde93fb1e224166811694d600e746430c006fbb031ea06ecc2ea41bf156 (from https://pypi.org/simple/psycopg2/) (requires-python:>=3.7). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
ERROR: Could not find a version that satisfies the requirement psycopg2==2.9.9 (from versions: 2.0.10, 2.0.11, 2.0.12, 2.0.13, 2.0.14, 2.2.0, 2.2.1, 2.2.2, 2.3.0, 2.3.1, 2.3.2, 2.4, 2.4.1, 2.4.2, 2.4.3, 2.4.4, 2.4.5, 2.4.6, 2.5, 2.5.1, 2.5.2, 2.5.3, 2.5.4, 2.5.5, 2.6, 2.6.1, 2.6.2, 2.7, 2.7.1, 2.7.2, 2.7.3, 2.7.3.1, 2.7.3.2, 2.7.4, 2.7.5, 2.7.6, 2.7.6.1, 2.7.7, 2.8, 2.8.1, 2.8.2, 2.8.3, 2.8.4, 2.8.5, 2.8.6, 2.9, 2.9.1, 2.9.2, 2.9.3, 2.9.4, 2.9.5, 2.9.6, 2.9.7, 2.9.8, 2.9.9)
ERROR: No matching distribution found for psycopg2==2.9.9
WARNING: You are using pip version 21.3.1; however, version 24.0 is available.
You should consider upgrading via the '/var/app/venv/staging-LQM1lest/bin/python3.9 -m pip install --upgrade pip' command.
 

2024/05/09 10:23:15.104057 [INFO] Executing cleanup logic
2024/05/09 10:23:15.104215 [INFO] CommandService Response: {"status":"FAILURE","api_version":"1.0","results":[{"status":"FAILURE","msg":"Engine execution has encountered an error.","returncode":1,"events":[{"msg":"Instance deployment failed to install application dependencies. The deployment failed.","timestamp":1715250195104,"severity":"ERROR"},{"msg":"Instance deployment failed. For details, see 'eb-engine.log'.","timestamp":1715250195104,"severity":"ERROR"}]}]}

2024/05/09 10:23:15.104677 [INFO] Platform Engine finished execution on command: app-deploy

2024/05/09 10:26:13.339724 [INFO] Starting...
2024/05/09 10:26:13.339775 [INFO] Starting EBPlatform-PlatformEngine
2024/05/09 10:26:13.339797 [INFO] reading event message file
2024/05/09 10:26:13.340113 [INFO] Engine received EB command cfn-hup-exec

2024/05/09 10:26:13.423708 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/09 10:26:13.840391 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/09 10:26:14.191966 [INFO] checking whether command app-deploy is applicable to this instance...
2024/05/09 10:26:14.191978 [INFO] this command is applicable to the instance, thus instance should execute command
2024/05/09 10:26:14.191980 [INFO] Engine command: (app-deploy)

2024/05/09 10:26:14.191986 [INFO] Downloading EB Application...
2024/05/09 10:26:14.191988 [INFO] Region: ap-southeast-2
2024/05/09 10:26:14.191992 [INFO] envID: e-3caxgjpcfu
2024/05/09 10:26:14.191995 [INFO] envBucket: elasticbeanstalk-ap-southeast-2-905418134427
2024/05/09 10:26:14.192002 [INFO] Using manifest file name from command request
2024/05/09 10:26:14.192010 [INFO] Manifest name is : manifest_1715250370951
2024/05/09 10:26:14.192012 [INFO] Download app version manifest
2024/05/09 10:26:14.192161 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/versions/manifest_1715250370951
2024/05/09 10:26:14.228256 [INFO] Download successful108bytes downloaded
2024/05/09 10:26:14.228414 [INFO] Trying to read and parse version manifest...
2024/05/09 10:26:14.231546 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/_versions/new_assignment/app-240509_202528600966
2024/05/09 10:26:14.396448 [INFO] Download successful34502590bytes downloaded
2024/05/09 10:26:14.396724 [INFO] Executing instruction: ElectLeader
2024/05/09 10:26:14.396732 [INFO] Running leader election for instance i-058d20c0b3bfe358b...
2024/05/09 10:26:14.396736 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/05/09 10:26:14.396758 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 2678d909-b4d4-4bb2-9b08-e3bc044e7f16 --listener-id i-058d20c0b3bfe358b --region ap-southeast-2
2024/05/09 10:26:14.742736 [INFO] Instance is Leader.
2024/05/09 10:26:14.742791 [INFO] Executing instruction: stopSqsd
2024/05/09 10:26:14.742795 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/05/09 10:26:14.742798 [INFO] Executing instruction: PreBuildEbExtension
2024/05/09 10:26:14.742801 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/05/09 10:26:14.742814 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2 --configsets Infra-EmbeddedPreBuild
2024/05/09 10:26:15.185031 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/05/09 10:26:15.185069 [INFO] Executing instruction: StageApplication
2024/05/09 10:26:15.574702 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/05/09 10:26:15.574737 [INFO] Running command /bin/sh -c /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/05/09 10:26:17.562587 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/05/09 10:26:17.712941 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/05/09 10:26:17.712971 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/05/09 10:26:17.712988 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/05/09 10:26:17.712991 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/05/09 10:26:17.712995 [INFO] Executing instruction: InstallDependency
2024/05/09 10:26:17.712999 [INFO] checking dependencies file
2024/05/09 10:26:17.713011 [INFO] Installing dependencies with requirements.txt by using Pip
2024/05/09 10:26:17.713024 [INFO] Running command /bin/sh -c /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/05/09 10:26:18.517170 [INFO] Requirement already satisfied: blinker==1.8.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 1)) (1.8.1)
Requirement already satisfied: click==8.1.7 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 2)) (8.1.7)
Requirement already satisfied: colorama==0.4.6 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 3)) (0.4.6)
Requirement already satisfied: email_validator==1.1.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 4)) (1.1.3)
Requirement already satisfied: Flask==3.0.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 5)) (3.0.3)
Requirement already satisfied: Flask-WTF==1.2.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 6)) (1.2.1)
Requirement already satisfied: gunicorn==22.0.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 7)) (22.0.0)
Requirement already satisfied: importlib_metadata==7.1.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 8)) (7.1.0)
Requirement already satisfied: itsdangerous==2.2.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 9)) (2.2.0)
Requirement already satisfied: Jinja2==3.1.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 10)) (3.1.3)
Requirement already satisfied: MarkupSafe==2.1.5 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 11)) (2.1.5)
Requirement already satisfied: Werkzeug==3.0.2 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 12)) (3.0.2)
Requirement already satisfied: WTForms==3.1.2 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 13)) (3.1.2)
Requirement already satisfied: zipp==3.18.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 14)) (3.18.1)
Requirement already satisfied: SQLAlchemy==2.0.29 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 15)) (2.0.29)
Requirement already satisfied: psycopg2-binary==2.9.9 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 16)) (2.9.9)
Requirement already satisfied: boto3==1.34.98 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 17)) (1.34.98)
Requirement already satisfied: dnspython>=1.15.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from email_validator==1.1.3->-r requirements.txt (line 4)) (2.6.1)
Requirement already satisfied: idna>=2.0.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from email_validator==1.1.3->-r requirements.txt (line 4)) (3.7)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from gunicorn==22.0.0->-r requirements.txt (line 7)) (24.0)
Requirement already satisfied: typing-extensions>=4.6.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from SQLAlchemy==2.0.29->-r requirements.txt (line 15)) (4.11.0)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from SQLAlchemy==2.0.29->-r requirements.txt (line 15)) (3.0.3)
Requirement already satisfied: s3transfer<0.11.0,>=0.10.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 17)) (0.10.1)
Requirement already satisfied: jmespath<2.0.0,>=0.7.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 17)) (1.0.1)
Requirement already satisfied: botocore<1.35.0,>=1.34.98 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 17)) (1.34.101)
Requirement already satisfied: python-dateutil<3.0.0,>=2.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 17)) (2.9.0.post0)
Requirement already satisfied: urllib3<1.27,>=1.25.4 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 17)) (1.26.18)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from python-dateutil<3.0.0,>=2.1->botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 17)) (1.16.0)

2024/05/09 10:26:18.517215 [INFO] WARNING: You are using pip version 21.3.1; however, version 24.0 is available.
You should consider upgrading via the '/var/app/venv/staging-LQM1lest/bin/python3.9 -m pip install --upgrade pip' command.

2024/05/09 10:26:18.517222 [INFO] Executing instruction: check Procfile
2024/05/09 10:26:18.517284 [INFO] creating default Procfile...
2024/05/09 10:26:18.517429 [INFO] Executing instruction: configure X-Ray
2024/05/09 10:26:18.517434 [INFO] X-Ray is not enabled.
2024/05/09 10:26:18.517441 [INFO] Executing instruction: configure proxy server
2024/05/09 10:26:18.601909 [INFO] Executing instruction: configure healthd specific proxy conf
2024/05/09 10:26:18.603335 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 10:26:18.666864 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/05/09 10:26:18.666898 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 10:26:18.685360 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/05/09 10:26:18.697057 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 10:26:18.714621 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/05/09 10:26:18.790915 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/05/09 10:26:19.196742 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/05/09 10:26:19.196979 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 10:26:19.532666 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 10:26:19.545172 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 10:26:19.933965 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 10:26:19.943724 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/05/09 10:26:19.954352 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/05/09 10:26:20.304289 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/05/09 10:26:20.313713 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/05/09 10:26:20.589260 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/05/09 10:26:20.589299 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 10:26:20.601190 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/05/09 10:26:20.613832 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/05/09 10:26:20.679988 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/05/09 10:26:20.680727 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/05/09 10:26:20.681512 [INFO] Executing instruction: configure log streaming
2024/05/09 10:26:20.681520 [INFO] log streaming is not enabled
2024/05/09 10:26:20.681522 [INFO] disable log stream
2024/05/09 10:26:20.681533 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/05/09 10:26:20.699683 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/05/09 10:26:20.717673 [INFO] Executing instruction: GetToggleForceRotate
2024/05/09 10:26:20.717696 [INFO] Checking if logs need forced rotation
2024/05/09 10:26:20.717717 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/09 10:26:21.206627 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/09 10:26:21.745870 [INFO] Generating rsyslog config from Procfile
2024/05/09 10:26:21.747613 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/05/09 10:26:22.156404 [INFO] Executing instruction: PostBuildEbExtension
2024/05/09 10:26:22.156433 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/05/09 10:26:22.156447 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2 --configsets Infra-EmbeddedPostBuild
2024/05/09 10:26:22.610999 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/05/09 10:26:22.615387 [INFO] Executing instruction: CleanEbExtensions
2024/05/09 10:26:22.615434 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/05/09 10:26:22.615439 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/05/09 10:26:22.615461 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/05/09 10:26:22.615476 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/05/09 10:26:22.615480 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/05/09 10:26:22.615489 [INFO] Executing instruction: stop X-Ray
2024/05/09 10:26:22.615492 [INFO] stop X-Ray ...
2024/05/09 10:26:22.615506 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/05/09 10:26:22.654263 [WARN] stopProcess Warning: process xray is not registered 
2024/05/09 10:26:22.654307 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/05/09 10:26:22.672563 [INFO] Executing instruction: stop proxy
2024/05/09 10:26:22.672596 [INFO] Running command /bin/sh -c systemctl show -p PartOf httpd.service
2024/05/09 10:26:22.689037 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/05/09 10:26:22.689318 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 10:26:22.705429 [INFO] Running command /bin/sh -c systemctl is-active nginx.service
2024/05/09 10:26:22.715745 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 10:26:22.727852 [INFO] Running command /bin/sh -c systemctl stop nginx.service
2024/05/09 10:26:22.902952 [INFO] Running command /bin/sh -c systemctl disable nginx.service
2024/05/09 10:26:23.257905 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 10:26:23.587635 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 10:26:23.611390 [INFO] Executing instruction: FlipApplication
2024/05/09 10:26:23.611414 [INFO] Fetching environment variables...
2024/05/09 10:26:23.611699 [INFO] Purge old process...
2024/05/09 10:26:23.611731 [INFO] Running command /bin/sh -c systemctl stop eb-app.target
2024/05/09 10:26:23.623045 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/05/09 10:26:23.635198 [INFO] web.service

2024/05/09 10:26:23.635218 [INFO] deregistering process: web
2024/05/09 10:26:23.635237 [INFO] Running command /bin/sh -c systemctl show -p PartOf web.service
2024/05/09 10:26:23.647226 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 10:26:23.655157 [INFO] Running command /bin/sh -c systemctl disable web.service
2024/05/09 10:26:24.059764 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2024/05/09 10:26:24.059859 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 10:26:24.365582 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 10:26:24.375650 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 10:26:24.383434 [INFO] Process web has been fully terminated
2024/05/09 10:26:24.383458 [INFO] All processes have been fully terminated
2024/05/09 10:26:24.383462 [INFO] Removing /var/app/current/ if it exists
2024/05/09 10:26:24.732420 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/05/09 10:26:24.732456 [INFO] Register application processes...
2024/05/09 10:26:24.732461 [INFO] Registering the proc: web

2024/05/09 10:26:24.732473 [INFO] Running command /bin/sh -c systemctl show -p PartOf web.service
2024/05/09 10:26:24.778176 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 10:26:25.100814 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 10:26:25.109106 [INFO] Running command /bin/sh -c systemctl is-enabled eb-app.target
2024/05/09 10:26:25.116601 [INFO] Running command /bin/sh -c systemctl enable eb-app.target
2024/05/09 10:26:25.442158 [INFO] Running command /bin/sh -c systemctl start eb-app.target
2024/05/09 10:26:25.451108 [INFO] Running command /bin/sh -c systemctl enable web.service
2024/05/09 10:26:25.744215 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/05/09 10:26:25.744248 [INFO] Running command /bin/sh -c systemctl show -p PartOf web.service
2024/05/09 10:26:25.755456 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 10:26:25.763430 [INFO] Running command /bin/sh -c systemctl start web.service
2024/05/09 10:26:25.826382 [INFO] Executing instruction: start X-Ray
2024/05/09 10:26:25.826402 [INFO] X-Ray is not enabled.
2024/05/09 10:26:25.826407 [INFO] Executing instruction: start proxy with new configuration
2024/05/09 10:26:25.826435 [INFO] Running command /bin/sh -c /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/05/09 10:26:25.850277 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2024/05/09 10:26:25.850605 [INFO] Running command /bin/sh -c cp -rp /var/proxy/staging/nginx/* /etc/nginx
2024/05/09 10:26:25.856253 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 10:26:25.876709 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 10:26:26.337217 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 10:26:26.352517 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 10:26:26.381256 [INFO] Running command /bin/sh -c systemctl is-active nginx.service
2024/05/09 10:26:26.397635 [INFO] Running command /bin/sh -c systemctl start nginx.service
2024/05/09 10:26:26.545377 [INFO] Executing instruction: configureSqsd
2024/05/09 10:26:26.545400 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2024/05/09 10:26:26.545443 [INFO] Executing instruction: startSqsd
2024/05/09 10:26:26.545447 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2024/05/09 10:26:26.545451 [INFO] Executing instruction: Track pids in healthd
2024/05/09 10:26:26.545455 [INFO] This is an enhanced health env...
2024/05/09 10:26:26.545468 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2024/05/09 10:26:26.561819 [INFO] healthd.service cfn-hup.service nginx.service

2024/05/09 10:26:26.561855 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/05/09 10:26:26.579231 [INFO] web.service

2024/05/09 10:26:26.579650 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2024/05/09 10:26:26.579715 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2024/05/09 10:26:26.579734 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2024/05/09 10:26:26.579738 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2024/05/09 10:26:26.579744 [INFO] Executing cleanup logic
2024/05/09 10:26:26.579991 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment successfully generated a 'Procfile'.","timestamp":1715250378517,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1715250386579,"severity":"INFO"}]}]}

2024/05/09 10:26:26.580169 [INFO] Platform Engine finished execution on command: app-deploy

2024/05/09 10:30:10.117220 [INFO] Starting...
2024/05/09 10:30:10.117276 [INFO] Starting EBPlatform-PlatformEngine
2024/05/09 10:30:10.117299 [INFO] reading event message file
2024/05/09 10:30:10.117457 [INFO] Engine received EB command cfn-hup-exec

2024/05/09 10:30:10.210981 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/09 10:30:10.584542 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/09 10:30:10.960281 [INFO] checking whether command app-deploy is applicable to this instance...
2024/05/09 10:30:10.960292 [INFO] this command is applicable to the instance, thus instance should execute command
2024/05/09 10:30:10.960296 [INFO] Engine command: (app-deploy)

2024/05/09 10:30:10.960302 [INFO] Downloading EB Application...
2024/05/09 10:30:10.960305 [INFO] Region: ap-southeast-2
2024/05/09 10:30:10.960308 [INFO] envID: e-3caxgjpcfu
2024/05/09 10:30:10.960311 [INFO] envBucket: elasticbeanstalk-ap-southeast-2-905418134427
2024/05/09 10:30:10.960315 [INFO] Using manifest file name from command request
2024/05/09 10:30:10.960322 [INFO] Manifest name is : manifest_1715250607591
2024/05/09 10:30:10.960325 [INFO] Download app version manifest
2024/05/09 10:30:10.960456 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/versions/manifest_1715250607591
2024/05/09 10:30:11.004717 [INFO] Download successful108bytes downloaded
2024/05/09 10:30:11.004858 [INFO] Trying to read and parse version manifest...
2024/05/09 10:30:11.011677 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/_versions/new_assignment/app-240509_202923115603
2024/05/09 10:30:11.171673 [INFO] Download successful34502573bytes downloaded
2024/05/09 10:30:11.171892 [INFO] Executing instruction: ElectLeader
2024/05/09 10:30:11.171898 [INFO] Running leader election for instance i-058d20c0b3bfe358b...
2024/05/09 10:30:11.171901 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/05/09 10:30:11.171912 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 2e2ab7c2-a234-4fed-86dd-f30ae2f3a3ac --listener-id i-058d20c0b3bfe358b --region ap-southeast-2
2024/05/09 10:30:11.597183 [INFO] Instance is Leader.
2024/05/09 10:30:11.597225 [INFO] Executing instruction: stopSqsd
2024/05/09 10:30:11.597231 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/05/09 10:30:11.597234 [INFO] Executing instruction: PreBuildEbExtension
2024/05/09 10:30:11.597237 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/05/09 10:30:11.597250 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2 --configsets Infra-EmbeddedPreBuild
2024/05/09 10:30:11.965932 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/05/09 10:30:11.965954 [INFO] Executing instruction: StageApplication
2024/05/09 10:30:12.036934 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/05/09 10:30:12.036983 [INFO] Running command /bin/sh -c /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/05/09 10:30:13.647435 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/05/09 10:30:13.761894 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/05/09 10:30:13.761928 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/05/09 10:30:13.761948 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/05/09 10:30:13.761950 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/05/09 10:30:13.761955 [INFO] Executing instruction: InstallDependency
2024/05/09 10:30:13.761961 [INFO] checking dependencies file
2024/05/09 10:30:13.761979 [INFO] Installing dependencies with requirements.txt by using Pip
2024/05/09 10:30:13.761993 [INFO] Running command /bin/sh -c /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/05/09 10:30:14.672979 [INFO] Requirement already satisfied: blinker==1.8.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 1)) (1.8.1)
Requirement already satisfied: click==8.1.7 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 2)) (8.1.7)
Requirement already satisfied: colorama==0.4.6 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 3)) (0.4.6)
Requirement already satisfied: email_validator==1.1.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 4)) (1.1.3)
Requirement already satisfied: Flask==3.0.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 5)) (3.0.3)
Requirement already satisfied: Flask-WTF==1.2.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 6)) (1.2.1)
Collecting Flask-Login==0.6.1
  Downloading Flask_Login-0.6.1-py3-none-any.whl (17 kB)
Requirement already satisfied: gunicorn==22.0.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 8)) (22.0.0)
Requirement already satisfied: importlib_metadata==7.1.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 9)) (7.1.0)
Requirement already satisfied: itsdangerous==2.2.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 10)) (2.2.0)
Requirement already satisfied: Jinja2==3.1.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 11)) (3.1.3)
Requirement already satisfied: MarkupSafe==2.1.5 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 12)) (2.1.5)
Requirement already satisfied: Werkzeug==3.0.2 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 13)) (3.0.2)
Requirement already satisfied: WTForms==3.1.2 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 14)) (3.1.2)
Requirement already satisfied: zipp==3.18.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 15)) (3.18.1)
Requirement already satisfied: SQLAlchemy==2.0.29 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 16)) (2.0.29)
Requirement already satisfied: psycopg2-binary==2.9.9 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 17)) (2.9.9)
Requirement already satisfied: boto3==1.34.98 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 18)) (1.34.98)
Requirement already satisfied: idna>=2.0.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from email_validator==1.1.3->-r requirements.txt (line 4)) (3.7)
Requirement already satisfied: dnspython>=1.15.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from email_validator==1.1.3->-r requirements.txt (line 4)) (2.6.1)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from gunicorn==22.0.0->-r requirements.txt (line 8)) (24.0)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from SQLAlchemy==2.0.29->-r requirements.txt (line 16)) (3.0.3)
Requirement already satisfied: typing-extensions>=4.6.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from SQLAlchemy==2.0.29->-r requirements.txt (line 16)) (4.11.0)
Requirement already satisfied: jmespath<2.0.0,>=0.7.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 18)) (1.0.1)
Requirement already satisfied: botocore<1.35.0,>=1.34.98 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 18)) (1.34.101)
Requirement already satisfied: s3transfer<0.11.0,>=0.10.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 18)) (0.10.1)
Requirement already satisfied: python-dateutil<3.0.0,>=2.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 18)) (2.9.0.post0)
Requirement already satisfied: urllib3<1.27,>=1.25.4 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 18)) (1.26.18)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from python-dateutil<3.0.0,>=2.1->botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 18)) (1.16.0)
Installing collected packages: Flask-Login
Successfully installed Flask-Login-0.6.1

2024/05/09 10:30:14.673012 [INFO] WARNING: You are using pip version 21.3.1; however, version 24.0 is available.
You should consider upgrading via the '/var/app/venv/staging-LQM1lest/bin/python3.9 -m pip install --upgrade pip' command.

2024/05/09 10:30:14.673020 [INFO] Executing instruction: check Procfile
2024/05/09 10:30:14.673075 [INFO] creating default Procfile...
2024/05/09 10:30:14.673192 [INFO] Executing instruction: configure X-Ray
2024/05/09 10:30:14.673196 [INFO] X-Ray is not enabled.
2024/05/09 10:30:14.673201 [INFO] Executing instruction: configure proxy server
2024/05/09 10:30:14.679663 [INFO] Executing instruction: configure healthd specific proxy conf
2024/05/09 10:30:14.681775 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 10:30:14.775466 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/05/09 10:30:14.775502 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 10:30:14.788796 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/05/09 10:30:14.799980 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 10:30:14.810014 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/05/09 10:30:14.844054 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/05/09 10:30:15.193367 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/05/09 10:30:15.193547 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 10:30:15.576570 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 10:30:15.587573 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 10:30:15.905555 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 10:30:15.913988 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/05/09 10:30:15.922390 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/05/09 10:30:16.205639 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/05/09 10:30:16.214478 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/05/09 10:30:16.583769 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/05/09 10:30:16.583813 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 10:30:16.596279 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/05/09 10:30:16.604583 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/05/09 10:30:16.663323 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/05/09 10:30:16.664382 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/05/09 10:30:16.665212 [INFO] Executing instruction: configure log streaming
2024/05/09 10:30:16.665222 [INFO] log streaming is not enabled
2024/05/09 10:30:16.665226 [INFO] disable log stream
2024/05/09 10:30:16.665244 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/05/09 10:30:16.688314 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/05/09 10:30:16.708406 [INFO] Executing instruction: GetToggleForceRotate
2024/05/09 10:30:16.708430 [INFO] Checking if logs need forced rotation
2024/05/09 10:30:16.708450 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/09 10:30:17.276235 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/09 10:30:17.734301 [INFO] Generating rsyslog config from Procfile
2024/05/09 10:30:17.736892 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/05/09 10:30:17.887010 [INFO] Executing instruction: PostBuildEbExtension
2024/05/09 10:30:17.887049 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/05/09 10:30:17.887064 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2 --configsets Infra-EmbeddedPostBuild
2024/05/09 10:30:18.244929 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/05/09 10:30:18.244987 [INFO] Executing instruction: CleanEbExtensions
2024/05/09 10:30:18.245009 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/05/09 10:30:18.245016 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/05/09 10:30:18.245036 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/05/09 10:30:18.245053 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/05/09 10:30:18.245057 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/05/09 10:30:18.245062 [INFO] Executing instruction: stop X-Ray
2024/05/09 10:30:18.245065 [INFO] stop X-Ray ...
2024/05/09 10:30:18.245075 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/05/09 10:30:18.257902 [WARN] stopProcess Warning: process xray is not registered 
2024/05/09 10:30:18.257934 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/05/09 10:30:18.272019 [INFO] Executing instruction: stop proxy
2024/05/09 10:30:18.272053 [INFO] Running command /bin/sh -c systemctl show -p PartOf httpd.service
2024/05/09 10:30:18.286241 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/05/09 10:30:18.286272 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 10:30:18.298739 [INFO] Running command /bin/sh -c systemctl is-active nginx.service
2024/05/09 10:30:18.306705 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 10:30:18.315786 [INFO] Running command /bin/sh -c systemctl stop nginx.service
2024/05/09 10:30:18.467503 [INFO] Running command /bin/sh -c systemctl disable nginx.service
2024/05/09 10:30:18.733882 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 10:30:19.077773 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 10:30:19.088494 [INFO] Executing instruction: FlipApplication
2024/05/09 10:30:19.088516 [INFO] Fetching environment variables...
2024/05/09 10:30:19.088727 [INFO] Purge old process...
2024/05/09 10:30:19.088749 [INFO] Running command /bin/sh -c systemctl stop eb-app.target
2024/05/09 10:30:19.099322 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/05/09 10:30:19.112403 [INFO] web.service

2024/05/09 10:30:19.112423 [INFO] deregistering process: web
2024/05/09 10:30:19.112434 [INFO] Running command /bin/sh -c systemctl show -p PartOf web.service
2024/05/09 10:30:19.129963 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 10:30:19.140085 [INFO] Running command /bin/sh -c systemctl disable web.service
2024/05/09 10:30:19.582461 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2024/05/09 10:30:19.582626 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 10:30:19.993776 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 10:30:20.003341 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 10:30:20.012794 [INFO] Process web has been fully terminated
2024/05/09 10:30:20.012818 [INFO] All processes have been fully terminated
2024/05/09 10:30:20.012822 [INFO] Removing /var/app/current/ if it exists
2024/05/09 10:30:20.311236 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/05/09 10:30:20.311317 [INFO] Register application processes...
2024/05/09 10:30:20.311324 [INFO] Registering the proc: web

2024/05/09 10:30:20.311337 [INFO] Running command /bin/sh -c systemctl show -p PartOf web.service
2024/05/09 10:30:20.359443 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 10:30:20.643167 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 10:30:20.653553 [INFO] Running command /bin/sh -c systemctl is-enabled eb-app.target
2024/05/09 10:30:20.662064 [INFO] Running command /bin/sh -c systemctl enable eb-app.target
2024/05/09 10:30:21.075518 [INFO] Running command /bin/sh -c systemctl start eb-app.target
2024/05/09 10:30:21.093246 [INFO] Running command /bin/sh -c systemctl enable web.service
2024/05/09 10:30:21.415085 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/05/09 10:30:21.415117 [INFO] Running command /bin/sh -c systemctl show -p PartOf web.service
2024/05/09 10:30:21.427432 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 10:30:21.435225 [INFO] Running command /bin/sh -c systemctl start web.service
2024/05/09 10:30:21.496706 [INFO] Executing instruction: start X-Ray
2024/05/09 10:30:21.496725 [INFO] X-Ray is not enabled.
2024/05/09 10:30:21.496729 [INFO] Executing instruction: start proxy with new configuration
2024/05/09 10:30:21.496755 [INFO] Running command /bin/sh -c /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/05/09 10:30:21.522554 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2024/05/09 10:30:21.522863 [INFO] Running command /bin/sh -c cp -rp /var/proxy/staging/nginx/* /etc/nginx
2024/05/09 10:30:21.527095 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 10:30:21.549172 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 10:30:22.009773 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 10:30:22.022175 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 10:30:22.044502 [INFO] Running command /bin/sh -c systemctl is-active nginx.service
2024/05/09 10:30:22.062393 [INFO] Running command /bin/sh -c systemctl start nginx.service
2024/05/09 10:30:22.269036 [INFO] Executing instruction: configureSqsd
2024/05/09 10:30:22.269054 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2024/05/09 10:30:22.269058 [INFO] Executing instruction: startSqsd
2024/05/09 10:30:22.269061 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2024/05/09 10:30:22.269065 [INFO] Executing instruction: Track pids in healthd
2024/05/09 10:30:22.269070 [INFO] This is an enhanced health env...
2024/05/09 10:30:22.269084 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2024/05/09 10:30:22.284847 [INFO] cfn-hup.service healthd.service nginx.service

2024/05/09 10:30:22.284882 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/05/09 10:30:22.300999 [INFO] web.service

2024/05/09 10:30:22.301391 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2024/05/09 10:30:22.301602 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2024/05/09 10:30:22.301625 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2024/05/09 10:30:22.301691 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2024/05/09 10:30:22.301700 [INFO] Executing cleanup logic
2024/05/09 10:30:22.301947 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment successfully generated a 'Procfile'.","timestamp":1715250614673,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1715250622301,"severity":"INFO"}]}]}

2024/05/09 10:30:22.302124 [INFO] Platform Engine finished execution on command: app-deploy

2024/05/09 10:32:24.340643 [INFO] Starting...
2024/05/09 10:32:24.340698 [INFO] Starting EBPlatform-PlatformEngine
2024/05/09 10:32:24.340721 [INFO] reading event message file
2024/05/09 10:32:24.340936 [INFO] Engine received EB command cfn-hup-exec

2024/05/09 10:32:24.416904 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/09 10:32:24.892329 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/09 10:32:25.384668 [INFO] checking whether command tail-log is applicable to this instance...
2024/05/09 10:32:25.384718 [INFO] this command is applicable to the instance, thus instance should execute command
2024/05/09 10:32:25.384724 [INFO] Engine command: (tail-log)

2024/05/09 10:32:25.384957 [INFO] Executing instruction: GetTailLogs
2024/05/09 10:32:25.384963 [INFO] Tail Logs...
2024/05/09 10:32:25.386198 [INFO] Running command /bin/sh -c tail -n 100 /var/log/eb-hooks.log
2024/05/09 10:32:25.388657 [INFO] Running command /bin/sh -c tail -n 100 /var/log/nginx/access.log
2024/05/09 10:32:25.391156 [INFO] Running command /bin/sh -c tail -n 100 /var/log/nginx/error.log
2024/05/09 10:32:25.393099 [INFO] Running command /bin/sh -c tail -n 100 /var/log/web.stdout.log
2024/05/09 10:32:25.395445 [INFO] Running command /bin/sh -c tail -n 100 /var/log/eb-engine.log
2024/05/09 10:32:25.498749 [INFO] Executing cleanup logic
2024/05/09 10:32:25.498833 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1715250745498,"severity":"INFO"}]}]}

2024/05/09 10:32:25.498849 [INFO] Platform Engine finished execution on command: tail-log

2024/05/09 10:57:08.790456 [INFO] Starting...
2024/05/09 10:57:08.790507 [INFO] Starting EBPlatform-PlatformEngine
2024/05/09 10:57:08.790614 [INFO] reading event message file
2024/05/09 10:57:08.790778 [INFO] Engine received EB command cfn-hup-exec

2024/05/09 10:57:08.872942 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/09 10:57:09.215533 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/09 10:57:09.537236 [INFO] checking whether command app-deploy is applicable to this instance...
2024/05/09 10:57:09.537249 [INFO] this command is applicable to the instance, thus instance should execute command
2024/05/09 10:57:09.537252 [INFO] Engine command: (app-deploy)

2024/05/09 10:57:09.537256 [INFO] Downloading EB Application...
2024/05/09 10:57:09.537258 [INFO] Region: ap-southeast-2
2024/05/09 10:57:09.537261 [INFO] envID: e-3caxgjpcfu
2024/05/09 10:57:09.537264 [INFO] envBucket: elasticbeanstalk-ap-southeast-2-905418134427
2024/05/09 10:57:09.537268 [INFO] Using manifest file name from command request
2024/05/09 10:57:09.537275 [INFO] Manifest name is : manifest_1715252225034
2024/05/09 10:57:09.537278 [INFO] Download app version manifest
2024/05/09 10:57:09.537416 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/versions/manifest_1715252225034
2024/05/09 10:57:09.577931 [INFO] Download successful108bytes downloaded
2024/05/09 10:57:09.578069 [INFO] Trying to read and parse version manifest...
2024/05/09 10:57:09.581231 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/_versions/new_assignment/app-240509_205420887250
2024/05/09 10:57:09.731945 [INFO] Download successful34502684bytes downloaded
2024/05/09 10:57:09.732270 [INFO] Executing instruction: ElectLeader
2024/05/09 10:57:09.732276 [INFO] Running leader election for instance i-058d20c0b3bfe358b...
2024/05/09 10:57:09.732279 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/05/09 10:57:09.732294 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id b577b509-7d45-4fff-9894-57af0e2e0687 --listener-id i-058d20c0b3bfe358b --region ap-southeast-2
2024/05/09 10:57:10.278725 [INFO] Instance is Leader.
2024/05/09 10:57:10.278802 [INFO] Executing instruction: stopSqsd
2024/05/09 10:57:10.278813 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/05/09 10:57:10.278818 [INFO] Executing instruction: PreBuildEbExtension
2024/05/09 10:57:10.278822 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/05/09 10:57:10.278839 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2 --configsets Infra-EmbeddedPreBuild
2024/05/09 10:57:10.846454 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/05/09 10:57:10.846474 [INFO] Executing instruction: StageApplication
2024/05/09 10:57:10.918106 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/05/09 10:57:10.918144 [INFO] Running command /bin/sh -c /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/05/09 10:57:12.691857 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/05/09 10:57:12.897213 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/05/09 10:57:12.897252 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/05/09 10:57:12.897275 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/05/09 10:57:12.897277 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/05/09 10:57:12.897282 [INFO] Executing instruction: InstallDependency
2024/05/09 10:57:12.897287 [INFO] checking dependencies file
2024/05/09 10:57:12.897299 [INFO] Installing dependencies with requirements.txt by using Pip
2024/05/09 10:57:12.897311 [INFO] Running command /bin/sh -c /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/05/09 10:57:13.764132 [INFO] Requirement already satisfied: blinker==1.8.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 1)) (1.8.1)
Requirement already satisfied: click==8.1.7 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 2)) (8.1.7)
Requirement already satisfied: colorama==0.4.6 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 3)) (0.4.6)
Requirement already satisfied: email_validator==1.1.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 4)) (1.1.3)
Requirement already satisfied: Flask==3.0.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 5)) (3.0.3)
Requirement already satisfied: Flask-WTF==1.2.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 6)) (1.2.1)
Requirement already satisfied: Flask-Login==0.6.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 7)) (0.6.1)
Requirement already satisfied: gunicorn==22.0.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 8)) (22.0.0)
Requirement already satisfied: importlib_metadata==7.1.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 9)) (7.1.0)
Requirement already satisfied: itsdangerous==2.2.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 10)) (2.2.0)
Requirement already satisfied: Jinja2==3.1.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 11)) (3.1.3)
Requirement already satisfied: MarkupSafe==2.1.5 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 12)) (2.1.5)
Requirement already satisfied: Werkzeug==3.0.2 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 13)) (3.0.2)
Requirement already satisfied: WTForms==3.1.2 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 14)) (3.1.2)
Requirement already satisfied: zipp==3.18.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 15)) (3.18.1)
Requirement already satisfied: SQLAlchemy==2.0.29 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 16)) (2.0.29)
Requirement already satisfied: psycopg2-binary==2.9.9 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 17)) (2.9.9)
Requirement already satisfied: boto3==1.34.98 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 18)) (1.34.98)
Requirement already satisfied: dnspython>=1.15.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from email_validator==1.1.3->-r requirements.txt (line 4)) (2.6.1)
Requirement already satisfied: idna>=2.0.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from email_validator==1.1.3->-r requirements.txt (line 4)) (3.7)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from gunicorn==22.0.0->-r requirements.txt (line 8)) (24.0)
Requirement already satisfied: typing-extensions>=4.6.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from SQLAlchemy==2.0.29->-r requirements.txt (line 16)) (4.11.0)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from SQLAlchemy==2.0.29->-r requirements.txt (line 16)) (3.0.3)
Requirement already satisfied: botocore<1.35.0,>=1.34.98 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 18)) (1.34.101)
Requirement already satisfied: jmespath<2.0.0,>=0.7.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 18)) (1.0.1)
Requirement already satisfied: s3transfer<0.11.0,>=0.10.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 18)) (0.10.1)
Requirement already satisfied: python-dateutil<3.0.0,>=2.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 18)) (2.9.0.post0)
Requirement already satisfied: urllib3<1.27,>=1.25.4 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 18)) (1.26.18)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from python-dateutil<3.0.0,>=2.1->botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 18)) (1.16.0)

2024/05/09 10:57:13.764160 [INFO] WARNING: You are using pip version 21.3.1; however, version 24.0 is available.
You should consider upgrading via the '/var/app/venv/staging-LQM1lest/bin/python3.9 -m pip install --upgrade pip' command.

2024/05/09 10:57:13.764199 [INFO] Executing instruction: check Procfile
2024/05/09 10:57:13.764244 [INFO] creating default Procfile...
2024/05/09 10:57:13.764351 [INFO] Executing instruction: configure X-Ray
2024/05/09 10:57:13.764357 [INFO] X-Ray is not enabled.
2024/05/09 10:57:13.764361 [INFO] Executing instruction: configure proxy server
2024/05/09 10:57:13.769889 [INFO] Executing instruction: configure healthd specific proxy conf
2024/05/09 10:57:13.771257 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 10:57:13.836434 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/05/09 10:57:13.836467 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 10:57:13.849209 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/05/09 10:57:13.859863 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 10:57:13.873558 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/05/09 10:57:13.935468 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/05/09 10:57:14.265983 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/05/09 10:57:14.266138 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 10:57:14.622984 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 10:57:14.634937 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 10:57:14.905109 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 10:57:14.913552 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/05/09 10:57:14.922323 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/05/09 10:57:15.251977 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/05/09 10:57:15.262146 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/05/09 10:57:15.641122 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/05/09 10:57:15.641157 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 10:57:15.656060 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/05/09 10:57:15.665731 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/05/09 10:57:15.738859 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/05/09 10:57:15.739798 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/05/09 10:57:15.740580 [INFO] Executing instruction: configure log streaming
2024/05/09 10:57:15.740588 [INFO] log streaming is not enabled
2024/05/09 10:57:15.740590 [INFO] disable log stream
2024/05/09 10:57:15.740620 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/05/09 10:57:15.763259 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/05/09 10:57:15.783940 [INFO] Executing instruction: GetToggleForceRotate
2024/05/09 10:57:15.783963 [INFO] Checking if logs need forced rotation
2024/05/09 10:57:15.783986 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/09 10:57:16.314590 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/09 10:57:16.820577 [INFO] Generating rsyslog config from Procfile
2024/05/09 10:57:16.822051 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/05/09 10:57:17.156329 [INFO] Executing instruction: PostBuildEbExtension
2024/05/09 10:57:17.156354 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/05/09 10:57:17.156381 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2 --configsets Infra-EmbeddedPostBuild
2024/05/09 10:57:17.578170 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/05/09 10:57:17.578194 [INFO] Executing instruction: CleanEbExtensions
2024/05/09 10:57:17.578223 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/05/09 10:57:17.578227 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/05/09 10:57:17.578249 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/05/09 10:57:17.578262 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/05/09 10:57:17.578265 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/05/09 10:57:17.578270 [INFO] Executing instruction: stop X-Ray
2024/05/09 10:57:17.578272 [INFO] stop X-Ray ...
2024/05/09 10:57:17.578283 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/05/09 10:57:17.593756 [WARN] stopProcess Warning: process xray is not registered 
2024/05/09 10:57:17.593786 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/05/09 10:57:17.608345 [INFO] Executing instruction: stop proxy
2024/05/09 10:57:17.608379 [INFO] Running command /bin/sh -c systemctl show -p PartOf httpd.service
2024/05/09 10:57:17.621951 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/05/09 10:57:17.621981 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 10:57:17.633860 [INFO] Running command /bin/sh -c systemctl is-active nginx.service
2024/05/09 10:57:17.641953 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 10:57:17.651085 [INFO] Running command /bin/sh -c systemctl stop nginx.service
2024/05/09 10:57:17.821833 [INFO] Running command /bin/sh -c systemctl disable nginx.service
2024/05/09 10:57:18.112683 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 10:57:18.411986 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 10:57:18.420878 [INFO] Executing instruction: FlipApplication
2024/05/09 10:57:18.420902 [INFO] Fetching environment variables...
2024/05/09 10:57:18.421193 [INFO] Purge old process...
2024/05/09 10:57:18.421213 [INFO] Running command /bin/sh -c systemctl stop eb-app.target
2024/05/09 10:57:18.431224 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/05/09 10:57:18.441933 [INFO] web.service

2024/05/09 10:57:18.441955 [INFO] deregistering process: web
2024/05/09 10:57:18.441967 [INFO] Running command /bin/sh -c systemctl show -p PartOf web.service
2024/05/09 10:57:18.453258 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 10:57:18.461173 [INFO] Running command /bin/sh -c systemctl disable web.service
2024/05/09 10:57:18.781374 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2024/05/09 10:57:18.781439 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 10:57:19.161645 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 10:57:19.173894 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 10:57:19.184864 [INFO] Process web has not been fully terminated
2024/05/09 10:57:19.184886 [INFO] Some processes have not been fully terminated, sleeping 1 seconds now
2024/05/09 10:57:20.185002 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 10:57:20.197795 [INFO] Process web has been fully terminated
2024/05/09 10:57:20.197811 [INFO] All processes have been fully terminated
2024/05/09 10:57:20.197815 [INFO] Removing /var/app/current/ if it exists
2024/05/09 10:57:20.573977 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/05/09 10:57:20.574015 [INFO] Register application processes...
2024/05/09 10:57:20.574021 [INFO] Registering the proc: web

2024/05/09 10:57:20.574038 [INFO] Running command /bin/sh -c systemctl show -p PartOf web.service
2024/05/09 10:57:20.620338 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 10:57:20.969447 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 10:57:20.978540 [INFO] Running command /bin/sh -c systemctl is-enabled eb-app.target
2024/05/09 10:57:20.987362 [INFO] Running command /bin/sh -c systemctl enable eb-app.target
2024/05/09 10:57:21.339217 [INFO] Running command /bin/sh -c systemctl start eb-app.target
2024/05/09 10:57:21.348546 [INFO] Running command /bin/sh -c systemctl enable web.service
2024/05/09 10:57:21.699026 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/05/09 10:57:21.699063 [INFO] Running command /bin/sh -c systemctl show -p PartOf web.service
2024/05/09 10:57:21.710835 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 10:57:21.718575 [INFO] Running command /bin/sh -c systemctl start web.service
2024/05/09 10:57:21.772851 [INFO] Executing instruction: start X-Ray
2024/05/09 10:57:21.772916 [INFO] X-Ray is not enabled.
2024/05/09 10:57:21.772924 [INFO] Executing instruction: start proxy with new configuration
2024/05/09 10:57:21.772950 [INFO] Running command /bin/sh -c /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/05/09 10:57:21.801694 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2024/05/09 10:57:21.801998 [INFO] Running command /bin/sh -c cp -rp /var/proxy/staging/nginx/* /etc/nginx
2024/05/09 10:57:21.807379 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 10:57:21.847579 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 10:57:22.367810 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 10:57:22.379861 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 10:57:22.400412 [INFO] Running command /bin/sh -c systemctl is-active nginx.service
2024/05/09 10:57:22.416373 [INFO] Running command /bin/sh -c systemctl start nginx.service
2024/05/09 10:57:22.619195 [INFO] Executing instruction: configureSqsd
2024/05/09 10:57:22.619214 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2024/05/09 10:57:22.619219 [INFO] Executing instruction: startSqsd
2024/05/09 10:57:22.619222 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2024/05/09 10:57:22.619226 [INFO] Executing instruction: Track pids in healthd
2024/05/09 10:57:22.619230 [INFO] This is an enhanced health env...
2024/05/09 10:57:22.619245 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2024/05/09 10:57:22.634512 [INFO] cfn-hup.service healthd.service nginx.service

2024/05/09 10:57:22.634560 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/05/09 10:57:22.662718 [INFO] web.service

2024/05/09 10:57:22.663127 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2024/05/09 10:57:22.663147 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2024/05/09 10:57:22.663165 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2024/05/09 10:57:22.663169 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2024/05/09 10:57:22.663175 [INFO] Executing cleanup logic
2024/05/09 10:57:22.663333 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment successfully generated a 'Procfile'.","timestamp":1715252233764,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1715252242663,"severity":"INFO"}]}]}

2024/05/09 10:57:22.663511 [INFO] Platform Engine finished execution on command: app-deploy

2024/05/09 10:59:54.262690 [INFO] Starting...
2024/05/09 10:59:54.262743 [INFO] Starting EBPlatform-PlatformEngine
2024/05/09 10:59:54.262765 [INFO] reading event message file
2024/05/09 10:59:54.262919 [INFO] Engine received EB command cfn-hup-exec

2024/05/09 10:59:54.339537 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/09 10:59:54.670785 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/09 10:59:55.070246 [INFO] checking whether command app-deploy is applicable to this instance...
2024/05/09 10:59:55.070260 [INFO] this command is applicable to the instance, thus instance should execute command
2024/05/09 10:59:55.070267 [INFO] Engine command: (app-deploy)

2024/05/09 10:59:55.070272 [INFO] Downloading EB Application...
2024/05/09 10:59:55.070275 [INFO] Region: ap-southeast-2
2024/05/09 10:59:55.070279 [INFO] envID: e-3caxgjpcfu
2024/05/09 10:59:55.070282 [INFO] envBucket: elasticbeanstalk-ap-southeast-2-905418134427
2024/05/09 10:59:55.070286 [INFO] Using manifest file name from command request
2024/05/09 10:59:55.070373 [INFO] Manifest name is : manifest_1715252391509
2024/05/09 10:59:55.070479 [INFO] Download app version manifest
2024/05/09 10:59:55.070773 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/versions/manifest_1715252391509
2024/05/09 10:59:55.110388 [INFO] Download successful108bytes downloaded
2024/05/09 10:59:55.110540 [INFO] Trying to read and parse version manifest...
2024/05/09 10:59:55.114145 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/_versions/new_assignment/app-240509_205906069274
2024/05/09 10:59:55.261390 [INFO] Download successful34502573bytes downloaded
2024/05/09 10:59:55.261771 [INFO] Executing instruction: ElectLeader
2024/05/09 10:59:55.261778 [INFO] Running leader election for instance i-058d20c0b3bfe358b...
2024/05/09 10:59:55.261784 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/05/09 10:59:55.261801 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 8fcbc3ea-27ba-479b-b2c2-57dbee48b77d --listener-id i-058d20c0b3bfe358b --region ap-southeast-2
2024/05/09 10:59:55.644141 [INFO] Instance is Leader.
2024/05/09 10:59:55.644182 [INFO] Executing instruction: stopSqsd
2024/05/09 10:59:55.644189 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/05/09 10:59:55.644194 [INFO] Executing instruction: PreBuildEbExtension
2024/05/09 10:59:55.644198 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/05/09 10:59:55.644218 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2 --configsets Infra-EmbeddedPreBuild
2024/05/09 10:59:56.002706 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/05/09 10:59:56.002741 [INFO] Executing instruction: StageApplication
2024/05/09 10:59:56.075007 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/05/09 10:59:56.075055 [INFO] Running command /bin/sh -c /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/05/09 10:59:58.080854 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/05/09 10:59:58.223866 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/05/09 10:59:58.223896 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/05/09 10:59:58.223915 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/05/09 10:59:58.223917 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/05/09 10:59:58.223922 [INFO] Executing instruction: InstallDependency
2024/05/09 10:59:58.223926 [INFO] checking dependencies file
2024/05/09 10:59:58.223939 [INFO] Installing dependencies with requirements.txt by using Pip
2024/05/09 10:59:58.223950 [INFO] Running command /bin/sh -c /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/05/09 10:59:59.097837 [INFO] Requirement already satisfied: blinker==1.8.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 1)) (1.8.1)
Requirement already satisfied: click==8.1.7 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 2)) (8.1.7)
Requirement already satisfied: colorama==0.4.6 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 3)) (0.4.6)
Requirement already satisfied: email_validator==1.1.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 4)) (1.1.3)
Requirement already satisfied: Flask==3.0.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 5)) (3.0.3)
Requirement already satisfied: Flask-WTF==1.2.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 6)) (1.2.1)
Requirement already satisfied: Flask-Login==0.6.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 7)) (0.6.1)
Requirement already satisfied: gunicorn==22.0.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 8)) (22.0.0)
Requirement already satisfied: importlib_metadata==7.1.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 9)) (7.1.0)
Requirement already satisfied: itsdangerous==2.2.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 10)) (2.2.0)
Requirement already satisfied: Jinja2==3.1.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 11)) (3.1.3)
Requirement already satisfied: MarkupSafe==2.1.5 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 12)) (2.1.5)
Requirement already satisfied: Werkzeug==3.0.2 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 13)) (3.0.2)
Requirement already satisfied: WTForms==3.1.2 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 14)) (3.1.2)
Requirement already satisfied: zipp==3.18.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 15)) (3.18.1)
Requirement already satisfied: SQLAlchemy==2.0.29 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 16)) (2.0.29)
Requirement already satisfied: psycopg2-binary==2.9.9 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 17)) (2.9.9)
Requirement already satisfied: boto3==1.34.98 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 18)) (1.34.98)
Requirement already satisfied: dnspython>=1.15.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from email_validator==1.1.3->-r requirements.txt (line 4)) (2.6.1)
Requirement already satisfied: idna>=2.0.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from email_validator==1.1.3->-r requirements.txt (line 4)) (3.7)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from gunicorn==22.0.0->-r requirements.txt (line 8)) (24.0)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from SQLAlchemy==2.0.29->-r requirements.txt (line 16)) (3.0.3)
Requirement already satisfied: typing-extensions>=4.6.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from SQLAlchemy==2.0.29->-r requirements.txt (line 16)) (4.11.0)
Requirement already satisfied: botocore<1.35.0,>=1.34.98 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 18)) (1.34.101)
Requirement already satisfied: s3transfer<0.11.0,>=0.10.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 18)) (0.10.1)
Requirement already satisfied: jmespath<2.0.0,>=0.7.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 18)) (1.0.1)
Requirement already satisfied: urllib3<1.27,>=1.25.4 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 18)) (1.26.18)
Requirement already satisfied: python-dateutil<3.0.0,>=2.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 18)) (2.9.0.post0)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from python-dateutil<3.0.0,>=2.1->botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 18)) (1.16.0)

2024/05/09 10:59:59.097873 [INFO] WARNING: You are using pip version 21.3.1; however, version 24.0 is available.
You should consider upgrading via the '/var/app/venv/staging-LQM1lest/bin/python3.9 -m pip install --upgrade pip' command.

2024/05/09 10:59:59.097881 [INFO] Executing instruction: check Procfile
2024/05/09 10:59:59.097983 [INFO] creating default Procfile...
2024/05/09 10:59:59.098097 [INFO] Executing instruction: configure X-Ray
2024/05/09 10:59:59.098101 [INFO] X-Ray is not enabled.
2024/05/09 10:59:59.098104 [INFO] Executing instruction: configure proxy server
2024/05/09 10:59:59.145072 [INFO] Executing instruction: configure healthd specific proxy conf
2024/05/09 10:59:59.146351 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 10:59:59.219286 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/05/09 10:59:59.219315 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 10:59:59.242763 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/05/09 10:59:59.255967 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 10:59:59.277451 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/05/09 10:59:59.347528 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/05/09 10:59:59.741058 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/05/09 10:59:59.741242 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 11:00:00.332282 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 11:00:00.401947 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 11:00:00.765130 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 11:00:00.773653 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/05/09 11:00:00.788454 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/05/09 11:00:01.107368 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/05/09 11:00:01.118869 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/05/09 11:00:01.475907 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/05/09 11:00:01.475945 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 11:00:01.493622 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/05/09 11:00:01.511934 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/05/09 11:00:01.712361 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/05/09 11:00:01.713887 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/05/09 11:00:01.714938 [INFO] Executing instruction: configure log streaming
2024/05/09 11:00:01.714951 [INFO] log streaming is not enabled
2024/05/09 11:00:01.715074 [INFO] disable log stream
2024/05/09 11:00:01.715095 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/05/09 11:00:01.792798 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/05/09 11:00:01.866012 [INFO] Executing instruction: GetToggleForceRotate
2024/05/09 11:00:01.866039 [INFO] Checking if logs need forced rotation
2024/05/09 11:00:01.866080 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/09 11:00:03.644004 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/09 11:00:04.365061 [INFO] Generating rsyslog config from Procfile
2024/05/09 11:00:04.366421 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/05/09 11:00:04.922330 [INFO] Executing instruction: PostBuildEbExtension
2024/05/09 11:00:04.922441 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/05/09 11:00:04.922470 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2 --configsets Infra-EmbeddedPostBuild
2024/05/09 11:00:05.750022 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/05/09 11:00:05.750074 [INFO] Executing instruction: CleanEbExtensions
2024/05/09 11:00:05.750191 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/05/09 11:00:05.750195 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/05/09 11:00:05.750218 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/05/09 11:00:05.750233 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/05/09 11:00:05.750237 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/05/09 11:00:05.750245 [INFO] Executing instruction: stop X-Ray
2024/05/09 11:00:05.750248 [INFO] stop X-Ray ...
2024/05/09 11:00:05.750411 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/05/09 11:00:05.779476 [WARN] stopProcess Warning: process xray is not registered 
2024/05/09 11:00:05.779512 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/05/09 11:00:05.820297 [INFO] Executing instruction: stop proxy
2024/05/09 11:00:05.820334 [INFO] Running command /bin/sh -c systemctl show -p PartOf httpd.service
2024/05/09 11:00:05.851930 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/05/09 11:00:05.853724 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 11:00:05.880898 [INFO] Running command /bin/sh -c systemctl is-active nginx.service
2024/05/09 11:00:05.897157 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 11:00:05.907693 [INFO] Running command /bin/sh -c systemctl stop nginx.service
2024/05/09 11:00:06.129336 [INFO] Running command /bin/sh -c systemctl disable nginx.service
2024/05/09 11:00:06.862160 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 11:00:07.380269 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 11:00:07.393087 [INFO] Executing instruction: FlipApplication
2024/05/09 11:00:07.393113 [INFO] Fetching environment variables...
2024/05/09 11:00:07.393784 [INFO] Purge old process...
2024/05/09 11:00:07.393814 [INFO] Running command /bin/sh -c systemctl stop eb-app.target
2024/05/09 11:00:07.408075 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/05/09 11:00:07.419448 [INFO] web.service

2024/05/09 11:00:07.419473 [INFO] deregistering process: web
2024/05/09 11:00:07.419484 [INFO] Running command /bin/sh -c systemctl show -p PartOf web.service
2024/05/09 11:00:07.434481 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 11:00:07.452923 [INFO] Running command /bin/sh -c systemctl disable web.service
2024/05/09 11:00:08.117265 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2024/05/09 11:00:08.117355 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 11:00:08.644269 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 11:00:08.657910 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 11:00:08.667732 [INFO] Process web has been fully terminated
2024/05/09 11:00:08.667828 [INFO] All processes have been fully terminated
2024/05/09 11:00:08.667836 [INFO] Removing /var/app/current/ if it exists
2024/05/09 11:00:09.015785 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/05/09 11:00:09.015857 [INFO] Register application processes...
2024/05/09 11:00:09.015862 [INFO] Registering the proc: web

2024/05/09 11:00:09.015873 [INFO] Running command /bin/sh -c systemctl show -p PartOf web.service
2024/05/09 11:00:09.066726 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 11:00:09.343465 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 11:00:09.351985 [INFO] Running command /bin/sh -c systemctl is-enabled eb-app.target
2024/05/09 11:00:09.360424 [INFO] Running command /bin/sh -c systemctl enable eb-app.target
2024/05/09 11:00:09.676504 [INFO] Running command /bin/sh -c systemctl start eb-app.target
2024/05/09 11:00:09.685542 [INFO] Running command /bin/sh -c systemctl enable web.service
2024/05/09 11:00:10.001387 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/05/09 11:00:10.001432 [INFO] Running command /bin/sh -c systemctl show -p PartOf web.service
2024/05/09 11:00:10.012699 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 11:00:10.020148 [INFO] Running command /bin/sh -c systemctl start web.service
2024/05/09 11:00:10.086378 [INFO] Executing instruction: start X-Ray
2024/05/09 11:00:10.086397 [INFO] X-Ray is not enabled.
2024/05/09 11:00:10.086403 [INFO] Executing instruction: start proxy with new configuration
2024/05/09 11:00:10.086430 [INFO] Running command /bin/sh -c /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/05/09 11:00:10.113471 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2024/05/09 11:00:10.113790 [INFO] Running command /bin/sh -c cp -rp /var/proxy/staging/nginx/* /etc/nginx
2024/05/09 11:00:10.117864 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 11:00:10.134579 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 11:00:10.559732 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 11:00:10.574388 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 11:00:10.591517 [INFO] Running command /bin/sh -c systemctl is-active nginx.service
2024/05/09 11:00:10.603431 [INFO] Running command /bin/sh -c systemctl start nginx.service
2024/05/09 11:00:10.737156 [INFO] Executing instruction: configureSqsd
2024/05/09 11:00:10.737175 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2024/05/09 11:00:10.737179 [INFO] Executing instruction: startSqsd
2024/05/09 11:00:10.737182 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2024/05/09 11:00:10.737186 [INFO] Executing instruction: Track pids in healthd
2024/05/09 11:00:10.737190 [INFO] This is an enhanced health env...
2024/05/09 11:00:10.737205 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2024/05/09 11:00:10.754172 [INFO] nginx.service cfn-hup.service healthd.service

2024/05/09 11:00:10.754206 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/05/09 11:00:10.768028 [INFO] web.service

2024/05/09 11:00:10.768465 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2024/05/09 11:00:10.768558 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2024/05/09 11:00:10.768577 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2024/05/09 11:00:10.768580 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2024/05/09 11:00:10.768587 [INFO] Executing cleanup logic
2024/05/09 11:00:10.768740 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment successfully generated a 'Procfile'.","timestamp":1715252399098,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1715252410768,"severity":"INFO"}]}]}

2024/05/09 11:00:10.768895 [INFO] Platform Engine finished execution on command: app-deploy

2024/05/09 11:02:03.183045 [INFO] Starting...
2024/05/09 11:02:03.183119 [INFO] Starting EBPlatform-PlatformEngine
2024/05/09 11:02:03.183142 [INFO] reading event message file
2024/05/09 11:02:03.183511 [INFO] Engine received EB command cfn-hup-exec

2024/05/09 11:02:03.274190 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/09 11:02:03.733604 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/09 11:02:04.126292 [INFO] checking whether command app-deploy is applicable to this instance...
2024/05/09 11:02:04.126308 [INFO] this command is applicable to the instance, thus instance should execute command
2024/05/09 11:02:04.126311 [INFO] Engine command: (app-deploy)

2024/05/09 11:02:04.126314 [INFO] Downloading EB Application...
2024/05/09 11:02:04.126316 [INFO] Region: ap-southeast-2
2024/05/09 11:02:04.126319 [INFO] envID: e-3caxgjpcfu
2024/05/09 11:02:04.126321 [INFO] envBucket: elasticbeanstalk-ap-southeast-2-905418134427
2024/05/09 11:02:04.126323 [INFO] Using manifest file name from command request
2024/05/09 11:02:04.126329 [INFO] Manifest name is : manifest_1715252520694
2024/05/09 11:02:04.126331 [INFO] Download app version manifest
2024/05/09 11:02:04.126693 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/versions/manifest_1715252520694
2024/05/09 11:02:04.169486 [INFO] Download successful108bytes downloaded
2024/05/09 11:02:04.169629 [INFO] Trying to read and parse version manifest...
2024/05/09 11:02:04.175056 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/_versions/new_assignment/app-240509_210119339989
2024/05/09 11:02:04.340225 [INFO] Download successful34502603bytes downloaded
2024/05/09 11:02:04.340534 [INFO] Executing instruction: ElectLeader
2024/05/09 11:02:04.340542 [INFO] Running leader election for instance i-058d20c0b3bfe358b...
2024/05/09 11:02:04.340544 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/05/09 11:02:04.340559 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id ba7ac538-06f5-471d-8e85-4b59f1b3ae81 --listener-id i-058d20c0b3bfe358b --region ap-southeast-2
2024/05/09 11:02:04.787422 [INFO] Instance is Leader.
2024/05/09 11:02:04.787482 [INFO] Executing instruction: stopSqsd
2024/05/09 11:02:04.787489 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/05/09 11:02:04.787492 [INFO] Executing instruction: PreBuildEbExtension
2024/05/09 11:02:04.787495 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/05/09 11:02:04.787509 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2 --configsets Infra-EmbeddedPreBuild
2024/05/09 11:02:05.141957 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/05/09 11:02:05.141983 [INFO] Executing instruction: StageApplication
2024/05/09 11:02:05.201680 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/05/09 11:02:05.201755 [INFO] Running command /bin/sh -c /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/05/09 11:02:06.602942 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/05/09 11:02:06.717817 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/05/09 11:02:06.717849 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/05/09 11:02:06.717869 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/05/09 11:02:06.717872 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/05/09 11:02:06.717877 [INFO] Executing instruction: InstallDependency
2024/05/09 11:02:06.717881 [INFO] checking dependencies file
2024/05/09 11:02:06.717893 [INFO] Installing dependencies with requirements.txt by using Pip
2024/05/09 11:02:06.717906 [INFO] Running command /bin/sh -c /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/05/09 11:02:07.379205 [INFO] Requirement already satisfied: blinker==1.8.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 1)) (1.8.1)
Requirement already satisfied: click==8.1.7 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 2)) (8.1.7)
Requirement already satisfied: colorama==0.4.6 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 3)) (0.4.6)
Requirement already satisfied: email_validator==1.1.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 4)) (1.1.3)
Requirement already satisfied: Flask==3.0.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 5)) (3.0.3)
Requirement already satisfied: Flask-WTF==1.2.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 6)) (1.2.1)
Requirement already satisfied: Flask-Login==0.6.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 7)) (0.6.1)
Requirement already satisfied: gunicorn==22.0.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 8)) (22.0.0)
Requirement already satisfied: importlib_metadata==7.1.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 9)) (7.1.0)
Requirement already satisfied: itsdangerous==2.2.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 10)) (2.2.0)
Requirement already satisfied: Jinja2==3.1.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 11)) (3.1.3)
Requirement already satisfied: MarkupSafe==2.1.5 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 12)) (2.1.5)
Requirement already satisfied: Werkzeug==3.0.2 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 13)) (3.0.2)
Requirement already satisfied: WTForms==3.1.2 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 14)) (3.1.2)
Requirement already satisfied: zipp==3.18.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 15)) (3.18.1)
Requirement already satisfied: SQLAlchemy==2.0.29 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 16)) (2.0.29)
Requirement already satisfied: psycopg2-binary==2.9.9 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 17)) (2.9.9)
Requirement already satisfied: boto3==1.34.98 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 18)) (1.34.98)
Requirement already satisfied: idna>=2.0.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from email_validator==1.1.3->-r requirements.txt (line 4)) (3.7)
Requirement already satisfied: dnspython>=1.15.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from email_validator==1.1.3->-r requirements.txt (line 4)) (2.6.1)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from gunicorn==22.0.0->-r requirements.txt (line 8)) (24.0)
Requirement already satisfied: typing-extensions>=4.6.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from SQLAlchemy==2.0.29->-r requirements.txt (line 16)) (4.11.0)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from SQLAlchemy==2.0.29->-r requirements.txt (line 16)) (3.0.3)
Requirement already satisfied: botocore<1.35.0,>=1.34.98 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 18)) (1.34.101)
Requirement already satisfied: jmespath<2.0.0,>=0.7.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 18)) (1.0.1)
Requirement already satisfied: s3transfer<0.11.0,>=0.10.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 18)) (0.10.1)
Requirement already satisfied: urllib3<1.27,>=1.25.4 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 18)) (1.26.18)
Requirement already satisfied: python-dateutil<3.0.0,>=2.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 18)) (2.9.0.post0)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from python-dateutil<3.0.0,>=2.1->botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 18)) (1.16.0)

2024/05/09 11:02:07.379237 [INFO] WARNING: You are using pip version 21.3.1; however, version 24.0 is available.
You should consider upgrading via the '/var/app/venv/staging-LQM1lest/bin/python3.9 -m pip install --upgrade pip' command.

2024/05/09 11:02:07.379243 [INFO] Executing instruction: check Procfile
2024/05/09 11:02:07.379293 [INFO] creating default Procfile...
2024/05/09 11:02:07.379604 [INFO] Executing instruction: configure X-Ray
2024/05/09 11:02:07.379610 [INFO] X-Ray is not enabled.
2024/05/09 11:02:07.379614 [INFO] Executing instruction: configure proxy server
2024/05/09 11:02:07.417198 [INFO] Executing instruction: configure healthd specific proxy conf
2024/05/09 11:02:07.418489 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 11:02:07.505925 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/05/09 11:02:07.505961 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 11:02:07.521507 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/05/09 11:02:07.531547 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 11:02:07.544237 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/05/09 11:02:07.604878 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/05/09 11:02:07.934295 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/05/09 11:02:07.934874 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 11:02:08.220394 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 11:02:08.229260 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 11:02:08.613095 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 11:02:08.623270 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/05/09 11:02:08.632323 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/05/09 11:02:08.958068 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/05/09 11:02:08.968721 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/05/09 11:02:09.300774 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/05/09 11:02:09.300809 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 11:02:09.313171 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/05/09 11:02:09.321866 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/05/09 11:02:09.405567 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/05/09 11:02:09.406900 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/05/09 11:02:09.407788 [INFO] Executing instruction: configure log streaming
2024/05/09 11:02:09.407797 [INFO] log streaming is not enabled
2024/05/09 11:02:09.407801 [INFO] disable log stream
2024/05/09 11:02:09.407816 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/05/09 11:02:09.433459 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/05/09 11:02:09.457580 [INFO] Executing instruction: GetToggleForceRotate
2024/05/09 11:02:09.457604 [INFO] Checking if logs need forced rotation
2024/05/09 11:02:09.457624 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/09 11:02:10.057469 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/09 11:02:10.447812 [INFO] Generating rsyslog config from Procfile
2024/05/09 11:02:10.449138 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/05/09 11:02:10.527767 [INFO] Executing instruction: PostBuildEbExtension
2024/05/09 11:02:10.527790 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/05/09 11:02:10.527822 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2 --configsets Infra-EmbeddedPostBuild
2024/05/09 11:02:11.002248 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/05/09 11:02:11.002282 [INFO] Executing instruction: CleanEbExtensions
2024/05/09 11:02:11.002310 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/05/09 11:02:11.002314 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/05/09 11:02:11.002337 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/05/09 11:02:11.002354 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/05/09 11:02:11.002357 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/05/09 11:02:11.002363 [INFO] Executing instruction: stop X-Ray
2024/05/09 11:02:11.002366 [INFO] stop X-Ray ...
2024/05/09 11:02:11.002379 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/05/09 11:02:11.016379 [WARN] stopProcess Warning: process xray is not registered 
2024/05/09 11:02:11.016411 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/05/09 11:02:11.032992 [INFO] Executing instruction: stop proxy
2024/05/09 11:02:11.033022 [INFO] Running command /bin/sh -c systemctl show -p PartOf httpd.service
2024/05/09 11:02:11.049073 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/05/09 11:02:11.049126 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 11:02:11.064016 [INFO] Running command /bin/sh -c systemctl is-active nginx.service
2024/05/09 11:02:11.072369 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 11:02:11.081424 [INFO] Running command /bin/sh -c systemctl stop nginx.service
2024/05/09 11:02:16.412823 [INFO] Running command /bin/sh -c systemctl disable nginx.service
2024/05/09 11:02:16.806678 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 11:02:17.159024 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 11:02:17.182791 [INFO] Executing instruction: FlipApplication
2024/05/09 11:02:17.182815 [INFO] Fetching environment variables...
2024/05/09 11:02:17.183073 [INFO] Purge old process...
2024/05/09 11:02:17.183099 [INFO] Running command /bin/sh -c systemctl stop eb-app.target
2024/05/09 11:02:17.210358 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/05/09 11:02:17.225107 [INFO] web.service

2024/05/09 11:02:17.225156 [INFO] deregistering process: web
2024/05/09 11:02:17.225169 [INFO] Running command /bin/sh -c systemctl show -p PartOf web.service
2024/05/09 11:02:17.239210 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 11:02:17.249080 [INFO] Running command /bin/sh -c systemctl disable web.service
2024/05/09 11:02:17.672394 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2024/05/09 11:02:17.672537 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 11:02:18.030518 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 11:02:18.040008 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 11:02:18.047613 [INFO] Process web has been fully terminated
2024/05/09 11:02:18.047628 [INFO] All processes have been fully terminated
2024/05/09 11:02:18.047633 [INFO] Removing /var/app/current/ if it exists
2024/05/09 11:02:18.407994 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/05/09 11:02:18.408023 [INFO] Register application processes...
2024/05/09 11:02:18.408028 [INFO] Registering the proc: web

2024/05/09 11:02:18.408041 [INFO] Running command /bin/sh -c systemctl show -p PartOf web.service
2024/05/09 11:02:18.464988 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 11:02:18.839621 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 11:02:18.850349 [INFO] Running command /bin/sh -c systemctl is-enabled eb-app.target
2024/05/09 11:02:18.860810 [INFO] Running command /bin/sh -c systemctl enable eb-app.target
2024/05/09 11:02:19.173292 [INFO] Running command /bin/sh -c systemctl start eb-app.target
2024/05/09 11:02:19.182773 [INFO] Running command /bin/sh -c systemctl enable web.service
2024/05/09 11:02:19.555833 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/05/09 11:02:19.555862 [INFO] Running command /bin/sh -c systemctl show -p PartOf web.service
2024/05/09 11:02:19.568756 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 11:02:19.577507 [INFO] Running command /bin/sh -c systemctl start web.service
2024/05/09 11:02:19.639131 [INFO] Executing instruction: start X-Ray
2024/05/09 11:02:19.639153 [INFO] X-Ray is not enabled.
2024/05/09 11:02:19.639158 [INFO] Executing instruction: start proxy with new configuration
2024/05/09 11:02:19.639183 [INFO] Running command /bin/sh -c /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/05/09 11:02:19.665951 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2024/05/09 11:02:19.666272 [INFO] Running command /bin/sh -c cp -rp /var/proxy/staging/nginx/* /etc/nginx
2024/05/09 11:02:19.670681 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 11:02:19.698766 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 11:02:20.227257 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 11:02:20.249647 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 11:02:20.273968 [INFO] Running command /bin/sh -c systemctl is-active nginx.service
2024/05/09 11:02:20.300431 [INFO] Running command /bin/sh -c systemctl start nginx.service
2024/05/09 11:02:20.499212 [INFO] Executing instruction: configureSqsd
2024/05/09 11:02:20.499233 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2024/05/09 11:02:20.499237 [INFO] Executing instruction: startSqsd
2024/05/09 11:02:20.499241 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2024/05/09 11:02:20.499245 [INFO] Executing instruction: Track pids in healthd
2024/05/09 11:02:20.499249 [INFO] This is an enhanced health env...
2024/05/09 11:02:20.499263 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2024/05/09 11:02:20.516962 [INFO] nginx.service healthd.service cfn-hup.service

2024/05/09 11:02:20.516999 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/05/09 11:02:20.534574 [INFO] web.service

2024/05/09 11:02:20.534885 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2024/05/09 11:02:20.534979 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2024/05/09 11:02:20.535000 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2024/05/09 11:02:20.535004 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2024/05/09 11:02:20.535011 [INFO] Executing cleanup logic
2024/05/09 11:02:20.535229 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment successfully generated a 'Procfile'.","timestamp":1715252527379,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1715252540535,"severity":"INFO"}]}]}

2024/05/09 11:02:20.535404 [INFO] Platform Engine finished execution on command: app-deploy

2024/05/09 11:08:45.718388 [INFO] Starting...
2024/05/09 11:08:45.718442 [INFO] Starting EBPlatform-PlatformEngine
2024/05/09 11:08:45.718463 [INFO] reading event message file
2024/05/09 11:08:45.718620 [INFO] Engine received EB command cfn-hup-exec

2024/05/09 11:08:45.812515 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/09 11:08:46.215762 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/09 11:08:46.651720 [INFO] checking whether command app-deploy is applicable to this instance...
2024/05/09 11:08:46.651732 [INFO] this command is applicable to the instance, thus instance should execute command
2024/05/09 11:08:46.651735 [INFO] Engine command: (app-deploy)

2024/05/09 11:08:46.651739 [INFO] Downloading EB Application...
2024/05/09 11:08:46.651741 [INFO] Region: ap-southeast-2
2024/05/09 11:08:46.651744 [INFO] envID: e-3caxgjpcfu
2024/05/09 11:08:46.651746 [INFO] envBucket: elasticbeanstalk-ap-southeast-2-905418134427
2024/05/09 11:08:46.651748 [INFO] Using manifest file name from command request
2024/05/09 11:08:46.651756 [INFO] Manifest name is : manifest_1715252923262
2024/05/09 11:08:46.651757 [INFO] Download app version manifest
2024/05/09 11:08:46.651894 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/versions/manifest_1715252923262
2024/05/09 11:08:46.690433 [INFO] Download successful108bytes downloaded
2024/05/09 11:08:46.690570 [INFO] Trying to read and parse version manifest...
2024/05/09 11:08:46.693624 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/_versions/new_assignment/app-240509_210759591699
2024/05/09 11:08:46.856935 [INFO] Download successful34502710bytes downloaded
2024/05/09 11:08:46.857358 [INFO] Executing instruction: ElectLeader
2024/05/09 11:08:46.857366 [INFO] Running leader election for instance i-058d20c0b3bfe358b...
2024/05/09 11:08:46.857368 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/05/09 11:08:46.857385 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 837894e9-ab92-4dcc-9e13-2e03ec56fa60 --listener-id i-058d20c0b3bfe358b --region ap-southeast-2
2024/05/09 11:08:47.314092 [INFO] Instance is Leader.
2024/05/09 11:08:47.314150 [INFO] Executing instruction: stopSqsd
2024/05/09 11:08:47.314156 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/05/09 11:08:47.314168 [INFO] Executing instruction: PreBuildEbExtension
2024/05/09 11:08:47.314171 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/05/09 11:08:47.314183 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2 --configsets Infra-EmbeddedPreBuild
2024/05/09 11:08:47.723271 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/05/09 11:08:47.723306 [INFO] Executing instruction: StageApplication
2024/05/09 11:08:47.797002 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/05/09 11:08:47.797048 [INFO] Running command /bin/sh -c /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/05/09 11:08:49.646076 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/05/09 11:08:49.793623 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/05/09 11:08:49.793662 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/05/09 11:08:49.793685 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/05/09 11:08:49.793688 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/05/09 11:08:49.793695 [INFO] Executing instruction: InstallDependency
2024/05/09 11:08:49.793701 [INFO] checking dependencies file
2024/05/09 11:08:49.793716 [INFO] Installing dependencies with requirements.txt by using Pip
2024/05/09 11:08:49.793729 [INFO] Running command /bin/sh -c /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/05/09 11:08:50.547887 [INFO] Requirement already satisfied: blinker==1.8.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 1)) (1.8.1)
Requirement already satisfied: click==8.1.7 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 2)) (8.1.7)
Requirement already satisfied: colorama==0.4.6 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 3)) (0.4.6)
Requirement already satisfied: email_validator==1.1.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 4)) (1.1.3)
Requirement already satisfied: Flask==3.0.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 5)) (3.0.3)
Requirement already satisfied: Flask-WTF==1.2.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 6)) (1.2.1)
Requirement already satisfied: Flask-Login==0.6.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 7)) (0.6.1)
Requirement already satisfied: gunicorn==22.0.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 8)) (22.0.0)
Requirement already satisfied: importlib_metadata==7.1.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 9)) (7.1.0)
Requirement already satisfied: itsdangerous==2.2.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 10)) (2.2.0)
Requirement already satisfied: Jinja2==3.1.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 11)) (3.1.3)
Requirement already satisfied: MarkupSafe==2.1.5 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 12)) (2.1.5)
Requirement already satisfied: Werkzeug==3.0.2 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 13)) (3.0.2)
Requirement already satisfied: WTForms==3.1.2 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 14)) (3.1.2)
Requirement already satisfied: zipp==3.18.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 15)) (3.18.1)
Requirement already satisfied: SQLAlchemy==2.0.29 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 16)) (2.0.29)
Requirement already satisfied: psycopg2-binary==2.9.9 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 17)) (2.9.9)
Requirement already satisfied: boto3==1.34.98 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 18)) (1.34.98)
Requirement already satisfied: dnspython>=1.15.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from email_validator==1.1.3->-r requirements.txt (line 4)) (2.6.1)
Requirement already satisfied: idna>=2.0.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from email_validator==1.1.3->-r requirements.txt (line 4)) (3.7)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from gunicorn==22.0.0->-r requirements.txt (line 8)) (24.0)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from SQLAlchemy==2.0.29->-r requirements.txt (line 16)) (3.0.3)
Requirement already satisfied: typing-extensions>=4.6.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from SQLAlchemy==2.0.29->-r requirements.txt (line 16)) (4.11.0)
Requirement already satisfied: botocore<1.35.0,>=1.34.98 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 18)) (1.34.101)
Requirement already satisfied: s3transfer<0.11.0,>=0.10.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 18)) (0.10.1)
Requirement already satisfied: jmespath<2.0.0,>=0.7.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 18)) (1.0.1)
Requirement already satisfied: urllib3<1.27,>=1.25.4 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 18)) (1.26.18)
Requirement already satisfied: python-dateutil<3.0.0,>=2.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 18)) (2.9.0.post0)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from python-dateutil<3.0.0,>=2.1->botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 18)) (1.16.0)

2024/05/09 11:08:50.547918 [INFO] WARNING: You are using pip version 21.3.1; however, version 24.0 is available.
You should consider upgrading via the '/var/app/venv/staging-LQM1lest/bin/python3.9 -m pip install --upgrade pip' command.

2024/05/09 11:08:50.547924 [INFO] Executing instruction: check Procfile
2024/05/09 11:08:50.547973 [INFO] creating default Procfile...
2024/05/09 11:08:50.548077 [INFO] Executing instruction: configure X-Ray
2024/05/09 11:08:50.548081 [INFO] X-Ray is not enabled.
2024/05/09 11:08:50.548084 [INFO] Executing instruction: configure proxy server
2024/05/09 11:08:50.590662 [INFO] Executing instruction: configure healthd specific proxy conf
2024/05/09 11:08:50.592170 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 11:08:50.603456 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/05/09 11:08:50.603488 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 11:08:50.613862 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/05/09 11:08:50.621982 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 11:08:50.631170 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/05/09 11:08:50.694397 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/05/09 11:08:50.969210 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/05/09 11:08:50.969560 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 11:08:51.370877 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 11:08:51.445106 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 11:08:51.802102 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 11:08:51.813787 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/05/09 11:08:51.822255 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/05/09 11:08:52.209800 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/05/09 11:08:52.227522 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/05/09 11:08:52.585388 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/05/09 11:08:52.585423 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 11:08:52.598357 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/05/09 11:08:52.607612 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/05/09 11:08:52.677644 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/05/09 11:08:52.678437 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/05/09 11:08:52.679299 [INFO] Executing instruction: configure log streaming
2024/05/09 11:08:52.679307 [INFO] log streaming is not enabled
2024/05/09 11:08:52.679309 [INFO] disable log stream
2024/05/09 11:08:52.679320 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/05/09 11:08:52.696207 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/05/09 11:08:52.718369 [INFO] Executing instruction: GetToggleForceRotate
2024/05/09 11:08:52.718393 [INFO] Checking if logs need forced rotation
2024/05/09 11:08:52.718436 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/09 11:08:53.243715 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/09 11:08:53.685810 [INFO] Generating rsyslog config from Procfile
2024/05/09 11:08:53.687267 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/05/09 11:08:54.156862 [INFO] Executing instruction: PostBuildEbExtension
2024/05/09 11:08:54.156895 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/05/09 11:08:54.156909 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2 --configsets Infra-EmbeddedPostBuild
2024/05/09 11:08:54.593786 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/05/09 11:08:54.593808 [INFO] Executing instruction: CleanEbExtensions
2024/05/09 11:08:54.593837 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/05/09 11:08:54.593841 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/05/09 11:08:54.593865 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/05/09 11:08:54.593879 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/05/09 11:08:54.593882 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/05/09 11:08:54.593886 [INFO] Executing instruction: stop X-Ray
2024/05/09 11:08:54.593889 [INFO] stop X-Ray ...
2024/05/09 11:08:54.593899 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/05/09 11:08:54.607855 [WARN] stopProcess Warning: process xray is not registered 
2024/05/09 11:08:54.607890 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/05/09 11:08:54.629200 [INFO] Executing instruction: stop proxy
2024/05/09 11:08:54.629238 [INFO] Running command /bin/sh -c systemctl show -p PartOf httpd.service
2024/05/09 11:08:54.646960 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/05/09 11:08:54.647003 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 11:08:54.661506 [INFO] Running command /bin/sh -c systemctl is-active nginx.service
2024/05/09 11:08:54.670857 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 11:08:54.680958 [INFO] Running command /bin/sh -c systemctl stop nginx.service
2024/05/09 11:08:54.849858 [INFO] Running command /bin/sh -c systemctl disable nginx.service
2024/05/09 11:08:55.212187 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 11:08:55.524033 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 11:08:55.532942 [INFO] Executing instruction: FlipApplication
2024/05/09 11:08:55.532978 [INFO] Fetching environment variables...
2024/05/09 11:08:55.533379 [INFO] Purge old process...
2024/05/09 11:08:55.533401 [INFO] Running command /bin/sh -c systemctl stop eb-app.target
2024/05/09 11:08:55.544195 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/05/09 11:08:55.554362 [INFO] web.service

2024/05/09 11:08:55.554396 [INFO] deregistering process: web
2024/05/09 11:08:55.554408 [INFO] Running command /bin/sh -c systemctl show -p PartOf web.service
2024/05/09 11:08:55.568812 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 11:08:55.577226 [INFO] Running command /bin/sh -c systemctl disable web.service
2024/05/09 11:08:55.949521 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2024/05/09 11:08:55.949599 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 11:08:56.404227 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 11:08:56.414118 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 11:08:56.421609 [INFO] Process web has been fully terminated
2024/05/09 11:08:56.421631 [INFO] All processes have been fully terminated
2024/05/09 11:08:56.421635 [INFO] Removing /var/app/current/ if it exists
2024/05/09 11:08:56.732973 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/05/09 11:08:56.733001 [INFO] Register application processes...
2024/05/09 11:08:56.733006 [INFO] Registering the proc: web

2024/05/09 11:08:56.733019 [INFO] Running command /bin/sh -c systemctl show -p PartOf web.service
2024/05/09 11:08:56.781868 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 11:08:57.057594 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 11:08:57.066244 [INFO] Running command /bin/sh -c systemctl is-enabled eb-app.target
2024/05/09 11:08:57.075429 [INFO] Running command /bin/sh -c systemctl enable eb-app.target
2024/05/09 11:08:57.474603 [INFO] Running command /bin/sh -c systemctl start eb-app.target
2024/05/09 11:08:57.490493 [INFO] Running command /bin/sh -c systemctl enable web.service
2024/05/09 11:08:57.805617 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/05/09 11:08:57.805651 [INFO] Running command /bin/sh -c systemctl show -p PartOf web.service
2024/05/09 11:08:57.818850 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 11:08:57.826527 [INFO] Running command /bin/sh -c systemctl start web.service
2024/05/09 11:08:57.911660 [INFO] Executing instruction: start X-Ray
2024/05/09 11:08:57.911681 [INFO] X-Ray is not enabled.
2024/05/09 11:08:57.911686 [INFO] Executing instruction: start proxy with new configuration
2024/05/09 11:08:57.911711 [INFO] Running command /bin/sh -c /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/05/09 11:08:57.942122 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2024/05/09 11:08:57.942499 [INFO] Running command /bin/sh -c cp -rp /var/proxy/staging/nginx/* /etc/nginx
2024/05/09 11:08:57.947256 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 11:08:57.971831 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 11:08:58.452195 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 11:08:58.470287 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 11:08:58.500443 [INFO] Running command /bin/sh -c systemctl is-active nginx.service
2024/05/09 11:08:58.517549 [INFO] Running command /bin/sh -c systemctl start nginx.service
2024/05/09 11:08:58.657146 [INFO] Executing instruction: configureSqsd
2024/05/09 11:08:58.657165 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2024/05/09 11:08:58.657169 [INFO] Executing instruction: startSqsd
2024/05/09 11:08:58.657172 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2024/05/09 11:08:58.657176 [INFO] Executing instruction: Track pids in healthd
2024/05/09 11:08:58.657180 [INFO] This is an enhanced health env...
2024/05/09 11:08:58.657196 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2024/05/09 11:08:58.674923 [INFO] cfn-hup.service healthd.service nginx.service

2024/05/09 11:08:58.674960 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/05/09 11:08:58.697827 [INFO] web.service

2024/05/09 11:08:58.698350 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2024/05/09 11:08:58.698377 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2024/05/09 11:08:58.698395 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2024/05/09 11:08:58.698398 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2024/05/09 11:08:58.698404 [INFO] Executing cleanup logic
2024/05/09 11:08:58.698609 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment successfully generated a 'Procfile'.","timestamp":1715252930548,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1715252938698,"severity":"INFO"}]}]}

2024/05/09 11:08:58.698860 [INFO] Platform Engine finished execution on command: app-deploy

2024/05/09 11:15:42.351371 [INFO] Starting...
2024/05/09 11:15:42.351417 [INFO] Starting EBPlatform-PlatformEngine
2024/05/09 11:15:42.351438 [INFO] reading event message file
2024/05/09 11:15:42.351601 [INFO] Engine received EB command cfn-hup-exec

2024/05/09 11:15:42.424405 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/09 11:15:42.835464 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/09 11:15:43.202157 [INFO] checking whether command app-deploy is applicable to this instance...
2024/05/09 11:15:43.202172 [INFO] this command is applicable to the instance, thus instance should execute command
2024/05/09 11:15:43.202176 [INFO] Engine command: (app-deploy)

2024/05/09 11:15:43.202182 [INFO] Downloading EB Application...
2024/05/09 11:15:43.202185 [INFO] Region: ap-southeast-2
2024/05/09 11:15:43.202188 [INFO] envID: e-3caxgjpcfu
2024/05/09 11:15:43.202192 [INFO] envBucket: elasticbeanstalk-ap-southeast-2-905418134427
2024/05/09 11:15:43.202194 [INFO] Using manifest file name from command request
2024/05/09 11:15:43.202205 [INFO] Manifest name is : manifest_1715253340084
2024/05/09 11:15:43.202208 [INFO] Download app version manifest
2024/05/09 11:15:43.202439 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/versions/manifest_1715253340084
2024/05/09 11:15:43.240108 [INFO] Download successful108bytes downloaded
2024/05/09 11:15:43.240243 [INFO] Trying to read and parse version manifest...
2024/05/09 11:15:43.242988 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/_versions/new_assignment/app-240509_211457420312
2024/05/09 11:15:43.391138 [INFO] Download successful34502881bytes downloaded
2024/05/09 11:15:43.391340 [INFO] Executing instruction: ElectLeader
2024/05/09 11:15:43.391347 [INFO] Running leader election for instance i-058d20c0b3bfe358b...
2024/05/09 11:15:43.391349 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/05/09 11:15:43.391365 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id ec9d4808-8cce-4465-a826-53381521c24d --listener-id i-058d20c0b3bfe358b --region ap-southeast-2
2024/05/09 11:15:43.771621 [INFO] Instance is Leader.
2024/05/09 11:15:43.771660 [INFO] Executing instruction: stopSqsd
2024/05/09 11:15:43.771664 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/05/09 11:15:43.771667 [INFO] Executing instruction: PreBuildEbExtension
2024/05/09 11:15:43.771670 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/05/09 11:15:43.771683 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2 --configsets Infra-EmbeddedPreBuild
2024/05/09 11:15:44.234701 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/05/09 11:15:44.234724 [INFO] Executing instruction: StageApplication
2024/05/09 11:15:44.288059 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/05/09 11:15:44.288129 [INFO] Running command /bin/sh -c /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/05/09 11:15:45.829390 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/05/09 11:15:45.980095 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/05/09 11:15:45.980124 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/05/09 11:15:45.980142 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/05/09 11:15:45.980144 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/05/09 11:15:45.980149 [INFO] Executing instruction: InstallDependency
2024/05/09 11:15:45.980153 [INFO] checking dependencies file
2024/05/09 11:15:45.980165 [INFO] Installing dependencies with requirements.txt by using Pip
2024/05/09 11:15:45.980176 [INFO] Running command /bin/sh -c /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/05/09 11:15:46.748560 [INFO] Requirement already satisfied: blinker==1.8.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 1)) (1.8.1)
Requirement already satisfied: click==8.1.7 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 2)) (8.1.7)
Requirement already satisfied: colorama==0.4.6 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 3)) (0.4.6)
Requirement already satisfied: email_validator==1.1.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 4)) (1.1.3)
Requirement already satisfied: Flask==3.0.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 5)) (3.0.3)
Requirement already satisfied: Flask-WTF==1.2.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 6)) (1.2.1)
Requirement already satisfied: Flask-Login==0.6.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 7)) (0.6.1)
Requirement already satisfied: gunicorn==22.0.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 8)) (22.0.0)
Requirement already satisfied: importlib_metadata==7.1.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 9)) (7.1.0)
Requirement already satisfied: itsdangerous==2.2.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 10)) (2.2.0)
Requirement already satisfied: Jinja2==3.1.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 11)) (3.1.3)
Requirement already satisfied: MarkupSafe==2.1.5 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 12)) (2.1.5)
Requirement already satisfied: Werkzeug==3.0.2 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 13)) (3.0.2)
Requirement already satisfied: WTForms==3.1.2 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 14)) (3.1.2)
Requirement already satisfied: zipp==3.18.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 15)) (3.18.1)
Requirement already satisfied: SQLAlchemy==2.0.29 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 16)) (2.0.29)
Requirement already satisfied: psycopg2-binary==2.9.9 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 17)) (2.9.9)
Requirement already satisfied: boto3==1.34.98 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 18)) (1.34.98)
Requirement already satisfied: idna>=2.0.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from email_validator==1.1.3->-r requirements.txt (line 4)) (3.7)
Requirement already satisfied: dnspython>=1.15.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from email_validator==1.1.3->-r requirements.txt (line 4)) (2.6.1)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from gunicorn==22.0.0->-r requirements.txt (line 8)) (24.0)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from SQLAlchemy==2.0.29->-r requirements.txt (line 16)) (3.0.3)
Requirement already satisfied: typing-extensions>=4.6.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from SQLAlchemy==2.0.29->-r requirements.txt (line 16)) (4.11.0)
Requirement already satisfied: s3transfer<0.11.0,>=0.10.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 18)) (0.10.1)
Requirement already satisfied: jmespath<2.0.0,>=0.7.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 18)) (1.0.1)
Requirement already satisfied: botocore<1.35.0,>=1.34.98 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 18)) (1.34.101)
Requirement already satisfied: urllib3<1.27,>=1.25.4 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 18)) (1.26.18)
Requirement already satisfied: python-dateutil<3.0.0,>=2.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 18)) (2.9.0.post0)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from python-dateutil<3.0.0,>=2.1->botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 18)) (1.16.0)

2024/05/09 11:15:46.748600 [INFO] WARNING: You are using pip version 21.3.1; however, version 24.0 is available.
You should consider upgrading via the '/var/app/venv/staging-LQM1lest/bin/python3.9 -m pip install --upgrade pip' command.

2024/05/09 11:15:46.748608 [INFO] Executing instruction: check Procfile
2024/05/09 11:15:46.748840 [INFO] creating default Procfile...
2024/05/09 11:15:46.748997 [INFO] Executing instruction: configure X-Ray
2024/05/09 11:15:46.749003 [INFO] X-Ray is not enabled.
2024/05/09 11:15:46.749011 [INFO] Executing instruction: configure proxy server
2024/05/09 11:15:46.789281 [INFO] Executing instruction: configure healthd specific proxy conf
2024/05/09 11:15:46.790523 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 11:15:46.858765 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/05/09 11:15:46.858800 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 11:15:46.874681 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/05/09 11:15:46.887200 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 11:15:46.904180 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/05/09 11:15:46.987193 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/05/09 11:15:47.300198 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/05/09 11:15:47.300367 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 11:15:47.643734 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 11:15:47.654516 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 11:15:47.955065 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 11:15:47.965888 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/05/09 11:15:48.002294 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/05/09 11:15:48.355618 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/05/09 11:15:48.367559 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/05/09 11:15:48.745560 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/05/09 11:15:48.745598 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 11:15:48.756340 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/05/09 11:15:48.764433 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/05/09 11:15:48.814336 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/05/09 11:15:48.815131 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/05/09 11:15:48.815801 [INFO] Executing instruction: configure log streaming
2024/05/09 11:15:48.815811 [INFO] log streaming is not enabled
2024/05/09 11:15:48.815815 [INFO] disable log stream
2024/05/09 11:15:48.815829 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/05/09 11:15:48.835119 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/05/09 11:15:48.852951 [INFO] Executing instruction: GetToggleForceRotate
2024/05/09 11:15:48.852975 [INFO] Checking if logs need forced rotation
2024/05/09 11:15:48.853012 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/09 11:15:49.287431 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/09 11:15:49.791344 [INFO] Generating rsyslog config from Procfile
2024/05/09 11:15:49.793179 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/05/09 11:15:50.138713 [INFO] Executing instruction: PostBuildEbExtension
2024/05/09 11:15:50.138735 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/05/09 11:15:50.138754 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2 --configsets Infra-EmbeddedPostBuild
2024/05/09 11:15:50.578849 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/05/09 11:15:50.578883 [INFO] Executing instruction: CleanEbExtensions
2024/05/09 11:15:50.578909 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/05/09 11:15:50.578912 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/05/09 11:15:50.578936 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/05/09 11:15:50.578952 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/05/09 11:15:50.578960 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/05/09 11:15:50.578966 [INFO] Executing instruction: stop X-Ray
2024/05/09 11:15:50.578970 [INFO] stop X-Ray ...
2024/05/09 11:15:50.578983 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/05/09 11:15:50.602122 [WARN] stopProcess Warning: process xray is not registered 
2024/05/09 11:15:50.602152 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/05/09 11:15:50.622825 [INFO] Executing instruction: stop proxy
2024/05/09 11:15:50.622854 [INFO] Running command /bin/sh -c systemctl show -p PartOf httpd.service
2024/05/09 11:15:50.643170 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/05/09 11:15:50.643199 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 11:15:50.658126 [INFO] Running command /bin/sh -c systemctl is-active nginx.service
2024/05/09 11:15:50.668774 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 11:15:50.679874 [INFO] Running command /bin/sh -c systemctl stop nginx.service
2024/05/09 11:15:50.864178 [INFO] Running command /bin/sh -c systemctl disable nginx.service
2024/05/09 11:15:51.229839 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 11:15:51.555170 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 11:15:51.563924 [INFO] Executing instruction: FlipApplication
2024/05/09 11:15:51.563948 [INFO] Fetching environment variables...
2024/05/09 11:15:51.564104 [INFO] Purge old process...
2024/05/09 11:15:51.564126 [INFO] Running command /bin/sh -c systemctl stop eb-app.target
2024/05/09 11:15:51.573832 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/05/09 11:15:51.584401 [INFO] web.service

2024/05/09 11:15:51.584426 [INFO] deregistering process: web
2024/05/09 11:15:51.584439 [INFO] Running command /bin/sh -c systemctl show -p PartOf web.service
2024/05/09 11:15:51.595003 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 11:15:51.602202 [INFO] Running command /bin/sh -c systemctl disable web.service
2024/05/09 11:15:51.936911 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2024/05/09 11:15:51.937084 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 11:15:52.333335 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 11:15:52.343793 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 11:15:52.351229 [INFO] Process web has been fully terminated
2024/05/09 11:15:52.351251 [INFO] All processes have been fully terminated
2024/05/09 11:15:52.351256 [INFO] Removing /var/app/current/ if it exists
2024/05/09 11:15:52.696040 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/05/09 11:15:52.696075 [INFO] Register application processes...
2024/05/09 11:15:52.696079 [INFO] Registering the proc: web

2024/05/09 11:15:52.696092 [INFO] Running command /bin/sh -c systemctl show -p PartOf web.service
2024/05/09 11:15:52.712635 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 11:15:52.967432 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 11:15:52.976498 [INFO] Running command /bin/sh -c systemctl is-enabled eb-app.target
2024/05/09 11:15:52.984720 [INFO] Running command /bin/sh -c systemctl enable eb-app.target
2024/05/09 11:15:53.292291 [INFO] Running command /bin/sh -c systemctl start eb-app.target
2024/05/09 11:15:53.301672 [INFO] Running command /bin/sh -c systemctl enable web.service
2024/05/09 11:15:53.563812 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/05/09 11:15:53.563846 [INFO] Running command /bin/sh -c systemctl show -p PartOf web.service
2024/05/09 11:15:53.576266 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 11:15:53.584539 [INFO] Running command /bin/sh -c systemctl start web.service
2024/05/09 11:15:53.655528 [INFO] Executing instruction: start X-Ray
2024/05/09 11:15:53.655548 [INFO] X-Ray is not enabled.
2024/05/09 11:15:53.655554 [INFO] Executing instruction: start proxy with new configuration
2024/05/09 11:15:53.655578 [INFO] Running command /bin/sh -c /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/05/09 11:15:53.686849 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2024/05/09 11:15:53.687234 [INFO] Running command /bin/sh -c cp -rp /var/proxy/staging/nginx/* /etc/nginx
2024/05/09 11:15:53.692383 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 11:15:53.715480 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 11:15:54.119445 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 11:15:54.130911 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 11:15:54.150358 [INFO] Running command /bin/sh -c systemctl is-active nginx.service
2024/05/09 11:15:54.164477 [INFO] Running command /bin/sh -c systemctl start nginx.service
2024/05/09 11:15:54.321946 [INFO] Executing instruction: configureSqsd
2024/05/09 11:15:54.321964 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2024/05/09 11:15:54.321969 [INFO] Executing instruction: startSqsd
2024/05/09 11:15:54.321985 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2024/05/09 11:15:54.321989 [INFO] Executing instruction: Track pids in healthd
2024/05/09 11:15:54.321993 [INFO] This is an enhanced health env...
2024/05/09 11:15:54.322008 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2024/05/09 11:15:54.339013 [INFO] healthd.service nginx.service cfn-hup.service

2024/05/09 11:15:54.339048 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/05/09 11:15:54.358038 [INFO] web.service

2024/05/09 11:15:54.358564 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2024/05/09 11:15:54.358592 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2024/05/09 11:15:54.358611 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2024/05/09 11:15:54.358615 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2024/05/09 11:15:54.358621 [INFO] Executing cleanup logic
2024/05/09 11:15:54.358904 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment successfully generated a 'Procfile'.","timestamp":1715253346748,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1715253354358,"severity":"INFO"}]}]}

2024/05/09 11:15:54.359453 [INFO] Platform Engine finished execution on command: app-deploy

2024/05/09 11:18:35.357466 [INFO] Starting...
2024/05/09 11:18:35.357517 [INFO] Starting EBPlatform-PlatformEngine
2024/05/09 11:18:35.357538 [INFO] reading event message file
2024/05/09 11:18:35.357689 [INFO] Engine received EB command cfn-hup-exec

2024/05/09 11:18:35.444700 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/09 11:18:35.886914 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/09 11:18:36.371326 [INFO] checking whether command app-deploy is applicable to this instance...
2024/05/09 11:18:36.371339 [INFO] this command is applicable to the instance, thus instance should execute command
2024/05/09 11:18:36.371341 [INFO] Engine command: (app-deploy)

2024/05/09 11:18:36.371346 [INFO] Downloading EB Application...
2024/05/09 11:18:36.371348 [INFO] Region: ap-southeast-2
2024/05/09 11:18:36.371350 [INFO] envID: e-3caxgjpcfu
2024/05/09 11:18:36.371352 [INFO] envBucket: elasticbeanstalk-ap-southeast-2-905418134427
2024/05/09 11:18:36.371355 [INFO] Using manifest file name from command request
2024/05/09 11:18:36.371363 [INFO] Manifest name is : manifest_1715253512814
2024/05/09 11:18:36.371366 [INFO] Download app version manifest
2024/05/09 11:18:36.371599 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/versions/manifest_1715253512814
2024/05/09 11:18:36.412056 [INFO] Download successful108bytes downloaded
2024/05/09 11:18:36.412285 [INFO] Trying to read and parse version manifest...
2024/05/09 11:18:36.416256 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/_versions/new_assignment/app-240509_211751095594
2024/05/09 11:18:36.583657 [INFO] Download successful34502885bytes downloaded
2024/05/09 11:18:36.584004 [INFO] Executing instruction: ElectLeader
2024/05/09 11:18:36.584010 [INFO] Running leader election for instance i-058d20c0b3bfe358b...
2024/05/09 11:18:36.584012 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/05/09 11:18:36.584035 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id fe004a87-66f8-471f-a44a-899d4e40e803 --listener-id i-058d20c0b3bfe358b --region ap-southeast-2
2024/05/09 11:18:36.903775 [INFO] Instance is Leader.
2024/05/09 11:18:36.903825 [INFO] Executing instruction: stopSqsd
2024/05/09 11:18:36.903830 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/05/09 11:18:36.903833 [INFO] Executing instruction: PreBuildEbExtension
2024/05/09 11:18:36.903835 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/05/09 11:18:36.903846 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2 --configsets Infra-EmbeddedPreBuild
2024/05/09 11:18:37.239781 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/05/09 11:18:37.239801 [INFO] Executing instruction: StageApplication
2024/05/09 11:18:37.291672 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/05/09 11:18:37.291772 [INFO] Running command /bin/sh -c /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/05/09 11:18:38.948704 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/05/09 11:18:39.084042 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/05/09 11:18:39.084090 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/05/09 11:18:39.084109 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/05/09 11:18:39.084112 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/05/09 11:18:39.084117 [INFO] Executing instruction: InstallDependency
2024/05/09 11:18:39.084121 [INFO] checking dependencies file
2024/05/09 11:18:39.084133 [INFO] Installing dependencies with requirements.txt by using Pip
2024/05/09 11:18:39.084145 [INFO] Running command /bin/sh -c /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/05/09 11:18:39.975682 [INFO] Requirement already satisfied: blinker==1.8.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 1)) (1.8.1)
Requirement already satisfied: click==8.1.7 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 2)) (8.1.7)
Requirement already satisfied: colorama==0.4.6 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 3)) (0.4.6)
Requirement already satisfied: email_validator==1.1.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 4)) (1.1.3)
Requirement already satisfied: Flask==3.0.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 5)) (3.0.3)
Requirement already satisfied: Flask-WTF==1.2.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 6)) (1.2.1)
Requirement already satisfied: Flask-Login==0.6.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 7)) (0.6.1)
Requirement already satisfied: gunicorn==22.0.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 8)) (22.0.0)
Requirement already satisfied: importlib_metadata==7.1.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 9)) (7.1.0)
Requirement already satisfied: itsdangerous==2.2.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 10)) (2.2.0)
Requirement already satisfied: Jinja2==3.1.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 11)) (3.1.3)
Requirement already satisfied: MarkupSafe==2.1.5 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 12)) (2.1.5)
Requirement already satisfied: Werkzeug==3.0.2 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 13)) (3.0.2)
Requirement already satisfied: WTForms==3.1.2 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 14)) (3.1.2)
Requirement already satisfied: zipp==3.18.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 15)) (3.18.1)
Requirement already satisfied: SQLAlchemy==2.0.29 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 16)) (2.0.29)
Requirement already satisfied: psycopg2-binary==2.9.9 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 17)) (2.9.9)
Requirement already satisfied: boto3==1.34.98 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 18)) (1.34.98)
Requirement already satisfied: idna>=2.0.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from email_validator==1.1.3->-r requirements.txt (line 4)) (3.7)
Requirement already satisfied: dnspython>=1.15.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from email_validator==1.1.3->-r requirements.txt (line 4)) (2.6.1)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from gunicorn==22.0.0->-r requirements.txt (line 8)) (24.0)
Requirement already satisfied: typing-extensions>=4.6.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from SQLAlchemy==2.0.29->-r requirements.txt (line 16)) (4.11.0)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from SQLAlchemy==2.0.29->-r requirements.txt (line 16)) (3.0.3)
Requirement already satisfied: s3transfer<0.11.0,>=0.10.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 18)) (0.10.1)
Requirement already satisfied: jmespath<2.0.0,>=0.7.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 18)) (1.0.1)
Requirement already satisfied: botocore<1.35.0,>=1.34.98 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 18)) (1.34.101)
Requirement already satisfied: urllib3<1.27,>=1.25.4 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 18)) (1.26.18)
Requirement already satisfied: python-dateutil<3.0.0,>=2.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 18)) (2.9.0.post0)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from python-dateutil<3.0.0,>=2.1->botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 18)) (1.16.0)

2024/05/09 11:18:39.975716 [INFO] WARNING: You are using pip version 21.3.1; however, version 24.0 is available.
You should consider upgrading via the '/var/app/venv/staging-LQM1lest/bin/python3.9 -m pip install --upgrade pip' command.

2024/05/09 11:18:39.975722 [INFO] Executing instruction: check Procfile
2024/05/09 11:18:39.975778 [INFO] creating default Procfile...
2024/05/09 11:18:39.975885 [INFO] Executing instruction: configure X-Ray
2024/05/09 11:18:39.975888 [INFO] X-Ray is not enabled.
2024/05/09 11:18:39.975892 [INFO] Executing instruction: configure proxy server
2024/05/09 11:18:40.013673 [INFO] Executing instruction: configure healthd specific proxy conf
2024/05/09 11:18:40.014903 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 11:18:40.080098 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/05/09 11:18:40.080132 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 11:18:40.100054 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/05/09 11:18:40.112963 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 11:18:40.136781 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/05/09 11:18:40.216768 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/05/09 11:18:40.567374 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/05/09 11:18:40.567593 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 11:18:40.948781 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 11:18:40.962078 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 11:18:41.320510 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 11:18:41.329671 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/05/09 11:18:41.338063 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/05/09 11:18:41.624943 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/05/09 11:18:41.635157 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/05/09 11:18:41.981329 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/05/09 11:18:41.981371 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 11:18:41.993246 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/05/09 11:18:42.002076 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/05/09 11:18:42.059096 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/05/09 11:18:42.059800 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/05/09 11:18:42.060646 [INFO] Executing instruction: configure log streaming
2024/05/09 11:18:42.060657 [INFO] log streaming is not enabled
2024/05/09 11:18:42.060660 [INFO] disable log stream
2024/05/09 11:18:42.060674 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/05/09 11:18:42.077880 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/05/09 11:18:42.097208 [INFO] Executing instruction: GetToggleForceRotate
2024/05/09 11:18:42.097231 [INFO] Checking if logs need forced rotation
2024/05/09 11:18:42.097255 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/09 11:18:42.595618 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/09 11:18:43.133308 [INFO] Generating rsyslog config from Procfile
2024/05/09 11:18:43.134834 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/05/09 11:18:43.387914 [INFO] Executing instruction: PostBuildEbExtension
2024/05/09 11:18:43.387956 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/05/09 11:18:43.387972 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2 --configsets Infra-EmbeddedPostBuild
2024/05/09 11:18:43.878232 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/05/09 11:18:43.878390 [INFO] Executing instruction: CleanEbExtensions
2024/05/09 11:18:43.878425 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/05/09 11:18:43.878429 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/05/09 11:18:43.878463 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/05/09 11:18:43.878480 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/05/09 11:18:43.878483 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/05/09 11:18:43.878489 [INFO] Executing instruction: stop X-Ray
2024/05/09 11:18:43.878493 [INFO] stop X-Ray ...
2024/05/09 11:18:43.878507 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/05/09 11:18:43.894705 [WARN] stopProcess Warning: process xray is not registered 
2024/05/09 11:18:43.894736 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/05/09 11:18:43.918062 [INFO] Executing instruction: stop proxy
2024/05/09 11:18:43.918097 [INFO] Running command /bin/sh -c systemctl show -p PartOf httpd.service
2024/05/09 11:18:43.942050 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/05/09 11:18:43.942081 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 11:18:43.956311 [INFO] Running command /bin/sh -c systemctl is-active nginx.service
2024/05/09 11:18:43.964483 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 11:18:43.980875 [INFO] Running command /bin/sh -c systemctl stop nginx.service
2024/05/09 11:18:44.164042 [INFO] Running command /bin/sh -c systemctl disable nginx.service
2024/05/09 11:18:44.480915 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 11:18:44.851707 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 11:18:44.867363 [INFO] Executing instruction: FlipApplication
2024/05/09 11:18:44.867387 [INFO] Fetching environment variables...
2024/05/09 11:18:44.867598 [INFO] Purge old process...
2024/05/09 11:18:44.867622 [INFO] Running command /bin/sh -c systemctl stop eb-app.target
2024/05/09 11:18:44.880654 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/05/09 11:18:44.894645 [INFO] web.service

2024/05/09 11:18:44.894686 [INFO] deregistering process: web
2024/05/09 11:18:44.894698 [INFO] Running command /bin/sh -c systemctl show -p PartOf web.service
2024/05/09 11:18:44.907916 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 11:18:44.915767 [INFO] Running command /bin/sh -c systemctl disable web.service
2024/05/09 11:18:45.302604 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2024/05/09 11:18:45.304391 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 11:18:45.711338 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 11:18:45.723317 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 11:18:45.735850 [INFO] Process web has been fully terminated
2024/05/09 11:18:45.735941 [INFO] All processes have been fully terminated
2024/05/09 11:18:45.735946 [INFO] Removing /var/app/current/ if it exists
2024/05/09 11:18:46.148624 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/05/09 11:18:46.148656 [INFO] Register application processes...
2024/05/09 11:18:46.148661 [INFO] Registering the proc: web

2024/05/09 11:18:46.148672 [INFO] Running command /bin/sh -c systemctl show -p PartOf web.service
2024/05/09 11:18:46.214864 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 11:18:46.567036 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 11:18:46.579074 [INFO] Running command /bin/sh -c systemctl is-enabled eb-app.target
2024/05/09 11:18:46.588826 [INFO] Running command /bin/sh -c systemctl enable eb-app.target
2024/05/09 11:18:46.932882 [INFO] Running command /bin/sh -c systemctl start eb-app.target
2024/05/09 11:18:46.943166 [INFO] Running command /bin/sh -c systemctl enable web.service
2024/05/09 11:18:47.336544 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/05/09 11:18:47.336580 [INFO] Running command /bin/sh -c systemctl show -p PartOf web.service
2024/05/09 11:18:47.348815 [INFO] Running command /bin/sh -c systemctl is-active web.service
2024/05/09 11:18:47.357755 [INFO] Running command /bin/sh -c systemctl start web.service
2024/05/09 11:18:47.443470 [INFO] Executing instruction: start X-Ray
2024/05/09 11:18:47.443487 [INFO] X-Ray is not enabled.
2024/05/09 11:18:47.443492 [INFO] Executing instruction: start proxy with new configuration
2024/05/09 11:18:47.443522 [INFO] Running command /bin/sh -c /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/05/09 11:18:47.472515 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2024/05/09 11:18:47.472835 [INFO] Running command /bin/sh -c cp -rp /var/proxy/staging/nginx/* /etc/nginx
2024/05/09 11:18:47.477704 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 11:18:47.501847 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 11:18:47.948848 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 11:18:47.963278 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/05/09 11:18:47.988345 [INFO] Running command /bin/sh -c systemctl is-active nginx.service
2024/05/09 11:18:48.005417 [INFO] Running command /bin/sh -c systemctl start nginx.service
2024/05/09 11:18:48.175921 [INFO] Executing instruction: configureSqsd
2024/05/09 11:18:48.175947 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2024/05/09 11:18:48.175952 [INFO] Executing instruction: startSqsd
2024/05/09 11:18:48.175955 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2024/05/09 11:18:48.175959 [INFO] Executing instruction: Track pids in healthd
2024/05/09 11:18:48.175970 [INFO] This is an enhanced health env...
2024/05/09 11:18:48.175985 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2024/05/09 11:18:48.197896 [INFO] nginx.service healthd.service cfn-hup.service

2024/05/09 11:18:48.197932 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/05/09 11:18:48.221041 [INFO] web.service

2024/05/09 11:18:48.221532 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2024/05/09 11:18:48.221555 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2024/05/09 11:18:48.221572 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2024/05/09 11:18:48.221576 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2024/05/09 11:18:48.221582 [INFO] Executing cleanup logic
2024/05/09 11:18:48.221830 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment successfully generated a 'Procfile'.","timestamp":1715253519975,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1715253528221,"severity":"INFO"}]}]}

2024/05/09 11:18:48.222011 [INFO] Platform Engine finished execution on command: app-deploy

2024/05/09 11:21:48.388348 [INFO] Starting...
2024/05/09 11:21:48.388405 [INFO] Starting EBPlatform-PlatformEngine
2024/05/09 11:21:48.388427 [INFO] reading event message file
2024/05/09 11:21:48.388586 [INFO] Engine received EB command cfn-hup-exec

2024/05/09 11:21:48.467678 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/09 11:21:48.936729 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/09 11:21:49.381375 [INFO] checking whether command app-deploy is applicable to this instance...
2024/05/09 11:21:49.381391 [INFO] this command is applicable to the instance, thus instance should execute command
2024/05/09 11:21:49.381395 [INFO] Engine command: (app-deploy)

2024/05/09 11:21:49.381399 [INFO] Downloading EB Application...
2024/05/09 11:21:49.381402 [INFO] Region: ap-southeast-2
2024/05/09 11:21:49.381404 [INFO] envID: e-3caxgjpcfu
2024/05/09 11:21:49.381406 [INFO] envBucket: elasticbeanstalk-ap-southeast-2-905418134427
2024/05/09 11:21:49.381409 [INFO] Using manifest file name from command request
2024/05/09 11:21:49.381414 [INFO] Manifest name is : manifest_1715253686659
2024/05/09 11:21:49.381417 [INFO] Download app version manifest
2024/05/09 11:21:49.381700 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/versions/manifest_1715253686659
2024/05/09 11:21:49.420257 [INFO] Download successful108bytes downloaded
2024/05/09 11:21:49.420394 [INFO] Trying to read and parse version manifest...
2024/05/09 11:21:49.423618 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/_versions/new_assignment/app-240509_212043518750
2024/05/09 11:21:49.583170 [INFO] Download successful34503167bytes downloaded
2024/05/09 11:21:49.583411 [INFO] Executing instruction: ElectLeader
2024/05/09 11:21:49.583423 [INFO] Running leader election for instance i-058d20c0b3bfe358b...
2024/05/09 11:21:49.583426 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/05/09 11:21:49.583441 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 347f45f8-49e2-474a-9d2b-372c33018eaa --listener-id i-058d20c0b3bfe358b --region ap-southeast-2
2024/05/09 11:21:50.027149 [INFO] Instance is Leader.
2024/05/09 11:21:50.027207 [INFO] Executing instruction: stopSqsd
2024/05/09 11:21:50.027215 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/05/09 11:21:50.027218 [INFO] Executing instruction: PreBuildEbExtension
2024/05/09 11:21:50.027222 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/05/09 11:21:50.027238 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2 --configsets Infra-EmbeddedPreBuild
2024/05/09 11:21:51.709986 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/05/09 11:21:51.710009 [INFO] Executing instruction: StageApplication
2024/05/09 11:21:51.772922 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/05/09 11:21:51.772968 [INFO] Running command /bin/sh -c /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/05/09 11:21:53.494660 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/05/09 11:21:53.658235 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/05/09 11:21:53.658273 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/05/09 11:21:53.658288 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/05/09 11:21:53.658291 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/05/09 11:21:53.658317 [INFO] Executing instruction: InstallDependency
2024/05/09 11:21:53.658331 [INFO] checking dependencies file
2024/05/09 11:21:53.658450 [INFO] Installing dependencies with requirements.txt by using Pip
2024/05/09 11:21:53.658470 [INFO] Running command /bin/sh -c /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/05/09 11:21:54.487848 [INFO] Requirement already satisfied: blinker==1.8.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 1)) (1.8.1)
Requirement already satisfied: click==8.1.7 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 2)) (8.1.7)
Requirement already satisfied: colorama==0.4.6 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 3)) (0.4.6)
Requirement already satisfied: email_validator==1.1.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 4)) (1.1.3)
Requirement already satisfied: Flask==3.0.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 5)) (3.0.3)
Requirement already satisfied: Flask-WTF==1.2.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 6)) (1.2.1)
Requirement already satisfied: Flask-Login==0.6.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 7)) (0.6.1)
Requirement already satisfied: gunicorn==22.0.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 8)) (22.0.0)
Requirement already satisfied: importlib_metadata==7.1.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 9)) (7.1.0)
Requirement already satisfied: itsdangerous==2.2.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 10)) (2.2.0)
Requirement already satisfied: Jinja2==3.1.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 11)) (3.1.3)
Requirement already satisfied: MarkupSafe==2.1.5 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 12)) (2.1.5)
Requirement already satisfied: Werkzeug==3.0.2 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 13)) (3.0.2)
Requirement already satisfied: WTForms==3.1.2 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 14)) (3.1.2)
Requirement already satisfied: zipp==3.18.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 15)) (3.18.1)
Requirement already satisfied: SQLAlchemy==2.0.29 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 16)) (2.0.29)
Requirement already satisfied: psycopg2-binary==2.9.9 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 17)) (2.9.9)
Requirement already satisfied: boto3==1.34.98 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 18)) (1.34.98)
Requirement already satisfied: idna>=2.0.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from email_validator==1.1.3->-r requirements.txt (line 4)) (3.7)
Requirement already satisfied: dnspython>=1.15.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from email_validator==1.1.3->-r requirements.txt (line 4)) (2.6.1)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from gunicorn==22.0.0->-r requirements.txt (line 8)) (24.0)
Requirement already satisfied: typing-extensions>=4.6.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from SQLAlchemy==2.0.29->-r requirements.txt (line 16)) (4.11.0)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from SQLAlchemy==2.0.29->-r requirements.txt (line 16)) (3.0.3)
Requirement already satisfied: jmespath<2.0.0,>=0.7.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 18)) (1.0.1)
Requirement already satisfied: s3transfer<0.11.0,>=0.10.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 18)) (0.10.1)
Requirement already satisfied: botocore<1.35.0,>=1.34.98 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 18)) (1.34.101)
Requirement already satisfied: python-dateutil<3.0.0,>=2.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 18)) (2.9.0.post0)
Requirement already satisfied: urllib3<1.27,>=1.25.4 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 18)) (1.26.18)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from python-dateutil<3.0.0,>=2.1->botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 18)) (1.16.0)

2024/05/09 11:21:54.487877 [INFO] WARNING: You are using pip version 21.3.1; however, version 24.0 is available.
You should consider upgrading via the '/var/app/venv/staging-LQM1lest/bin/python3.9 -m pip install --upgrade pip' command.

2024/05/09 11:21:54.487885 [INFO] Executing instruction: check Procfile
2024/05/09 11:21:54.488026 [INFO] creating default Procfile...
2024/05/09 11:21:54.488135 [INFO] Executing instruction: configure X-Ray
2024/05/09 11:21:54.488139 [INFO] X-Ray is not enabled.
2024/05/09 11:21:54.488143 [INFO] Executing instruction: configure proxy server
2024/05/09 11:21:54.521349 [INFO] Executing instruction: configure healthd specific proxy conf
2024/05/09 11:21:54.522693 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 11:21:54.542278 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/05/09 11:21:54.542310 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 11:21:54.560930 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/05/09 11:21:54.578616 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 11:21:54.593185 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/05/09 11:21:54.664415 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/05/09 11:21:54.992793 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/05/09 11:21:54.992969 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 11:21:55.327236 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 11:21:55.341047 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/09 11:21:55.759594 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/09 11:21:55.776393 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/05/09 11:21:55.784567 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/05/09 11:21:56.126270 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/05/09 11:21:56.135938 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/05/09 11:21:56.476987 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/05/09 11:21:56.477023 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/09 11:21:56.489746 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/05/09 11:21:56.498294 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/05/09 11:21:56.586336 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/05/09 11:21:56.587740 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/05/09 11:21:56.588592 [INFO] Executing instruction: configure log streaming
2024/05/09 11:21:56.588604 [INFO] log streaming is not enabled
2024/05/09 11:21:56.588609 [INFO] disable log stream
2024/05/09 11:21:56.588623 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/05/09 11:21:56.610997 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/05/09 11:21:56.632455 [INFO] Executing instruction: GetToggleForceRotate
2024/05/09 11:21:56.632480 [INFO] Checking if logs need forced rotation
2024/05/09 11:21:56.632528 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/09 11:21:57.199684 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/09 11:21:57.723612 [INFO] Generating rsyslog config from Procfile
2024/05/09 11:21:57.724980 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/05/09 11:21:57.790730 [INFO] Executing instruction: PostBuildEbExtension
2024/05/09 11:21:57.790751 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/05/09 11:21:57.790772 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2 --configsets Infra-EmbeddedPostBuild
2024/05/09 11:22:03.481894 [INFO] Error occurred during build: Command 01_start_gunicorn failed

2024/05/09 11:22:03.481923 [ERROR] An error occurred during execution of command [app-deploy] - [PostBuildEbExtension]. Stop running the command. Error: container commands build failed. Please refer to /var/log/cfn-init.log for more details. 

2024/05/09 11:22:03.481928 [INFO] Executing cleanup logic
2024/05/09 11:22:03.482049 [INFO] CommandService Response: {"status":"FAILURE","api_version":"1.0","results":[{"status":"FAILURE","msg":"Engine execution has encountered an error.","returncode":1,"events":[{"msg":"Instance deployment successfully generated a 'Procfile'.","timestamp":1715253714488,"severity":"INFO"},{"msg":"Instance deployment failed. For details, see 'eb-engine.log'.","timestamp":1715253723481,"severity":"ERROR"}]}]}

2024/05/09 11:22:03.482302 [INFO] Platform Engine finished execution on command: app-deploy

2024/05/11 00:22:30.928711 [INFO] Starting...
2024/05/11 00:22:30.928769 [INFO] Starting EBPlatform-PlatformEngine
2024/05/11 00:22:30.928791 [INFO] reading event message file
2024/05/11 00:22:30.928958 [INFO] Engine received EB command cfn-hup-exec

2024/05/11 00:22:31.034182 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/11 00:22:31.502503 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/11 00:22:32.000653 [INFO] checking whether command tail-log is applicable to this instance...
2024/05/11 00:22:32.000665 [INFO] this command is applicable to the instance, thus instance should execute command
2024/05/11 00:22:32.000669 [INFO] Engine command: (tail-log)

2024/05/11 00:22:32.000719 [INFO] Executing instruction: GetTailLogs
2024/05/11 00:22:32.000722 [INFO] Tail Logs...
2024/05/11 00:22:32.001128 [INFO] Running command /bin/sh -c tail -n 100 /var/log/web.stdout.log
2024/05/11 00:22:32.010539 [INFO] Running command /bin/sh -c tail -n 100 /var/log/eb-engine.log
2024/05/11 00:22:32.012806 [INFO] Running command /bin/sh -c tail -n 100 /var/log/eb-hooks.log
2024/05/11 00:22:32.015624 [INFO] Running command /bin/sh -c tail -n 100 /var/log/nginx/access.log
2024/05/11 00:22:32.018137 [INFO] Running command /bin/sh -c tail -n 100 /var/log/nginx/error.log
2024/05/11 00:22:32.108470 [INFO] Executing cleanup logic
2024/05/11 00:22:32.108566 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1715386952108,"severity":"INFO"}]}]}

2024/05/11 00:22:32.108582 [INFO] Platform Engine finished execution on command: tail-log

2024/05/11 00:24:10.454511 [INFO] Starting...
2024/05/11 00:24:10.454745 [INFO] Starting EBPlatform-PlatformEngine
2024/05/11 00:24:10.454774 [INFO] reading event message file
2024/05/11 00:24:10.454996 [INFO] Engine received EB command cfn-hup-exec

2024/05/11 00:24:10.557082 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/11 00:24:11.046201 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/11 00:24:11.514131 [INFO] checking whether command app-deploy is applicable to this instance...
2024/05/11 00:24:11.514148 [INFO] this command is applicable to the instance, thus instance should execute command
2024/05/11 00:24:11.514153 [INFO] Engine command: (app-deploy)

2024/05/11 00:24:11.514157 [INFO] Downloading EB Application...
2024/05/11 00:24:11.514159 [INFO] Region: ap-southeast-2
2024/05/11 00:24:11.514167 [INFO] envID: e-3caxgjpcfu
2024/05/11 00:24:11.514170 [INFO] envBucket: elasticbeanstalk-ap-southeast-2-905418134427
2024/05/11 00:24:11.514172 [INFO] Using manifest file name from command request
2024/05/11 00:24:11.514178 [INFO] Manifest name is : manifest_1715387028555
2024/05/11 00:24:11.514180 [INFO] Download app version manifest
2024/05/11 00:24:11.514337 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/versions/manifest_1715387028555
2024/05/11 00:24:11.549234 [INFO] Download successful108bytes downloaded
2024/05/11 00:24:11.549371 [INFO] Trying to read and parse version manifest...
2024/05/11 00:24:11.552552 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/_versions/new_assignment/app-240511_102124819710
2024/05/11 00:24:11.715102 [INFO] Download successful34503167bytes downloaded
2024/05/11 00:24:11.715317 [INFO] Executing instruction: ElectLeader
2024/05/11 00:24:11.715323 [INFO] Running leader election for instance i-058d20c0b3bfe358b...
2024/05/11 00:24:11.715325 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/05/11 00:24:11.715339 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 5a36b11b-6c6c-4791-bec8-a621c8d226d0 --listener-id i-058d20c0b3bfe358b --region ap-southeast-2
2024/05/11 00:24:12.089291 [INFO] Instance is Leader.
2024/05/11 00:24:12.089329 [INFO] Executing instruction: stopSqsd
2024/05/11 00:24:12.089335 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/05/11 00:24:12.089338 [INFO] Executing instruction: PreBuildEbExtension
2024/05/11 00:24:12.089341 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/05/11 00:24:12.089361 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2 --configsets Infra-EmbeddedPreBuild
2024/05/11 00:24:13.389060 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/05/11 00:24:13.389085 [INFO] Executing instruction: StageApplication
2024/05/11 00:24:13.765360 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/05/11 00:24:13.765397 [INFO] Running command /bin/sh -c /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/05/11 00:24:15.505916 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/05/11 00:24:15.702113 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/05/11 00:24:15.702145 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/05/11 00:24:15.702162 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/05/11 00:24:15.702164 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/05/11 00:24:15.702169 [INFO] Executing instruction: InstallDependency
2024/05/11 00:24:15.702173 [INFO] checking dependencies file
2024/05/11 00:24:15.702185 [INFO] Installing dependencies with requirements.txt by using Pip
2024/05/11 00:24:15.702197 [INFO] Running command /bin/sh -c /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/05/11 00:24:16.667152 [INFO] Requirement already satisfied: blinker==1.8.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 1)) (1.8.1)
Requirement already satisfied: click==8.1.7 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 2)) (8.1.7)
Requirement already satisfied: colorama==0.4.6 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 3)) (0.4.6)
Requirement already satisfied: email_validator==1.1.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 4)) (1.1.3)
Requirement already satisfied: Flask==3.0.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 5)) (3.0.3)
Requirement already satisfied: Flask-WTF==1.2.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 6)) (1.2.1)
Requirement already satisfied: Flask-Login==0.6.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 7)) (0.6.1)
Requirement already satisfied: gunicorn==22.0.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 8)) (22.0.0)
Requirement already satisfied: importlib_metadata==7.1.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 9)) (7.1.0)
Requirement already satisfied: itsdangerous==2.2.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 10)) (2.2.0)
Requirement already satisfied: Jinja2==3.1.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 11)) (3.1.3)
Requirement already satisfied: MarkupSafe==2.1.5 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 12)) (2.1.5)
Requirement already satisfied: Werkzeug==3.0.2 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 13)) (3.0.2)
Requirement already satisfied: WTForms==3.1.2 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 14)) (3.1.2)
Requirement already satisfied: zipp==3.18.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 15)) (3.18.1)
Requirement already satisfied: SQLAlchemy==2.0.29 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 16)) (2.0.29)
Requirement already satisfied: psycopg2-binary==2.9.9 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 17)) (2.9.9)
Requirement already satisfied: boto3==1.34.98 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 18)) (1.34.98)
Requirement already satisfied: dnspython>=1.15.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from email_validator==1.1.3->-r requirements.txt (line 4)) (2.6.1)
Requirement already satisfied: idna>=2.0.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from email_validator==1.1.3->-r requirements.txt (line 4)) (3.7)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from gunicorn==22.0.0->-r requirements.txt (line 8)) (24.0)
Requirement already satisfied: typing-extensions>=4.6.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from SQLAlchemy==2.0.29->-r requirements.txt (line 16)) (4.11.0)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from SQLAlchemy==2.0.29->-r requirements.txt (line 16)) (3.0.3)
Requirement already satisfied: jmespath<2.0.0,>=0.7.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 18)) (1.0.1)
Requirement already satisfied: botocore<1.35.0,>=1.34.98 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 18)) (1.34.101)
Requirement already satisfied: s3transfer<0.11.0,>=0.10.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 18)) (0.10.1)
Requirement already satisfied: python-dateutil<3.0.0,>=2.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 18)) (2.9.0.post0)
Requirement already satisfied: urllib3<1.27,>=1.25.4 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 18)) (1.26.18)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from python-dateutil<3.0.0,>=2.1->botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 18)) (1.16.0)

2024/05/11 00:24:16.667189 [INFO] WARNING: You are using pip version 21.3.1; however, version 24.0 is available.
You should consider upgrading via the '/var/app/venv/staging-LQM1lest/bin/python3.9 -m pip install --upgrade pip' command.

2024/05/11 00:24:16.667196 [INFO] Executing instruction: check Procfile
2024/05/11 00:24:16.667238 [INFO] creating default Procfile...
2024/05/11 00:24:16.667347 [INFO] Executing instruction: configure X-Ray
2024/05/11 00:24:16.667352 [INFO] X-Ray is not enabled.
2024/05/11 00:24:16.667357 [INFO] Executing instruction: configure proxy server
2024/05/11 00:24:16.673148 [INFO] Executing instruction: configure healthd specific proxy conf
2024/05/11 00:24:16.674467 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/11 00:24:16.726484 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/05/11 00:24:16.726517 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/11 00:24:16.740647 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/05/11 00:24:16.754041 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/11 00:24:16.767117 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/05/11 00:24:16.836852 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/05/11 00:24:17.134705 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/05/11 00:24:17.134870 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/11 00:24:17.443954 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/11 00:24:17.463244 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/11 00:24:17.781500 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/11 00:24:17.794509 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/05/11 00:24:17.802830 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/05/11 00:24:18.088322 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/05/11 00:24:18.098558 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/05/11 00:24:18.410914 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/05/11 00:24:18.410951 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/11 00:24:18.426588 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/05/11 00:24:18.434599 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/05/11 00:24:18.502050 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/05/11 00:24:18.502780 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/05/11 00:24:18.503543 [INFO] Executing instruction: configure log streaming
2024/05/11 00:24:18.503553 [INFO] log streaming is not enabled
2024/05/11 00:24:18.503557 [INFO] disable log stream
2024/05/11 00:24:18.503570 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/05/11 00:24:18.520870 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/05/11 00:24:18.537066 [INFO] Executing instruction: GetToggleForceRotate
2024/05/11 00:24:18.537087 [INFO] Checking if logs need forced rotation
2024/05/11 00:24:18.537110 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/11 00:24:18.966735 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/11 00:24:19.404603 [INFO] Generating rsyslog config from Procfile
2024/05/11 00:24:19.406367 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/05/11 00:24:19.907019 [INFO] Executing instruction: PostBuildEbExtension
2024/05/11 00:24:19.907099 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/05/11 00:24:19.907118 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2 --configsets Infra-EmbeddedPostBuild
2024/05/11 00:24:25.563891 [INFO] Error occurred during build: Command 01_start_gunicorn failed

2024/05/11 00:24:25.564064 [ERROR] An error occurred during execution of command [app-deploy] - [PostBuildEbExtension]. Stop running the command. Error: container commands build failed. Please refer to /var/log/cfn-init.log for more details. 

2024/05/11 00:24:25.564139 [INFO] Executing cleanup logic
2024/05/11 00:24:25.565427 [INFO] CommandService Response: {"status":"FAILURE","api_version":"1.0","results":[{"status":"FAILURE","msg":"Engine execution has encountered an error.","returncode":1,"events":[{"msg":"Instance deployment successfully generated a 'Procfile'.","timestamp":1715387056667,"severity":"INFO"},{"msg":"Instance deployment failed. For details, see 'eb-engine.log'.","timestamp":1715387065564,"severity":"ERROR"}]}]}

2024/05/11 00:24:25.566255 [INFO] Platform Engine finished execution on command: app-deploy

2024/05/11 00:25:40.676597 [INFO] Starting...
2024/05/11 00:25:40.676664 [INFO] Starting EBPlatform-PlatformEngine
2024/05/11 00:25:40.676687 [INFO] reading event message file
2024/05/11 00:25:40.676848 [INFO] Engine received EB command cfn-hup-exec

2024/05/11 00:25:40.772859 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/11 00:25:41.272729 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/11 00:25:41.659555 [INFO] checking whether command tail-log is applicable to this instance...
2024/05/11 00:25:41.659567 [INFO] this command is applicable to the instance, thus instance should execute command
2024/05/11 00:25:41.659570 [INFO] Engine command: (tail-log)

2024/05/11 00:25:41.659623 [INFO] Executing instruction: GetTailLogs
2024/05/11 00:25:41.659627 [INFO] Tail Logs...
2024/05/11 00:25:41.660092 [INFO] Running command /bin/sh -c tail -n 100 /var/log/eb-hooks.log
2024/05/11 00:25:41.662783 [INFO] Running command /bin/sh -c tail -n 100 /var/log/nginx/access.log
2024/05/11 00:25:41.665138 [INFO] Running command /bin/sh -c tail -n 100 /var/log/nginx/error.log
2024/05/11 00:25:41.668935 [INFO] Running command /bin/sh -c tail -n 100 /var/log/web.stdout.log
2024/05/11 00:25:41.671230 [INFO] Running command /bin/sh -c tail -n 100 /var/log/eb-engine.log
2024/05/11 00:25:41.783718 [INFO] Executing cleanup logic
2024/05/11 00:25:41.783813 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1715387141783,"severity":"INFO"}]}]}

2024/05/11 00:25:41.783830 [INFO] Platform Engine finished execution on command: tail-log

2024/05/11 00:26:20.681158 [INFO] Starting...
2024/05/11 00:26:20.681207 [INFO] Starting EBPlatform-PlatformEngine
2024/05/11 00:26:20.681238 [INFO] reading event message file
2024/05/11 00:26:20.681401 [INFO] Engine received EB command cfn-hup-exec

2024/05/11 00:26:20.750637 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/11 00:26:21.129224 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/11 00:26:21.492131 [INFO] checking whether command bundle-log is applicable to this instance...
2024/05/11 00:26:21.492142 [INFO] this command is applicable to the instance, thus instance should execute command
2024/05/11 00:26:21.492145 [INFO] Engine command: (bundle-log)

2024/05/11 00:26:21.492195 [INFO] Executing instruction: GetBundleLogs
2024/05/11 00:26:21.492198 [INFO] Bundle Logs...
2024/05/11 00:26:21.863994 [INFO] Executing cleanup logic
2024/05/11 00:26:21.864112 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1715387181864,"severity":"INFO"}]}]}

2024/05/11 00:26:21.864132 [INFO] Platform Engine finished execution on command: bundle-log

2024/05/11 00:33:20.653841 [INFO] Starting...
2024/05/11 00:33:20.653888 [INFO] Starting EBPlatform-PlatformEngine
2024/05/11 00:33:20.653910 [INFO] reading event message file
2024/05/11 00:33:20.654064 [INFO] Engine received EB command cfn-hup-exec

2024/05/11 00:33:20.726514 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/11 00:33:21.133945 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/11 00:33:21.531816 [INFO] checking whether command app-deploy is applicable to this instance...
2024/05/11 00:33:21.531831 [INFO] this command is applicable to the instance, thus instance should execute command
2024/05/11 00:33:21.531835 [INFO] Engine command: (app-deploy)

2024/05/11 00:33:21.531841 [INFO] Downloading EB Application...
2024/05/11 00:33:21.531844 [INFO] Region: ap-southeast-2
2024/05/11 00:33:21.531847 [INFO] envID: e-3caxgjpcfu
2024/05/11 00:33:21.531851 [INFO] envBucket: elasticbeanstalk-ap-southeast-2-905418134427
2024/05/11 00:33:21.531893 [INFO] Using manifest file name from command request
2024/05/11 00:33:21.531944 [INFO] Manifest name is : manifest_1715387577726
2024/05/11 00:33:21.531948 [INFO] Download app version manifest
2024/05/11 00:33:21.532259 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/versions/manifest_1715387577726
2024/05/11 00:33:21.579111 [INFO] Download successful108bytes downloaded
2024/05/11 00:33:21.579718 [INFO] Trying to read and parse version manifest...
2024/05/11 00:33:21.587518 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/_versions/new_assignment/app-240511_103029081880
2024/05/11 00:33:21.734249 [INFO] Download successful34503167bytes downloaded
2024/05/11 00:33:21.734496 [INFO] Executing instruction: ElectLeader
2024/05/11 00:33:21.734506 [INFO] Running leader election for instance i-058d20c0b3bfe358b...
2024/05/11 00:33:21.734510 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/05/11 00:33:21.734525 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 81934be3-9c2f-4e95-bf5b-d23b70fb22c0 --listener-id i-058d20c0b3bfe358b --region ap-southeast-2
2024/05/11 00:33:22.107876 [INFO] Instance is Leader.
2024/05/11 00:33:22.107919 [INFO] Executing instruction: stopSqsd
2024/05/11 00:33:22.107925 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/05/11 00:33:22.107929 [INFO] Executing instruction: PreBuildEbExtension
2024/05/11 00:33:22.107932 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/05/11 00:33:22.107944 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2 --configsets Infra-EmbeddedPreBuild
2024/05/11 00:33:23.375983 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/05/11 00:33:23.376008 [INFO] Executing instruction: StageApplication
2024/05/11 00:33:23.790724 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/05/11 00:33:23.790759 [INFO] Running command /bin/sh -c /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/05/11 00:33:25.412883 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/05/11 00:33:25.575908 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/05/11 00:33:25.575949 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/05/11 00:33:25.575998 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/05/11 00:33:25.576003 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/05/11 00:33:25.576011 [INFO] Executing instruction: InstallDependency
2024/05/11 00:33:25.576017 [INFO] checking dependencies file
2024/05/11 00:33:25.576031 [INFO] Installing dependencies with requirements.txt by using Pip
2024/05/11 00:33:25.576044 [INFO] Running command /bin/sh -c /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/05/11 00:33:26.540975 [INFO] Requirement already satisfied: blinker==1.8.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 1)) (1.8.1)
Requirement already satisfied: click==8.1.7 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 2)) (8.1.7)
Requirement already satisfied: colorama==0.4.6 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 3)) (0.4.6)
Requirement already satisfied: email_validator==1.1.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 4)) (1.1.3)
Requirement already satisfied: Flask==3.0.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 5)) (3.0.3)
Requirement already satisfied: Flask-WTF==1.2.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 6)) (1.2.1)
Requirement already satisfied: Flask-Login==0.6.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 7)) (0.6.1)
Requirement already satisfied: gunicorn==22.0.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 8)) (22.0.0)
Requirement already satisfied: importlib_metadata==7.1.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 9)) (7.1.0)
Requirement already satisfied: itsdangerous==2.2.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 10)) (2.2.0)
Requirement already satisfied: Jinja2==3.1.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 11)) (3.1.3)
Requirement already satisfied: MarkupSafe==2.1.5 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 12)) (2.1.5)
Requirement already satisfied: Werkzeug==3.0.2 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 13)) (3.0.2)
Requirement already satisfied: WTForms==3.1.2 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 14)) (3.1.2)
Requirement already satisfied: zipp==3.18.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 15)) (3.18.1)
Requirement already satisfied: SQLAlchemy==2.0.29 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 16)) (2.0.29)
Requirement already satisfied: psycopg2-binary==2.9.9 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 17)) (2.9.9)
Requirement already satisfied: boto3==1.34.98 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 18)) (1.34.98)
Requirement already satisfied: dnspython>=1.15.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from email_validator==1.1.3->-r requirements.txt (line 4)) (2.6.1)
Requirement already satisfied: idna>=2.0.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from email_validator==1.1.3->-r requirements.txt (line 4)) (3.7)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from gunicorn==22.0.0->-r requirements.txt (line 8)) (24.0)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from SQLAlchemy==2.0.29->-r requirements.txt (line 16)) (3.0.3)
Requirement already satisfied: typing-extensions>=4.6.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from SQLAlchemy==2.0.29->-r requirements.txt (line 16)) (4.11.0)
Requirement already satisfied: s3transfer<0.11.0,>=0.10.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 18)) (0.10.1)
Requirement already satisfied: jmespath<2.0.0,>=0.7.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 18)) (1.0.1)
Requirement already satisfied: botocore<1.35.0,>=1.34.98 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 18)) (1.34.101)
Requirement already satisfied: urllib3<1.27,>=1.25.4 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 18)) (1.26.18)
Requirement already satisfied: python-dateutil<3.0.0,>=2.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 18)) (2.9.0.post0)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from python-dateutil<3.0.0,>=2.1->botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 18)) (1.16.0)

2024/05/11 00:33:26.541006 [INFO] WARNING: You are using pip version 21.3.1; however, version 24.0 is available.
You should consider upgrading via the '/var/app/venv/staging-LQM1lest/bin/python3.9 -m pip install --upgrade pip' command.

2024/05/11 00:33:26.541013 [INFO] Executing instruction: check Procfile
2024/05/11 00:33:26.541067 [INFO] creating default Procfile...
2024/05/11 00:33:26.541514 [INFO] Executing instruction: configure X-Ray
2024/05/11 00:33:26.541526 [INFO] X-Ray is not enabled.
2024/05/11 00:33:26.541532 [INFO] Executing instruction: configure proxy server
2024/05/11 00:33:26.547244 [INFO] Executing instruction: configure healthd specific proxy conf
2024/05/11 00:33:26.548511 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/11 00:33:26.609534 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/05/11 00:33:26.609569 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/11 00:33:26.626435 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/05/11 00:33:26.639486 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/11 00:33:26.653674 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/05/11 00:33:26.719179 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/05/11 00:33:27.149148 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/05/11 00:33:27.149225 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/11 00:33:27.482816 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/11 00:33:27.495345 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/11 00:33:27.807813 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/11 00:33:27.816276 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/05/11 00:33:27.824268 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/05/11 00:33:28.192266 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/05/11 00:33:28.201810 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/05/11 00:33:28.524545 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/05/11 00:33:28.524582 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/11 00:33:28.542579 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/05/11 00:33:28.556558 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/05/11 00:33:28.657744 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/05/11 00:33:28.658548 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/05/11 00:33:28.659628 [INFO] Executing instruction: configure log streaming
2024/05/11 00:33:28.659638 [INFO] log streaming is not enabled
2024/05/11 00:33:28.659641 [INFO] disable log stream
2024/05/11 00:33:28.659657 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/05/11 00:33:28.710155 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/05/11 00:33:28.735712 [INFO] Executing instruction: GetToggleForceRotate
2024/05/11 00:33:28.735736 [INFO] Checking if logs need forced rotation
2024/05/11 00:33:28.735756 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/11 00:33:29.247220 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/11 00:33:29.689348 [INFO] Generating rsyslog config from Procfile
2024/05/11 00:33:29.690619 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/05/11 00:33:29.767280 [INFO] Executing instruction: PostBuildEbExtension
2024/05/11 00:33:29.767303 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/05/11 00:33:29.767325 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2 --configsets Infra-EmbeddedPostBuild
2024/05/11 00:33:35.356388 [INFO] Error occurred during build: Command 01_start_gunicorn failed

2024/05/11 00:33:35.356416 [ERROR] An error occurred during execution of command [app-deploy] - [PostBuildEbExtension]. Stop running the command. Error: container commands build failed. Please refer to /var/log/cfn-init.log for more details. 

2024/05/11 00:33:35.356420 [INFO] Executing cleanup logic
2024/05/11 00:33:35.356560 [INFO] CommandService Response: {"status":"FAILURE","api_version":"1.0","results":[{"status":"FAILURE","msg":"Engine execution has encountered an error.","returncode":1,"events":[{"msg":"Instance deployment successfully generated a 'Procfile'.","timestamp":1715387606541,"severity":"INFO"},{"msg":"Instance deployment failed. For details, see 'eb-engine.log'.","timestamp":1715387615356,"severity":"ERROR"}]}]}

2024/05/11 00:33:35.356745 [INFO] Platform Engine finished execution on command: app-deploy

2024/05/11 00:44:19.280756 [INFO] Starting...
2024/05/11 00:44:19.280810 [INFO] Starting EBPlatform-PlatformEngine
2024/05/11 00:44:19.280831 [INFO] reading event message file
2024/05/11 00:44:19.280990 [INFO] Engine received EB command cfn-hup-exec

2024/05/11 00:44:19.351625 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/11 00:44:19.794395 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/11 00:44:20.137143 [INFO] checking whether command app-deploy is applicable to this instance...
2024/05/11 00:44:20.137156 [INFO] this command is applicable to the instance, thus instance should execute command
2024/05/11 00:44:20.137160 [INFO] Engine command: (app-deploy)

2024/05/11 00:44:20.137166 [INFO] Downloading EB Application...
2024/05/11 00:44:20.137169 [INFO] Region: ap-southeast-2
2024/05/11 00:44:20.137172 [INFO] envID: e-3caxgjpcfu
2024/05/11 00:44:20.137175 [INFO] envBucket: elasticbeanstalk-ap-southeast-2-905418134427
2024/05/11 00:44:20.137178 [INFO] Using manifest file name from command request
2024/05/11 00:44:20.137183 [INFO] Manifest name is : manifest_1715388237408
2024/05/11 00:44:20.137185 [INFO] Download app version manifest
2024/05/11 00:44:20.137343 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/versions/manifest_1715388237408
2024/05/11 00:44:20.177447 [INFO] Download successful108bytes downloaded
2024/05/11 00:44:20.177588 [INFO] Trying to read and parse version manifest...
2024/05/11 00:44:20.181167 [INFO] Downloading: bucket: elasticbeanstalk-ap-southeast-2-905418134427, object: /resources/environments/e-3caxgjpcfu/_runtime/_versions/new_assignment/app-240511_104228442162
2024/05/11 00:44:20.370295 [INFO] Download successful34502981bytes downloaded
2024/05/11 00:44:20.370551 [INFO] Executing instruction: ElectLeader
2024/05/11 00:44:20.370557 [INFO] Running leader election for instance i-058d20c0b3bfe358b...
2024/05/11 00:44:20.370560 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/05/11 00:44:20.370580 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 019c1747-ea7a-488f-8a77-a638b05899eb --listener-id i-058d20c0b3bfe358b --region ap-southeast-2
2024/05/11 00:44:20.734962 [INFO] Instance is Leader.
2024/05/11 00:44:20.735210 [INFO] Executing instruction: stopSqsd
2024/05/11 00:44:20.735219 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/05/11 00:44:20.735289 [INFO] Executing instruction: PreBuildEbExtension
2024/05/11 00:44:20.735294 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/05/11 00:44:20.735382 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2 --configsets Infra-EmbeddedPreBuild
2024/05/11 00:44:21.873793 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/05/11 00:44:21.873819 [INFO] Executing instruction: StageApplication
2024/05/11 00:44:22.217802 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/05/11 00:44:22.217823 [INFO] Running command /bin/sh -c /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/05/11 00:44:23.915534 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/05/11 00:44:24.028190 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/05/11 00:44:24.028224 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/05/11 00:44:24.028239 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/05/11 00:44:24.028242 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/05/11 00:44:24.028246 [INFO] Executing instruction: InstallDependency
2024/05/11 00:44:24.028251 [INFO] checking dependencies file
2024/05/11 00:44:24.028263 [INFO] Installing dependencies with requirements.txt by using Pip
2024/05/11 00:44:24.028275 [INFO] Running command /bin/sh -c /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/05/11 00:44:24.873188 [INFO] Requirement already satisfied: blinker==1.8.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 1)) (1.8.1)
Requirement already satisfied: click==8.1.7 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 2)) (8.1.7)
Requirement already satisfied: colorama==0.4.6 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 3)) (0.4.6)
Requirement already satisfied: email_validator==1.1.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 4)) (1.1.3)
Requirement already satisfied: Flask==3.0.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 5)) (3.0.3)
Requirement already satisfied: Flask-WTF==1.2.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 6)) (1.2.1)
Requirement already satisfied: Flask-Login==0.6.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 7)) (0.6.1)
Requirement already satisfied: gunicorn==22.0.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 8)) (22.0.0)
Requirement already satisfied: importlib_metadata==7.1.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 9)) (7.1.0)
Requirement already satisfied: itsdangerous==2.2.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 10)) (2.2.0)
Requirement already satisfied: Jinja2==3.1.3 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 11)) (3.1.3)
Requirement already satisfied: MarkupSafe==2.1.5 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 12)) (2.1.5)
Requirement already satisfied: Werkzeug==3.0.2 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 13)) (3.0.2)
Requirement already satisfied: WTForms==3.1.2 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 14)) (3.1.2)
Requirement already satisfied: zipp==3.18.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 15)) (3.18.1)
Requirement already satisfied: SQLAlchemy==2.0.29 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 16)) (2.0.29)
Requirement already satisfied: psycopg2-binary==2.9.9 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 17)) (2.9.9)
Requirement already satisfied: boto3==1.34.98 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from -r requirements.txt (line 18)) (1.34.98)
Requirement already satisfied: dnspython>=1.15.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from email_validator==1.1.3->-r requirements.txt (line 4)) (2.6.1)
Requirement already satisfied: idna>=2.0.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from email_validator==1.1.3->-r requirements.txt (line 4)) (3.7)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from gunicorn==22.0.0->-r requirements.txt (line 8)) (24.0)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from SQLAlchemy==2.0.29->-r requirements.txt (line 16)) (3.0.3)
Requirement already satisfied: typing-extensions>=4.6.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from SQLAlchemy==2.0.29->-r requirements.txt (line 16)) (4.11.0)
Requirement already satisfied: jmespath<2.0.0,>=0.7.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 18)) (1.0.1)
Requirement already satisfied: botocore<1.35.0,>=1.34.98 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 18)) (1.34.101)
Requirement already satisfied: s3transfer<0.11.0,>=0.10.0 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from boto3==1.34.98->-r requirements.txt (line 18)) (0.10.1)
Requirement already satisfied: urllib3<1.27,>=1.25.4 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 18)) (1.26.18)
Requirement already satisfied: python-dateutil<3.0.0,>=2.1 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 18)) (2.9.0.post0)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib/python3.9/site-packages (from python-dateutil<3.0.0,>=2.1->botocore<1.35.0,>=1.34.98->boto3==1.34.98->-r requirements.txt (line 18)) (1.16.0)

2024/05/11 00:44:24.873234 [INFO] WARNING: You are using pip version 21.3.1; however, version 24.0 is available.
You should consider upgrading via the '/var/app/venv/staging-LQM1lest/bin/python3.9 -m pip install --upgrade pip' command.

2024/05/11 00:44:24.873241 [INFO] Executing instruction: check Procfile
2024/05/11 00:44:24.873331 [INFO] creating default Procfile...
2024/05/11 00:44:24.873711 [INFO] Executing instruction: configure X-Ray
2024/05/11 00:44:24.873718 [INFO] X-Ray is not enabled.
2024/05/11 00:44:24.873722 [INFO] Executing instruction: configure proxy server
2024/05/11 00:44:24.969036 [INFO] Executing instruction: configure healthd specific proxy conf
2024/05/11 00:44:24.971386 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/11 00:44:25.037092 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/05/11 00:44:25.037127 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/11 00:44:25.059390 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/05/11 00:44:25.071832 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/11 00:44:25.084621 [INFO] Running command /bin/sh -c systemctl stop healthd.service
2024/05/11 00:44:25.146932 [INFO] Running command /bin/sh -c systemctl disable healthd.service
2024/05/11 00:44:25.464358 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/05/11 00:44:25.464539 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/11 00:44:25.731452 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/11 00:44:25.741019 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/05/11 00:44:26.048125 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/05/11 00:44:26.055491 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/05/11 00:44:26.075601 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/05/11 00:44:26.420871 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/05/11 00:44:26.432133 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/05/11 00:44:26.780616 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/05/11 00:44:26.780650 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/05/11 00:44:26.794729 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/05/11 00:44:26.803573 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/05/11 00:44:26.870716 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/05/11 00:44:26.871460 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/05/11 00:44:26.872324 [INFO] Executing instruction: configure log streaming
2024/05/11 00:44:26.872334 [INFO] log streaming is not enabled
2024/05/11 00:44:26.872337 [INFO] disable log stream
2024/05/11 00:44:26.872353 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/05/11 00:44:26.898116 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/05/11 00:44:26.917739 [INFO] Executing instruction: GetToggleForceRotate
2024/05/11 00:44:26.917763 [INFO] Checking if logs need forced rotation
2024/05/11 00:44:26.917790 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/11 00:44:27.465921 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/11 00:44:27.893462 [INFO] Generating rsyslog config from Procfile
2024/05/11 00:44:27.894881 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/05/11 00:44:27.945277 [INFO] Executing instruction: PostBuildEbExtension
2024/05/11 00:44:27.945308 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/05/11 00:44:27.945401 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2 --configsets Infra-EmbeddedPostBuild
2024/05/11 00:44:33.468058 [INFO] Error occurred during build: Command 01_start_gunicorn failed

2024/05/11 00:44:33.468086 [ERROR] An error occurred during execution of command [app-deploy] - [PostBuildEbExtension]. Stop running the command. Error: container commands build failed. Please refer to /var/log/cfn-init.log for more details. 

2024/05/11 00:44:33.468090 [INFO] Executing cleanup logic
2024/05/11 00:44:33.468227 [INFO] CommandService Response: {"status":"FAILURE","api_version":"1.0","results":[{"status":"FAILURE","msg":"Engine execution has encountered an error.","returncode":1,"events":[{"msg":"Instance deployment successfully generated a 'Procfile'.","timestamp":1715388264873,"severity":"INFO"},{"msg":"Instance deployment failed. For details, see 'eb-engine.log'.","timestamp":1715388273468,"severity":"ERROR"}]}]}

2024/05/11 00:44:33.468556 [INFO] Platform Engine finished execution on command: app-deploy

2024/05/11 00:46:55.339310 [INFO] Starting...
2024/05/11 00:46:55.339365 [INFO] Starting EBPlatform-PlatformEngine
2024/05/11 00:46:55.339385 [INFO] reading event message file
2024/05/11 00:46:55.339545 [INFO] Engine received EB command cfn-hup-exec

2024/05/11 00:46:55.418074 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/11 00:46:55.796406 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/11 00:46:56.203931 [INFO] checking whether command tail-log is applicable to this instance...
2024/05/11 00:46:56.203945 [INFO] this command is applicable to the instance, thus instance should execute command
2024/05/11 00:46:56.203956 [INFO] Engine command: (tail-log)

2024/05/11 00:46:56.204068 [INFO] Executing instruction: GetTailLogs
2024/05/11 00:46:56.204088 [INFO] Tail Logs...
2024/05/11 00:46:56.204575 [INFO] Running command /bin/sh -c tail -n 100 /var/log/eb-hooks.log
2024/05/11 00:46:56.207057 [INFO] Running command /bin/sh -c tail -n 100 /var/log/nginx/access.log
2024/05/11 00:46:56.209416 [INFO] Running command /bin/sh -c tail -n 100 /var/log/nginx/error.log
2024/05/11 00:46:56.211398 [INFO] Running command /bin/sh -c tail -n 100 /var/log/web.stdout.log
2024/05/11 00:46:56.213169 [INFO] Running command /bin/sh -c tail -n 100 /var/log/eb-engine.log
2024/05/11 00:46:56.347739 [INFO] Executing cleanup logic
2024/05/11 00:46:56.347833 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1715388416347,"severity":"INFO"}]}]}

2024/05/11 00:46:56.347852 [INFO] Platform Engine finished execution on command: tail-log

2024/05/11 00:49:30.161285 [INFO] Starting...
2024/05/11 00:49:30.161342 [INFO] Starting EBPlatform-PlatformEngine
2024/05/11 00:49:30.161363 [INFO] reading event message file
2024/05/11 00:49:30.161523 [INFO] Engine received EB command cfn-hup-exec

2024/05/11 00:49:30.256210 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBAutoScalingGroup --region ap-southeast-2
2024/05/11 00:49:30.866949 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:ap-southeast-2:905418134427:stack/awseb-e-3caxgjpcfu-stack/36d6d0a0-0c66-11ef-af1b-0a6b6d027f5f -r AWSEBBeanstalkMetadata --region ap-southeast-2
2024/05/11 00:49:31.269592 [INFO] checking whether command bundle-log is applicable to this instance...
2024/05/11 00:49:31.269606 [INFO] this command is applicable to the instance, thus instance should execute command
2024/05/11 00:49:31.269611 [INFO] Engine command: (bundle-log)

2024/05/11 00:49:31.269661 [INFO] Executing instruction: GetBundleLogs
2024/05/11 00:49:31.269664 [INFO] Bundle Logs...
